(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function Iy(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Xh={exports:{}},Co={},Jh={exports:{}},U={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ji=Symbol.for("react.element"),Ty=Symbol.for("react.portal"),ky=Symbol.for("react.fragment"),Ny=Symbol.for("react.strict_mode"),Py=Symbol.for("react.profiler"),Ry=Symbol.for("react.provider"),Dy=Symbol.for("react.context"),Ay=Symbol.for("react.forward_ref"),Oy=Symbol.for("react.suspense"),Ly=Symbol.for("react.memo"),My=Symbol.for("react.lazy"),Fc=Symbol.iterator;function by(t){return t===null||typeof t!="object"?null:(t=Fc&&t[Fc]||t["@@iterator"],typeof t=="function"?t:null)}var Zh={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ef=Object.assign,tf={};function Nr(t,e,n){this.props=t,this.context=e,this.refs=tf,this.updater=n||Zh}Nr.prototype.isReactComponent={};Nr.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Nr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function nf(){}nf.prototype=Nr.prototype;function eu(t,e,n){this.props=t,this.context=e,this.refs=tf,this.updater=n||Zh}var tu=eu.prototype=new nf;tu.constructor=eu;ef(tu,Nr.prototype);tu.isPureReactComponent=!0;var jc=Array.isArray,rf=Object.prototype.hasOwnProperty,nu={current:null},sf={key:!0,ref:!0,__self:!0,__source:!0};function of(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)rf.call(e,r)&&!sf.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var a=Array(l),u=0;u<l;u++)a[u]=arguments[u+2];i.children=a}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:ji,type:t,key:s,ref:o,props:i,_owner:nu.current}}function Fy(t,e){return{$$typeof:ji,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ru(t){return typeof t=="object"&&t!==null&&t.$$typeof===ji}function jy(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var zc=/\/+/g;function el(t,e){return typeof t=="object"&&t!==null&&t.key!=null?jy(""+t.key):e.toString(36)}function ys(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case ji:case Ty:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+el(o,0):r,jc(i)?(n="",t!=null&&(n=t.replace(zc,"$&/")+"/"),ys(i,e,n,"",function(u){return u})):i!=null&&(ru(i)&&(i=Fy(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(zc,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",jc(t))for(var l=0;l<t.length;l++){s=t[l];var a=r+el(s,l);o+=ys(s,e,n,a,i)}else if(a=by(t),typeof a=="function")for(t=a.call(t),l=0;!(s=t.next()).done;)s=s.value,a=r+el(s,l++),o+=ys(s,e,n,a,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ji(t,e,n){if(t==null)return t;var r=[],i=0;return ys(t,r,"","",function(s){return e.call(n,s,i++)}),r}function zy(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Pe={current:null},_s={transition:null},Uy={ReactCurrentDispatcher:Pe,ReactCurrentBatchConfig:_s,ReactCurrentOwner:nu};U.Children={map:Ji,forEach:function(t,e,n){Ji(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ji(t,function(){e++}),e},toArray:function(t){return Ji(t,function(e){return e})||[]},only:function(t){if(!ru(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};U.Component=Nr;U.Fragment=ky;U.Profiler=Py;U.PureComponent=eu;U.StrictMode=Ny;U.Suspense=Oy;U.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Uy;U.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=ef({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=nu.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(a in e)rf.call(e,a)&&!sf.hasOwnProperty(a)&&(r[a]=e[a]===void 0&&l!==void 0?l[a]:e[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){l=Array(a);for(var u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:ji,type:t.type,key:i,ref:s,props:r,_owner:o}};U.createContext=function(t){return t={$$typeof:Dy,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Ry,_context:t},t.Consumer=t};U.createElement=of;U.createFactory=function(t){var e=of.bind(null,t);return e.type=t,e};U.createRef=function(){return{current:null}};U.forwardRef=function(t){return{$$typeof:Ay,render:t}};U.isValidElement=ru;U.lazy=function(t){return{$$typeof:My,_payload:{_status:-1,_result:t},_init:zy}};U.memo=function(t,e){return{$$typeof:Ly,type:t,compare:e===void 0?null:e}};U.startTransition=function(t){var e=_s.transition;_s.transition={};try{t()}finally{_s.transition=e}};U.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};U.useCallback=function(t,e){return Pe.current.useCallback(t,e)};U.useContext=function(t){return Pe.current.useContext(t)};U.useDebugValue=function(){};U.useDeferredValue=function(t){return Pe.current.useDeferredValue(t)};U.useEffect=function(t,e){return Pe.current.useEffect(t,e)};U.useId=function(){return Pe.current.useId()};U.useImperativeHandle=function(t,e,n){return Pe.current.useImperativeHandle(t,e,n)};U.useInsertionEffect=function(t,e){return Pe.current.useInsertionEffect(t,e)};U.useLayoutEffect=function(t,e){return Pe.current.useLayoutEffect(t,e)};U.useMemo=function(t,e){return Pe.current.useMemo(t,e)};U.useReducer=function(t,e,n){return Pe.current.useReducer(t,e,n)};U.useRef=function(t){return Pe.current.useRef(t)};U.useState=function(t){return Pe.current.useState(t)};U.useSyncExternalStore=function(t,e,n){return Pe.current.useSyncExternalStore(t,e,n)};U.useTransition=function(){return Pe.current.useTransition()};U.version="18.2.0";Jh.exports=U;var L=Jh.exports;const Hy=Iy(L);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $y=L,Wy=Symbol.for("react.element"),By=Symbol.for("react.fragment"),Vy=Object.prototype.hasOwnProperty,Gy=$y.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Qy={key:!0,ref:!0,__self:!0,__source:!0};function lf(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Vy.call(e,r)&&!Qy.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Wy,type:t,key:s,ref:o,props:i,_owner:Gy.current}}Co.Fragment=By;Co.jsx=lf;Co.jsxs=lf;Xh.exports=Co;var y=Xh.exports,Hl={},af={exports:{}},Qe={},uf={exports:{}},cf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(C,R){var M=C.length;C.push(R);e:for(;0<M;){var Z=M-1>>>1,he=C[Z];if(0<i(he,R))C[Z]=R,C[M]=he,M=Z;else break e}}function n(C){return C.length===0?null:C[0]}function r(C){if(C.length===0)return null;var R=C[0],M=C.pop();if(M!==R){C[0]=M;e:for(var Z=0,he=C.length,qi=he>>>1;Z<qi;){var mn=2*(Z+1)-1,Zo=C[mn],gn=mn+1,Xi=C[gn];if(0>i(Zo,M))gn<he&&0>i(Xi,Zo)?(C[Z]=Xi,C[gn]=M,Z=gn):(C[Z]=Zo,C[mn]=M,Z=mn);else if(gn<he&&0>i(Xi,M))C[Z]=Xi,C[gn]=M,Z=gn;else break e}}return R}function i(C,R){var M=C.sortIndex-R.sortIndex;return M!==0?M:C.id-R.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var a=[],u=[],d=1,c=null,h=3,g=!1,_=!1,v=!1,k=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,f=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function m(C){for(var R=n(u);R!==null;){if(R.callback===null)r(u);else if(R.startTime<=C)r(u),R.sortIndex=R.expirationTime,e(a,R);else break;R=n(u)}}function w(C){if(v=!1,m(C),!_)if(n(a)!==null)_=!0,Et(x);else{var R=n(u);R!==null&&ft(w,R.startTime-C)}}function x(C,R){_=!1,v&&(v=!1,p(D),D=-1),g=!0;var M=h;try{for(m(R),c=n(a);c!==null&&(!(c.expirationTime>R)||C&&!A());){var Z=c.callback;if(typeof Z=="function"){c.callback=null,h=c.priorityLevel;var he=Z(c.expirationTime<=R);R=t.unstable_now(),typeof he=="function"?c.callback=he:c===n(a)&&r(a),m(R)}else r(a);c=n(a)}if(c!==null)var qi=!0;else{var mn=n(u);mn!==null&&ft(w,mn.startTime-R),qi=!1}return qi}finally{c=null,h=M,g=!1}}var P=!1,N=null,D=-1,V=5,b=-1;function A(){return!(t.unstable_now()-b<V)}function de(){if(N!==null){var C=t.unstable_now();b=C;var R=!0;try{R=N(!0,C)}finally{R?De():(P=!1,N=null)}}else P=!1}var De;if(typeof f=="function")De=function(){f(de)};else if(typeof MessageChannel<"u"){var tt=new MessageChannel,Mr=tt.port2;tt.port1.onmessage=de,De=function(){Mr.postMessage(null)}}else De=function(){k(de,0)};function Et(C){N=C,P||(P=!0,De())}function ft(C,R){D=k(function(){C(t.unstable_now())},R)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(C){C.callback=null},t.unstable_continueExecution=function(){_||g||(_=!0,Et(x))},t.unstable_forceFrameRate=function(C){0>C||125<C?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<C?Math.floor(1e3/C):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(a)},t.unstable_next=function(C){switch(h){case 1:case 2:case 3:var R=3;break;default:R=h}var M=h;h=R;try{return C()}finally{h=M}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(C,R){switch(C){case 1:case 2:case 3:case 4:case 5:break;default:C=3}var M=h;h=C;try{return R()}finally{h=M}},t.unstable_scheduleCallback=function(C,R,M){var Z=t.unstable_now();switch(typeof M=="object"&&M!==null?(M=M.delay,M=typeof M=="number"&&0<M?Z+M:Z):M=Z,C){case 1:var he=-1;break;case 2:he=250;break;case 5:he=1073741823;break;case 4:he=1e4;break;default:he=5e3}return he=M+he,C={id:d++,callback:R,priorityLevel:C,startTime:M,expirationTime:he,sortIndex:-1},M>Z?(C.sortIndex=M,e(u,C),n(a)===null&&C===n(u)&&(v?(p(D),D=-1):v=!0,ft(w,M-Z))):(C.sortIndex=he,e(a,C),_||g||(_=!0,Et(x))),C},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(C){var R=h;return function(){var M=h;h=R;try{return C.apply(this,arguments)}finally{h=M}}}})(cf);uf.exports=cf;var Ky=uf.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var df=L,Ge=Ky;function E(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var hf=new Set,hi={};function Hn(t,e){gr(t,e),gr(t+"Capture",e)}function gr(t,e){for(hi[t]=e,t=0;t<e.length;t++)hf.add(e[t])}var Dt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$l=Object.prototype.hasOwnProperty,Yy=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Uc={},Hc={};function qy(t){return $l.call(Hc,t)?!0:$l.call(Uc,t)?!1:Yy.test(t)?Hc[t]=!0:(Uc[t]=!0,!1)}function Xy(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Jy(t,e,n,r){if(e===null||typeof e>"u"||Xy(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Re(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var we={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){we[t]=new Re(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];we[e]=new Re(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){we[t]=new Re(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){we[t]=new Re(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){we[t]=new Re(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){we[t]=new Re(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){we[t]=new Re(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){we[t]=new Re(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){we[t]=new Re(t,5,!1,t.toLowerCase(),null,!1,!1)});var iu=/[\-:]([a-z])/g;function su(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(iu,su);we[e]=new Re(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(iu,su);we[e]=new Re(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(iu,su);we[e]=new Re(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){we[t]=new Re(t,1,!1,t.toLowerCase(),null,!1,!1)});we.xlinkHref=new Re("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){we[t]=new Re(t,1,!1,t.toLowerCase(),null,!0,!0)});function ou(t,e,n,r){var i=we.hasOwnProperty(e)?we[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Jy(e,n,i,r)&&(n=null),r||i===null?qy(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ft=df.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Zi=Symbol.for("react.element"),Qn=Symbol.for("react.portal"),Kn=Symbol.for("react.fragment"),lu=Symbol.for("react.strict_mode"),Wl=Symbol.for("react.profiler"),ff=Symbol.for("react.provider"),pf=Symbol.for("react.context"),au=Symbol.for("react.forward_ref"),Bl=Symbol.for("react.suspense"),Vl=Symbol.for("react.suspense_list"),uu=Symbol.for("react.memo"),Ut=Symbol.for("react.lazy"),mf=Symbol.for("react.offscreen"),$c=Symbol.iterator;function br(t){return t===null||typeof t!="object"?null:(t=$c&&t[$c]||t["@@iterator"],typeof t=="function"?t:null)}var ne=Object.assign,tl;function Kr(t){if(tl===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);tl=e&&e[1]||""}return`
`+tl+t}var nl=!1;function rl(t,e){if(!t||nl)return"";nl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var a=`
`+i[o].replace(" at new "," at ");return t.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",t.displayName)),a}while(1<=o&&0<=l);break}}}finally{nl=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Kr(t):""}function Zy(t){switch(t.tag){case 5:return Kr(t.type);case 16:return Kr("Lazy");case 13:return Kr("Suspense");case 19:return Kr("SuspenseList");case 0:case 2:case 15:return t=rl(t.type,!1),t;case 11:return t=rl(t.type.render,!1),t;case 1:return t=rl(t.type,!0),t;default:return""}}function Gl(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Kn:return"Fragment";case Qn:return"Portal";case Wl:return"Profiler";case lu:return"StrictMode";case Bl:return"Suspense";case Vl:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case pf:return(t.displayName||"Context")+".Consumer";case ff:return(t._context.displayName||"Context")+".Provider";case au:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case uu:return e=t.displayName||null,e!==null?e:Gl(t.type)||"Memo";case Ut:e=t._payload,t=t._init;try{return Gl(t(e))}catch{}}return null}function e_(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Gl(e);case 8:return e===lu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function sn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function gf(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function t_(t){var e=gf(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function es(t){t._valueTracker||(t._valueTracker=t_(t))}function yf(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=gf(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Rs(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ql(t,e){var n=e.checked;return ne({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Wc(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=sn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function _f(t,e){e=e.checked,e!=null&&ou(t,"checked",e,!1)}function Kl(t,e){_f(t,e);var n=sn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Yl(t,e.type,n):e.hasOwnProperty("defaultValue")&&Yl(t,e.type,sn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Bc(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Yl(t,e,n){(e!=="number"||Rs(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Yr=Array.isArray;function or(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+sn(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function ql(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(E(91));return ne({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Vc(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(E(92));if(Yr(n)){if(1<n.length)throw Error(E(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:sn(n)}}function vf(t,e){var n=sn(e.value),r=sn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Gc(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function wf(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Xl(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?wf(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ts,Cf=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ts=ts||document.createElement("div"),ts.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ts.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function fi(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Jr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},n_=["Webkit","ms","Moz","O"];Object.keys(Jr).forEach(function(t){n_.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Jr[e]=Jr[t]})});function Ef(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Jr.hasOwnProperty(t)&&Jr[t]?(""+e).trim():e+"px"}function Sf(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Ef(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var r_=ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Jl(t,e){if(e){if(r_[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(E(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(E(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(E(61))}if(e.style!=null&&typeof e.style!="object")throw Error(E(62))}}function Zl(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ea=null;function cu(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ta=null,lr=null,ar=null;function Qc(t){if(t=Hi(t)){if(typeof ta!="function")throw Error(E(280));var e=t.stateNode;e&&(e=To(e),ta(t.stateNode,t.type,e))}}function xf(t){lr?ar?ar.push(t):ar=[t]:lr=t}function If(){if(lr){var t=lr,e=ar;if(ar=lr=null,Qc(t),e)for(t=0;t<e.length;t++)Qc(e[t])}}function Tf(t,e){return t(e)}function kf(){}var il=!1;function Nf(t,e,n){if(il)return t(e,n);il=!0;try{return Tf(t,e,n)}finally{il=!1,(lr!==null||ar!==null)&&(kf(),If())}}function pi(t,e){var n=t.stateNode;if(n===null)return null;var r=To(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(E(231,e,typeof n));return n}var na=!1;if(Dt)try{var Fr={};Object.defineProperty(Fr,"passive",{get:function(){na=!0}}),window.addEventListener("test",Fr,Fr),window.removeEventListener("test",Fr,Fr)}catch{na=!1}function i_(t,e,n,r,i,s,o,l,a){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var Zr=!1,Ds=null,As=!1,ra=null,s_={onError:function(t){Zr=!0,Ds=t}};function o_(t,e,n,r,i,s,o,l,a){Zr=!1,Ds=null,i_.apply(s_,arguments)}function l_(t,e,n,r,i,s,o,l,a){if(o_.apply(this,arguments),Zr){if(Zr){var u=Ds;Zr=!1,Ds=null}else throw Error(E(198));As||(As=!0,ra=u)}}function $n(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Pf(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Kc(t){if($n(t)!==t)throw Error(E(188))}function a_(t){var e=t.alternate;if(!e){if(e=$n(t),e===null)throw Error(E(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Kc(i),t;if(s===r)return Kc(i),e;s=s.sibling}throw Error(E(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(E(189))}}if(n.alternate!==r)throw Error(E(190))}if(n.tag!==3)throw Error(E(188));return n.stateNode.current===n?t:e}function Rf(t){return t=a_(t),t!==null?Df(t):null}function Df(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Df(t);if(e!==null)return e;t=t.sibling}return null}var Af=Ge.unstable_scheduleCallback,Yc=Ge.unstable_cancelCallback,u_=Ge.unstable_shouldYield,c_=Ge.unstable_requestPaint,se=Ge.unstable_now,d_=Ge.unstable_getCurrentPriorityLevel,du=Ge.unstable_ImmediatePriority,Of=Ge.unstable_UserBlockingPriority,Os=Ge.unstable_NormalPriority,h_=Ge.unstable_LowPriority,Lf=Ge.unstable_IdlePriority,Eo=null,yt=null;function f_(t){if(yt&&typeof yt.onCommitFiberRoot=="function")try{yt.onCommitFiberRoot(Eo,t,void 0,(t.current.flags&128)===128)}catch{}}var ut=Math.clz32?Math.clz32:g_,p_=Math.log,m_=Math.LN2;function g_(t){return t>>>=0,t===0?32:31-(p_(t)/m_|0)|0}var ns=64,rs=4194304;function qr(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ls(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=qr(l):(s&=o,s!==0&&(r=qr(s)))}else o=n&~i,o!==0?r=qr(o):s!==0&&(r=qr(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-ut(e),i=1<<n,r|=t[n],e&=~i;return r}function y_(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function __(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-ut(s),l=1<<o,a=i[o];a===-1?(!(l&n)||l&r)&&(i[o]=y_(l,e)):a<=e&&(t.expiredLanes|=l),s&=~l}}function ia(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Mf(){var t=ns;return ns<<=1,!(ns&4194240)&&(ns=64),t}function sl(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function zi(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ut(e),t[e]=n}function v_(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-ut(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function hu(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ut(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var W=0;function bf(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Ff,fu,jf,zf,Uf,sa=!1,is=[],Gt=null,Qt=null,Kt=null,mi=new Map,gi=new Map,$t=[],w_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function qc(t,e){switch(t){case"focusin":case"focusout":Gt=null;break;case"dragenter":case"dragleave":Qt=null;break;case"mouseover":case"mouseout":Kt=null;break;case"pointerover":case"pointerout":mi.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":gi.delete(e.pointerId)}}function jr(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Hi(e),e!==null&&fu(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function C_(t,e,n,r,i){switch(e){case"focusin":return Gt=jr(Gt,t,e,n,r,i),!0;case"dragenter":return Qt=jr(Qt,t,e,n,r,i),!0;case"mouseover":return Kt=jr(Kt,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return mi.set(s,jr(mi.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,gi.set(s,jr(gi.get(s)||null,t,e,n,r,i)),!0}return!1}function Hf(t){var e=Cn(t.target);if(e!==null){var n=$n(e);if(n!==null){if(e=n.tag,e===13){if(e=Pf(n),e!==null){t.blockedOn=e,Uf(t.priority,function(){jf(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function vs(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=oa(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);ea=r,n.target.dispatchEvent(r),ea=null}else return e=Hi(n),e!==null&&fu(e),t.blockedOn=n,!1;e.shift()}return!0}function Xc(t,e,n){vs(t)&&n.delete(e)}function E_(){sa=!1,Gt!==null&&vs(Gt)&&(Gt=null),Qt!==null&&vs(Qt)&&(Qt=null),Kt!==null&&vs(Kt)&&(Kt=null),mi.forEach(Xc),gi.forEach(Xc)}function zr(t,e){t.blockedOn===e&&(t.blockedOn=null,sa||(sa=!0,Ge.unstable_scheduleCallback(Ge.unstable_NormalPriority,E_)))}function yi(t){function e(i){return zr(i,t)}if(0<is.length){zr(is[0],t);for(var n=1;n<is.length;n++){var r=is[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Gt!==null&&zr(Gt,t),Qt!==null&&zr(Qt,t),Kt!==null&&zr(Kt,t),mi.forEach(e),gi.forEach(e),n=0;n<$t.length;n++)r=$t[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<$t.length&&(n=$t[0],n.blockedOn===null);)Hf(n),n.blockedOn===null&&$t.shift()}var ur=Ft.ReactCurrentBatchConfig,Ms=!0;function S_(t,e,n,r){var i=W,s=ur.transition;ur.transition=null;try{W=1,pu(t,e,n,r)}finally{W=i,ur.transition=s}}function x_(t,e,n,r){var i=W,s=ur.transition;ur.transition=null;try{W=4,pu(t,e,n,r)}finally{W=i,ur.transition=s}}function pu(t,e,n,r){if(Ms){var i=oa(t,e,n,r);if(i===null)ml(t,e,r,bs,n),qc(t,r);else if(C_(i,t,e,n,r))r.stopPropagation();else if(qc(t,r),e&4&&-1<w_.indexOf(t)){for(;i!==null;){var s=Hi(i);if(s!==null&&Ff(s),s=oa(t,e,n,r),s===null&&ml(t,e,r,bs,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else ml(t,e,r,null,n)}}var bs=null;function oa(t,e,n,r){if(bs=null,t=cu(r),t=Cn(t),t!==null)if(e=$n(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Pf(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return bs=t,null}function $f(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(d_()){case du:return 1;case Of:return 4;case Os:case h_:return 16;case Lf:return 536870912;default:return 16}default:return 16}}var Bt=null,mu=null,ws=null;function Wf(){if(ws)return ws;var t,e=mu,n=e.length,r,i="value"in Bt?Bt.value:Bt.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return ws=i.slice(t,1<r?1-r:void 0)}function Cs(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ss(){return!0}function Jc(){return!1}function Ke(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?ss:Jc,this.isPropagationStopped=Jc,this}return ne(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ss)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ss)},persist:function(){},isPersistent:ss}),e}var Pr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gu=Ke(Pr),Ui=ne({},Pr,{view:0,detail:0}),I_=Ke(Ui),ol,ll,Ur,So=ne({},Ui,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yu,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ur&&(Ur&&t.type==="mousemove"?(ol=t.screenX-Ur.screenX,ll=t.screenY-Ur.screenY):ll=ol=0,Ur=t),ol)},movementY:function(t){return"movementY"in t?t.movementY:ll}}),Zc=Ke(So),T_=ne({},So,{dataTransfer:0}),k_=Ke(T_),N_=ne({},Ui,{relatedTarget:0}),al=Ke(N_),P_=ne({},Pr,{animationName:0,elapsedTime:0,pseudoElement:0}),R_=Ke(P_),D_=ne({},Pr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),A_=Ke(D_),O_=ne({},Pr,{data:0}),ed=Ke(O_),L_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},M_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},b_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function F_(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=b_[t])?!!e[t]:!1}function yu(){return F_}var j_=ne({},Ui,{key:function(t){if(t.key){var e=L_[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Cs(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?M_[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yu,charCode:function(t){return t.type==="keypress"?Cs(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Cs(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),z_=Ke(j_),U_=ne({},So,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),td=Ke(U_),H_=ne({},Ui,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yu}),$_=Ke(H_),W_=ne({},Pr,{propertyName:0,elapsedTime:0,pseudoElement:0}),B_=Ke(W_),V_=ne({},So,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),G_=Ke(V_),Q_=[9,13,27,32],_u=Dt&&"CompositionEvent"in window,ei=null;Dt&&"documentMode"in document&&(ei=document.documentMode);var K_=Dt&&"TextEvent"in window&&!ei,Bf=Dt&&(!_u||ei&&8<ei&&11>=ei),nd=" ",rd=!1;function Vf(t,e){switch(t){case"keyup":return Q_.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Gf(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Yn=!1;function Y_(t,e){switch(t){case"compositionend":return Gf(e);case"keypress":return e.which!==32?null:(rd=!0,nd);case"textInput":return t=e.data,t===nd&&rd?null:t;default:return null}}function q_(t,e){if(Yn)return t==="compositionend"||!_u&&Vf(t,e)?(t=Wf(),ws=mu=Bt=null,Yn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Bf&&e.locale!=="ko"?null:e.data;default:return null}}var X_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function id(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!X_[t.type]:e==="textarea"}function Qf(t,e,n,r){xf(r),e=Fs(e,"onChange"),0<e.length&&(n=new gu("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ti=null,_i=null;function J_(t){ip(t,0)}function xo(t){var e=Jn(t);if(yf(e))return t}function Z_(t,e){if(t==="change")return e}var Kf=!1;if(Dt){var ul;if(Dt){var cl="oninput"in document;if(!cl){var sd=document.createElement("div");sd.setAttribute("oninput","return;"),cl=typeof sd.oninput=="function"}ul=cl}else ul=!1;Kf=ul&&(!document.documentMode||9<document.documentMode)}function od(){ti&&(ti.detachEvent("onpropertychange",Yf),_i=ti=null)}function Yf(t){if(t.propertyName==="value"&&xo(_i)){var e=[];Qf(e,_i,t,cu(t)),Nf(J_,e)}}function ev(t,e,n){t==="focusin"?(od(),ti=e,_i=n,ti.attachEvent("onpropertychange",Yf)):t==="focusout"&&od()}function tv(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return xo(_i)}function nv(t,e){if(t==="click")return xo(e)}function rv(t,e){if(t==="input"||t==="change")return xo(e)}function iv(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ht=typeof Object.is=="function"?Object.is:iv;function vi(t,e){if(ht(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!$l.call(e,i)||!ht(t[i],e[i]))return!1}return!0}function ld(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ad(t,e){var n=ld(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ld(n)}}function qf(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?qf(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Xf(){for(var t=window,e=Rs();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Rs(t.document)}return e}function vu(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function sv(t){var e=Xf(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&qf(n.ownerDocument.documentElement,n)){if(r!==null&&vu(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=ad(n,s);var o=ad(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var ov=Dt&&"documentMode"in document&&11>=document.documentMode,qn=null,la=null,ni=null,aa=!1;function ud(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;aa||qn==null||qn!==Rs(r)||(r=qn,"selectionStart"in r&&vu(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ni&&vi(ni,r)||(ni=r,r=Fs(la,"onSelect"),0<r.length&&(e=new gu("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=qn)))}function os(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Xn={animationend:os("Animation","AnimationEnd"),animationiteration:os("Animation","AnimationIteration"),animationstart:os("Animation","AnimationStart"),transitionend:os("Transition","TransitionEnd")},dl={},Jf={};Dt&&(Jf=document.createElement("div").style,"AnimationEvent"in window||(delete Xn.animationend.animation,delete Xn.animationiteration.animation,delete Xn.animationstart.animation),"TransitionEvent"in window||delete Xn.transitionend.transition);function Io(t){if(dl[t])return dl[t];if(!Xn[t])return t;var e=Xn[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Jf)return dl[t]=e[n];return t}var Zf=Io("animationend"),ep=Io("animationiteration"),tp=Io("animationstart"),np=Io("transitionend"),rp=new Map,cd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function dn(t,e){rp.set(t,e),Hn(e,[t])}for(var hl=0;hl<cd.length;hl++){var fl=cd[hl],lv=fl.toLowerCase(),av=fl[0].toUpperCase()+fl.slice(1);dn(lv,"on"+av)}dn(Zf,"onAnimationEnd");dn(ep,"onAnimationIteration");dn(tp,"onAnimationStart");dn("dblclick","onDoubleClick");dn("focusin","onFocus");dn("focusout","onBlur");dn(np,"onTransitionEnd");gr("onMouseEnter",["mouseout","mouseover"]);gr("onMouseLeave",["mouseout","mouseover"]);gr("onPointerEnter",["pointerout","pointerover"]);gr("onPointerLeave",["pointerout","pointerover"]);Hn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Hn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Hn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Hn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Hn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Hn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),uv=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xr));function dd(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,l_(r,e,void 0,t),t.currentTarget=null}function ip(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],a=l.instance,u=l.currentTarget;if(l=l.listener,a!==s&&i.isPropagationStopped())break e;dd(i,l,u),s=a}else for(o=0;o<r.length;o++){if(l=r[o],a=l.instance,u=l.currentTarget,l=l.listener,a!==s&&i.isPropagationStopped())break e;dd(i,l,u),s=a}}}if(As)throw t=ra,As=!1,ra=null,t}function Y(t,e){var n=e[fa];n===void 0&&(n=e[fa]=new Set);var r=t+"__bubble";n.has(r)||(sp(e,t,2,!1),n.add(r))}function pl(t,e,n){var r=0;e&&(r|=4),sp(n,t,r,e)}var ls="_reactListening"+Math.random().toString(36).slice(2);function wi(t){if(!t[ls]){t[ls]=!0,hf.forEach(function(n){n!=="selectionchange"&&(uv.has(n)||pl(n,!1,t),pl(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ls]||(e[ls]=!0,pl("selectionchange",!1,e))}}function sp(t,e,n,r){switch($f(e)){case 1:var i=S_;break;case 4:i=x_;break;default:i=pu}n=i.bind(null,e,n,t),i=void 0,!na||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function ml(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var a=o.tag;if((a===3||a===4)&&(a=o.stateNode.containerInfo,a===i||a.nodeType===8&&a.parentNode===i))return;o=o.return}for(;l!==null;){if(o=Cn(l),o===null)return;if(a=o.tag,a===5||a===6){r=s=o;continue e}l=l.parentNode}}r=r.return}Nf(function(){var u=s,d=cu(n),c=[];e:{var h=rp.get(t);if(h!==void 0){var g=gu,_=t;switch(t){case"keypress":if(Cs(n)===0)break e;case"keydown":case"keyup":g=z_;break;case"focusin":_="focus",g=al;break;case"focusout":_="blur",g=al;break;case"beforeblur":case"afterblur":g=al;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Zc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=k_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=$_;break;case Zf:case ep:case tp:g=R_;break;case np:g=B_;break;case"scroll":g=I_;break;case"wheel":g=G_;break;case"copy":case"cut":case"paste":g=A_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=td}var v=(e&4)!==0,k=!v&&t==="scroll",p=v?h!==null?h+"Capture":null:h;v=[];for(var f=u,m;f!==null;){m=f;var w=m.stateNode;if(m.tag===5&&w!==null&&(m=w,p!==null&&(w=pi(f,p),w!=null&&v.push(Ci(f,w,m)))),k)break;f=f.return}0<v.length&&(h=new g(h,_,null,n,d),c.push({event:h,listeners:v}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",h&&n!==ea&&(_=n.relatedTarget||n.fromElement)&&(Cn(_)||_[At]))break e;if((g||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,g?(_=n.relatedTarget||n.toElement,g=u,_=_?Cn(_):null,_!==null&&(k=$n(_),_!==k||_.tag!==5&&_.tag!==6)&&(_=null)):(g=null,_=u),g!==_)){if(v=Zc,w="onMouseLeave",p="onMouseEnter",f="mouse",(t==="pointerout"||t==="pointerover")&&(v=td,w="onPointerLeave",p="onPointerEnter",f="pointer"),k=g==null?h:Jn(g),m=_==null?h:Jn(_),h=new v(w,f+"leave",g,n,d),h.target=k,h.relatedTarget=m,w=null,Cn(d)===u&&(v=new v(p,f+"enter",_,n,d),v.target=m,v.relatedTarget=k,w=v),k=w,g&&_)t:{for(v=g,p=_,f=0,m=v;m;m=Vn(m))f++;for(m=0,w=p;w;w=Vn(w))m++;for(;0<f-m;)v=Vn(v),f--;for(;0<m-f;)p=Vn(p),m--;for(;f--;){if(v===p||p!==null&&v===p.alternate)break t;v=Vn(v),p=Vn(p)}v=null}else v=null;g!==null&&hd(c,h,g,v,!1),_!==null&&k!==null&&hd(c,k,_,v,!0)}}e:{if(h=u?Jn(u):window,g=h.nodeName&&h.nodeName.toLowerCase(),g==="select"||g==="input"&&h.type==="file")var x=Z_;else if(id(h))if(Kf)x=rv;else{x=tv;var P=ev}else(g=h.nodeName)&&g.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(x=nv);if(x&&(x=x(t,u))){Qf(c,x,n,d);break e}P&&P(t,h,u),t==="focusout"&&(P=h._wrapperState)&&P.controlled&&h.type==="number"&&Yl(h,"number",h.value)}switch(P=u?Jn(u):window,t){case"focusin":(id(P)||P.contentEditable==="true")&&(qn=P,la=u,ni=null);break;case"focusout":ni=la=qn=null;break;case"mousedown":aa=!0;break;case"contextmenu":case"mouseup":case"dragend":aa=!1,ud(c,n,d);break;case"selectionchange":if(ov)break;case"keydown":case"keyup":ud(c,n,d)}var N;if(_u)e:{switch(t){case"compositionstart":var D="onCompositionStart";break e;case"compositionend":D="onCompositionEnd";break e;case"compositionupdate":D="onCompositionUpdate";break e}D=void 0}else Yn?Vf(t,n)&&(D="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(D="onCompositionStart");D&&(Bf&&n.locale!=="ko"&&(Yn||D!=="onCompositionStart"?D==="onCompositionEnd"&&Yn&&(N=Wf()):(Bt=d,mu="value"in Bt?Bt.value:Bt.textContent,Yn=!0)),P=Fs(u,D),0<P.length&&(D=new ed(D,t,null,n,d),c.push({event:D,listeners:P}),N?D.data=N:(N=Gf(n),N!==null&&(D.data=N)))),(N=K_?Y_(t,n):q_(t,n))&&(u=Fs(u,"onBeforeInput"),0<u.length&&(d=new ed("onBeforeInput","beforeinput",null,n,d),c.push({event:d,listeners:u}),d.data=N))}ip(c,e)})}function Ci(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Fs(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=pi(t,n),s!=null&&r.unshift(Ci(t,s,i)),s=pi(t,e),s!=null&&r.push(Ci(t,s,i))),t=t.return}return r}function Vn(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function hd(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var l=n,a=l.alternate,u=l.stateNode;if(a!==null&&a===r)break;l.tag===5&&u!==null&&(l=u,i?(a=pi(n,s),a!=null&&o.unshift(Ci(n,a,l))):i||(a=pi(n,s),a!=null&&o.push(Ci(n,a,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var cv=/\r\n?/g,dv=/\u0000|\uFFFD/g;function fd(t){return(typeof t=="string"?t:""+t).replace(cv,`
`).replace(dv,"")}function as(t,e,n){if(e=fd(e),fd(t)!==e&&n)throw Error(E(425))}function js(){}var ua=null,ca=null;function da(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ha=typeof setTimeout=="function"?setTimeout:void 0,hv=typeof clearTimeout=="function"?clearTimeout:void 0,pd=typeof Promise=="function"?Promise:void 0,fv=typeof queueMicrotask=="function"?queueMicrotask:typeof pd<"u"?function(t){return pd.resolve(null).then(t).catch(pv)}:ha;function pv(t){setTimeout(function(){throw t})}function gl(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),yi(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);yi(e)}function Yt(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function md(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Rr=Math.random().toString(36).slice(2),gt="__reactFiber$"+Rr,Ei="__reactProps$"+Rr,At="__reactContainer$"+Rr,fa="__reactEvents$"+Rr,mv="__reactListeners$"+Rr,gv="__reactHandles$"+Rr;function Cn(t){var e=t[gt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[At]||n[gt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=md(t);t!==null;){if(n=t[gt])return n;t=md(t)}return e}t=n,n=t.parentNode}return null}function Hi(t){return t=t[gt]||t[At],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Jn(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(E(33))}function To(t){return t[Ei]||null}var pa=[],Zn=-1;function hn(t){return{current:t}}function X(t){0>Zn||(t.current=pa[Zn],pa[Zn]=null,Zn--)}function K(t,e){Zn++,pa[Zn]=t.current,t.current=e}var on={},Ie=hn(on),be=hn(!1),Rn=on;function yr(t,e){var n=t.type.contextTypes;if(!n)return on;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Fe(t){return t=t.childContextTypes,t!=null}function zs(){X(be),X(Ie)}function gd(t,e,n){if(Ie.current!==on)throw Error(E(168));K(Ie,e),K(be,n)}function op(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(E(108,e_(t)||"Unknown",i));return ne({},n,r)}function Us(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||on,Rn=Ie.current,K(Ie,t),K(be,be.current),!0}function yd(t,e,n){var r=t.stateNode;if(!r)throw Error(E(169));n?(t=op(t,e,Rn),r.__reactInternalMemoizedMergedChildContext=t,X(be),X(Ie),K(Ie,t)):X(be),K(be,n)}var It=null,ko=!1,yl=!1;function lp(t){It===null?It=[t]:It.push(t)}function yv(t){ko=!0,lp(t)}function fn(){if(!yl&&It!==null){yl=!0;var t=0,e=W;try{var n=It;for(W=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}It=null,ko=!1}catch(i){throw It!==null&&(It=It.slice(t+1)),Af(du,fn),i}finally{W=e,yl=!1}}return null}var er=[],tr=0,Hs=null,$s=0,Ye=[],qe=0,Dn=null,Tt=1,kt="";function yn(t,e){er[tr++]=$s,er[tr++]=Hs,Hs=t,$s=e}function ap(t,e,n){Ye[qe++]=Tt,Ye[qe++]=kt,Ye[qe++]=Dn,Dn=t;var r=Tt;t=kt;var i=32-ut(r)-1;r&=~(1<<i),n+=1;var s=32-ut(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Tt=1<<32-ut(e)+i|n<<i|r,kt=s+t}else Tt=1<<s|n<<i|r,kt=t}function wu(t){t.return!==null&&(yn(t,1),ap(t,1,0))}function Cu(t){for(;t===Hs;)Hs=er[--tr],er[tr]=null,$s=er[--tr],er[tr]=null;for(;t===Dn;)Dn=Ye[--qe],Ye[qe]=null,kt=Ye[--qe],Ye[qe]=null,Tt=Ye[--qe],Ye[qe]=null}var Be=null,We=null,J=!1,st=null;function up(t,e){var n=Xe(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function _d(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Be=t,We=Yt(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Be=t,We=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Dn!==null?{id:Tt,overflow:kt}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Xe(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Be=t,We=null,!0):!1;default:return!1}}function ma(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ga(t){if(J){var e=We;if(e){var n=e;if(!_d(t,e)){if(ma(t))throw Error(E(418));e=Yt(n.nextSibling);var r=Be;e&&_d(t,e)?up(r,n):(t.flags=t.flags&-4097|2,J=!1,Be=t)}}else{if(ma(t))throw Error(E(418));t.flags=t.flags&-4097|2,J=!1,Be=t}}}function vd(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Be=t}function us(t){if(t!==Be)return!1;if(!J)return vd(t),J=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!da(t.type,t.memoizedProps)),e&&(e=We)){if(ma(t))throw cp(),Error(E(418));for(;e;)up(t,e),e=Yt(e.nextSibling)}if(vd(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(E(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){We=Yt(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}We=null}}else We=Be?Yt(t.stateNode.nextSibling):null;return!0}function cp(){for(var t=We;t;)t=Yt(t.nextSibling)}function _r(){We=Be=null,J=!1}function Eu(t){st===null?st=[t]:st.push(t)}var _v=Ft.ReactCurrentBatchConfig;function rt(t,e){if(t&&t.defaultProps){e=ne({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var Ws=hn(null),Bs=null,nr=null,Su=null;function xu(){Su=nr=Bs=null}function Iu(t){var e=Ws.current;X(Ws),t._currentValue=e}function ya(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function cr(t,e){Bs=t,Su=nr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Le=!0),t.firstContext=null)}function Ze(t){var e=t._currentValue;if(Su!==t)if(t={context:t,memoizedValue:e,next:null},nr===null){if(Bs===null)throw Error(E(308));nr=t,Bs.dependencies={lanes:0,firstContext:t}}else nr=nr.next=t;return e}var En=null;function Tu(t){En===null?En=[t]:En.push(t)}function dp(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Tu(e)):(n.next=i.next,i.next=n),e.interleaved=n,Ot(t,r)}function Ot(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ht=!1;function ku(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function hp(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Pt(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function qt(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,H&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Ot(t,n)}return i=r.interleaved,i===null?(e.next=e,Tu(r)):(e.next=i.next,i.next=e),r.interleaved=e,Ot(t,n)}function Es(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,hu(t,n)}}function wd(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Vs(t,e,n,r){var i=t.updateQueue;Ht=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var a=l,u=a.next;a.next=null,o===null?s=u:o.next=u,o=a;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=a))}if(s!==null){var c=i.baseState;o=0,d=u=a=null,l=s;do{var h=l.lane,g=l.eventTime;if((r&h)===h){d!==null&&(d=d.next={eventTime:g,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var _=t,v=l;switch(h=e,g=n,v.tag){case 1:if(_=v.payload,typeof _=="function"){c=_.call(g,c,h);break e}c=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=v.payload,h=typeof _=="function"?_.call(g,c,h):_,h==null)break e;c=ne({},c,h);break e;case 2:Ht=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[l]:h.push(l))}else g={eventTime:g,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=g,a=c):d=d.next=g,o|=h;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;h=l,l=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(d===null&&(a=c),i.baseState=a,i.firstBaseUpdate=u,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);On|=o,t.lanes=o,t.memoizedState=c}}function Cd(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(E(191,i));i.call(r)}}}var fp=new df.Component().refs;function _a(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ne({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var No={isMounted:function(t){return(t=t._reactInternals)?$n(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ne(),i=Jt(t),s=Pt(r,i);s.payload=e,n!=null&&(s.callback=n),e=qt(t,s,i),e!==null&&(ct(e,t,i,r),Es(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ne(),i=Jt(t),s=Pt(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=qt(t,s,i),e!==null&&(ct(e,t,i,r),Es(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ne(),r=Jt(t),i=Pt(n,r);i.tag=2,e!=null&&(i.callback=e),e=qt(t,i,r),e!==null&&(ct(e,t,r,n),Es(e,t,r))}};function Ed(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!vi(n,r)||!vi(i,s):!0}function pp(t,e,n){var r=!1,i=on,s=e.contextType;return typeof s=="object"&&s!==null?s=Ze(s):(i=Fe(e)?Rn:Ie.current,r=e.contextTypes,s=(r=r!=null)?yr(t,i):on),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=No,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Sd(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&No.enqueueReplaceState(e,e.state,null)}function va(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=fp,ku(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Ze(s):(s=Fe(e)?Rn:Ie.current,i.context=yr(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(_a(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&No.enqueueReplaceState(i,i.state,null),Vs(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Hr(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(E(309));var r=n.stateNode}if(!r)throw Error(E(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=i.refs;l===fp&&(l=i.refs={}),o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(E(284));if(!n._owner)throw Error(E(290,t))}return t}function cs(t,e){throw t=Object.prototype.toString.call(e),Error(E(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function xd(t){var e=t._init;return e(t._payload)}function mp(t){function e(p,f){if(t){var m=p.deletions;m===null?(p.deletions=[f],p.flags|=16):m.push(f)}}function n(p,f){if(!t)return null;for(;f!==null;)e(p,f),f=f.sibling;return null}function r(p,f){for(p=new Map;f!==null;)f.key!==null?p.set(f.key,f):p.set(f.index,f),f=f.sibling;return p}function i(p,f){return p=Zt(p,f),p.index=0,p.sibling=null,p}function s(p,f,m){return p.index=m,t?(m=p.alternate,m!==null?(m=m.index,m<f?(p.flags|=2,f):m):(p.flags|=2,f)):(p.flags|=1048576,f)}function o(p){return t&&p.alternate===null&&(p.flags|=2),p}function l(p,f,m,w){return f===null||f.tag!==6?(f=xl(m,p.mode,w),f.return=p,f):(f=i(f,m),f.return=p,f)}function a(p,f,m,w){var x=m.type;return x===Kn?d(p,f,m.props.children,w,m.key):f!==null&&(f.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===Ut&&xd(x)===f.type)?(w=i(f,m.props),w.ref=Hr(p,f,m),w.return=p,w):(w=Ns(m.type,m.key,m.props,null,p.mode,w),w.ref=Hr(p,f,m),w.return=p,w)}function u(p,f,m,w){return f===null||f.tag!==4||f.stateNode.containerInfo!==m.containerInfo||f.stateNode.implementation!==m.implementation?(f=Il(m,p.mode,w),f.return=p,f):(f=i(f,m.children||[]),f.return=p,f)}function d(p,f,m,w,x){return f===null||f.tag!==7?(f=Nn(m,p.mode,w,x),f.return=p,f):(f=i(f,m),f.return=p,f)}function c(p,f,m){if(typeof f=="string"&&f!==""||typeof f=="number")return f=xl(""+f,p.mode,m),f.return=p,f;if(typeof f=="object"&&f!==null){switch(f.$$typeof){case Zi:return m=Ns(f.type,f.key,f.props,null,p.mode,m),m.ref=Hr(p,null,f),m.return=p,m;case Qn:return f=Il(f,p.mode,m),f.return=p,f;case Ut:var w=f._init;return c(p,w(f._payload),m)}if(Yr(f)||br(f))return f=Nn(f,p.mode,m,null),f.return=p,f;cs(p,f)}return null}function h(p,f,m,w){var x=f!==null?f.key:null;if(typeof m=="string"&&m!==""||typeof m=="number")return x!==null?null:l(p,f,""+m,w);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Zi:return m.key===x?a(p,f,m,w):null;case Qn:return m.key===x?u(p,f,m,w):null;case Ut:return x=m._init,h(p,f,x(m._payload),w)}if(Yr(m)||br(m))return x!==null?null:d(p,f,m,w,null);cs(p,m)}return null}function g(p,f,m,w,x){if(typeof w=="string"&&w!==""||typeof w=="number")return p=p.get(m)||null,l(f,p,""+w,x);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Zi:return p=p.get(w.key===null?m:w.key)||null,a(f,p,w,x);case Qn:return p=p.get(w.key===null?m:w.key)||null,u(f,p,w,x);case Ut:var P=w._init;return g(p,f,m,P(w._payload),x)}if(Yr(w)||br(w))return p=p.get(m)||null,d(f,p,w,x,null);cs(f,w)}return null}function _(p,f,m,w){for(var x=null,P=null,N=f,D=f=0,V=null;N!==null&&D<m.length;D++){N.index>D?(V=N,N=null):V=N.sibling;var b=h(p,N,m[D],w);if(b===null){N===null&&(N=V);break}t&&N&&b.alternate===null&&e(p,N),f=s(b,f,D),P===null?x=b:P.sibling=b,P=b,N=V}if(D===m.length)return n(p,N),J&&yn(p,D),x;if(N===null){for(;D<m.length;D++)N=c(p,m[D],w),N!==null&&(f=s(N,f,D),P===null?x=N:P.sibling=N,P=N);return J&&yn(p,D),x}for(N=r(p,N);D<m.length;D++)V=g(N,p,D,m[D],w),V!==null&&(t&&V.alternate!==null&&N.delete(V.key===null?D:V.key),f=s(V,f,D),P===null?x=V:P.sibling=V,P=V);return t&&N.forEach(function(A){return e(p,A)}),J&&yn(p,D),x}function v(p,f,m,w){var x=br(m);if(typeof x!="function")throw Error(E(150));if(m=x.call(m),m==null)throw Error(E(151));for(var P=x=null,N=f,D=f=0,V=null,b=m.next();N!==null&&!b.done;D++,b=m.next()){N.index>D?(V=N,N=null):V=N.sibling;var A=h(p,N,b.value,w);if(A===null){N===null&&(N=V);break}t&&N&&A.alternate===null&&e(p,N),f=s(A,f,D),P===null?x=A:P.sibling=A,P=A,N=V}if(b.done)return n(p,N),J&&yn(p,D),x;if(N===null){for(;!b.done;D++,b=m.next())b=c(p,b.value,w),b!==null&&(f=s(b,f,D),P===null?x=b:P.sibling=b,P=b);return J&&yn(p,D),x}for(N=r(p,N);!b.done;D++,b=m.next())b=g(N,p,D,b.value,w),b!==null&&(t&&b.alternate!==null&&N.delete(b.key===null?D:b.key),f=s(b,f,D),P===null?x=b:P.sibling=b,P=b);return t&&N.forEach(function(de){return e(p,de)}),J&&yn(p,D),x}function k(p,f,m,w){if(typeof m=="object"&&m!==null&&m.type===Kn&&m.key===null&&(m=m.props.children),typeof m=="object"&&m!==null){switch(m.$$typeof){case Zi:e:{for(var x=m.key,P=f;P!==null;){if(P.key===x){if(x=m.type,x===Kn){if(P.tag===7){n(p,P.sibling),f=i(P,m.props.children),f.return=p,p=f;break e}}else if(P.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===Ut&&xd(x)===P.type){n(p,P.sibling),f=i(P,m.props),f.ref=Hr(p,P,m),f.return=p,p=f;break e}n(p,P);break}else e(p,P);P=P.sibling}m.type===Kn?(f=Nn(m.props.children,p.mode,w,m.key),f.return=p,p=f):(w=Ns(m.type,m.key,m.props,null,p.mode,w),w.ref=Hr(p,f,m),w.return=p,p=w)}return o(p);case Qn:e:{for(P=m.key;f!==null;){if(f.key===P)if(f.tag===4&&f.stateNode.containerInfo===m.containerInfo&&f.stateNode.implementation===m.implementation){n(p,f.sibling),f=i(f,m.children||[]),f.return=p,p=f;break e}else{n(p,f);break}else e(p,f);f=f.sibling}f=Il(m,p.mode,w),f.return=p,p=f}return o(p);case Ut:return P=m._init,k(p,f,P(m._payload),w)}if(Yr(m))return _(p,f,m,w);if(br(m))return v(p,f,m,w);cs(p,m)}return typeof m=="string"&&m!==""||typeof m=="number"?(m=""+m,f!==null&&f.tag===6?(n(p,f.sibling),f=i(f,m),f.return=p,p=f):(n(p,f),f=xl(m,p.mode,w),f.return=p,p=f),o(p)):n(p,f)}return k}var vr=mp(!0),gp=mp(!1),$i={},_t=hn($i),Si=hn($i),xi=hn($i);function Sn(t){if(t===$i)throw Error(E(174));return t}function Nu(t,e){switch(K(xi,e),K(Si,t),K(_t,$i),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Xl(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Xl(e,t)}X(_t),K(_t,e)}function wr(){X(_t),X(Si),X(xi)}function yp(t){Sn(xi.current);var e=Sn(_t.current),n=Xl(e,t.type);e!==n&&(K(Si,t),K(_t,n))}function Pu(t){Si.current===t&&(X(_t),X(Si))}var ee=hn(0);function Gs(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var _l=[];function Ru(){for(var t=0;t<_l.length;t++)_l[t]._workInProgressVersionPrimary=null;_l.length=0}var Ss=Ft.ReactCurrentDispatcher,vl=Ft.ReactCurrentBatchConfig,An=0,te=null,le=null,pe=null,Qs=!1,ri=!1,Ii=0,vv=0;function Ce(){throw Error(E(321))}function Du(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ht(t[n],e[n]))return!1;return!0}function Au(t,e,n,r,i,s){if(An=s,te=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ss.current=t===null||t.memoizedState===null?Sv:xv,t=n(r,i),ri){s=0;do{if(ri=!1,Ii=0,25<=s)throw Error(E(301));s+=1,pe=le=null,e.updateQueue=null,Ss.current=Iv,t=n(r,i)}while(ri)}if(Ss.current=Ks,e=le!==null&&le.next!==null,An=0,pe=le=te=null,Qs=!1,e)throw Error(E(300));return t}function Ou(){var t=Ii!==0;return Ii=0,t}function mt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pe===null?te.memoizedState=pe=t:pe=pe.next=t,pe}function et(){if(le===null){var t=te.alternate;t=t!==null?t.memoizedState:null}else t=le.next;var e=pe===null?te.memoizedState:pe.next;if(e!==null)pe=e,le=t;else{if(t===null)throw Error(E(310));le=t,t={memoizedState:le.memoizedState,baseState:le.baseState,baseQueue:le.baseQueue,queue:le.queue,next:null},pe===null?te.memoizedState=pe=t:pe=pe.next=t}return pe}function Ti(t,e){return typeof e=="function"?e(t):e}function wl(t){var e=et(),n=e.queue;if(n===null)throw Error(E(311));n.lastRenderedReducer=t;var r=le,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=o=null,a=null,u=s;do{var d=u.lane;if((An&d)===d)a!==null&&(a=a.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var c={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};a===null?(l=a=c,o=r):a=a.next=c,te.lanes|=d,On|=d}u=u.next}while(u!==null&&u!==s);a===null?o=r:a.next=l,ht(r,e.memoizedState)||(Le=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=a,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,te.lanes|=s,On|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Cl(t){var e=et(),n=e.queue;if(n===null)throw Error(E(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);ht(s,e.memoizedState)||(Le=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function _p(){}function vp(t,e){var n=te,r=et(),i=e(),s=!ht(r.memoizedState,i);if(s&&(r.memoizedState=i,Le=!0),r=r.queue,Lu(Ep.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||pe!==null&&pe.memoizedState.tag&1){if(n.flags|=2048,ki(9,Cp.bind(null,n,r,i,e),void 0,null),ye===null)throw Error(E(349));An&30||wp(n,e,i)}return i}function wp(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=te.updateQueue,e===null?(e={lastEffect:null,stores:null},te.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Cp(t,e,n,r){e.value=n,e.getSnapshot=r,Sp(e)&&xp(t)}function Ep(t,e,n){return n(function(){Sp(e)&&xp(t)})}function Sp(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ht(t,n)}catch{return!0}}function xp(t){var e=Ot(t,1);e!==null&&ct(e,t,1,-1)}function Id(t){var e=mt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ti,lastRenderedState:t},e.queue=t,t=t.dispatch=Ev.bind(null,te,t),[e.memoizedState,t]}function ki(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=te.updateQueue,e===null?(e={lastEffect:null,stores:null},te.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Ip(){return et().memoizedState}function xs(t,e,n,r){var i=mt();te.flags|=t,i.memoizedState=ki(1|e,n,void 0,r===void 0?null:r)}function Po(t,e,n,r){var i=et();r=r===void 0?null:r;var s=void 0;if(le!==null){var o=le.memoizedState;if(s=o.destroy,r!==null&&Du(r,o.deps)){i.memoizedState=ki(e,n,s,r);return}}te.flags|=t,i.memoizedState=ki(1|e,n,s,r)}function Td(t,e){return xs(8390656,8,t,e)}function Lu(t,e){return Po(2048,8,t,e)}function Tp(t,e){return Po(4,2,t,e)}function kp(t,e){return Po(4,4,t,e)}function Np(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Pp(t,e,n){return n=n!=null?n.concat([t]):null,Po(4,4,Np.bind(null,e,t),n)}function Mu(){}function Rp(t,e){var n=et();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Du(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Dp(t,e){var n=et();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Du(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Ap(t,e,n){return An&21?(ht(n,e)||(n=Mf(),te.lanes|=n,On|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Le=!0),t.memoizedState=n)}function wv(t,e){var n=W;W=n!==0&&4>n?n:4,t(!0);var r=vl.transition;vl.transition={};try{t(!1),e()}finally{W=n,vl.transition=r}}function Op(){return et().memoizedState}function Cv(t,e,n){var r=Jt(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Lp(t))Mp(e,n);else if(n=dp(t,e,n,r),n!==null){var i=Ne();ct(n,t,r,i),bp(n,e,r)}}function Ev(t,e,n){var r=Jt(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Lp(t))Mp(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,n);if(i.hasEagerState=!0,i.eagerState=l,ht(l,o)){var a=e.interleaved;a===null?(i.next=i,Tu(e)):(i.next=a.next,a.next=i),e.interleaved=i;return}}catch{}finally{}n=dp(t,e,i,r),n!==null&&(i=Ne(),ct(n,t,r,i),bp(n,e,r))}}function Lp(t){var e=t.alternate;return t===te||e!==null&&e===te}function Mp(t,e){ri=Qs=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function bp(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,hu(t,n)}}var Ks={readContext:Ze,useCallback:Ce,useContext:Ce,useEffect:Ce,useImperativeHandle:Ce,useInsertionEffect:Ce,useLayoutEffect:Ce,useMemo:Ce,useReducer:Ce,useRef:Ce,useState:Ce,useDebugValue:Ce,useDeferredValue:Ce,useTransition:Ce,useMutableSource:Ce,useSyncExternalStore:Ce,useId:Ce,unstable_isNewReconciler:!1},Sv={readContext:Ze,useCallback:function(t,e){return mt().memoizedState=[t,e===void 0?null:e],t},useContext:Ze,useEffect:Td,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,xs(4194308,4,Np.bind(null,e,t),n)},useLayoutEffect:function(t,e){return xs(4194308,4,t,e)},useInsertionEffect:function(t,e){return xs(4,2,t,e)},useMemo:function(t,e){var n=mt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=mt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Cv.bind(null,te,t),[r.memoizedState,t]},useRef:function(t){var e=mt();return t={current:t},e.memoizedState=t},useState:Id,useDebugValue:Mu,useDeferredValue:function(t){return mt().memoizedState=t},useTransition:function(){var t=Id(!1),e=t[0];return t=wv.bind(null,t[1]),mt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=te,i=mt();if(J){if(n===void 0)throw Error(E(407));n=n()}else{if(n=e(),ye===null)throw Error(E(349));An&30||wp(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Td(Ep.bind(null,r,s,t),[t]),r.flags|=2048,ki(9,Cp.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=mt(),e=ye.identifierPrefix;if(J){var n=kt,r=Tt;n=(r&~(1<<32-ut(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ii++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=vv++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},xv={readContext:Ze,useCallback:Rp,useContext:Ze,useEffect:Lu,useImperativeHandle:Pp,useInsertionEffect:Tp,useLayoutEffect:kp,useMemo:Dp,useReducer:wl,useRef:Ip,useState:function(){return wl(Ti)},useDebugValue:Mu,useDeferredValue:function(t){var e=et();return Ap(e,le.memoizedState,t)},useTransition:function(){var t=wl(Ti)[0],e=et().memoizedState;return[t,e]},useMutableSource:_p,useSyncExternalStore:vp,useId:Op,unstable_isNewReconciler:!1},Iv={readContext:Ze,useCallback:Rp,useContext:Ze,useEffect:Lu,useImperativeHandle:Pp,useInsertionEffect:Tp,useLayoutEffect:kp,useMemo:Dp,useReducer:Cl,useRef:Ip,useState:function(){return Cl(Ti)},useDebugValue:Mu,useDeferredValue:function(t){var e=et();return le===null?e.memoizedState=t:Ap(e,le.memoizedState,t)},useTransition:function(){var t=Cl(Ti)[0],e=et().memoizedState;return[t,e]},useMutableSource:_p,useSyncExternalStore:vp,useId:Op,unstable_isNewReconciler:!1};function Cr(t,e){try{var n="",r=e;do n+=Zy(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function El(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function wa(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Tv=typeof WeakMap=="function"?WeakMap:Map;function Fp(t,e,n){n=Pt(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){qs||(qs=!0,Ra=r),wa(t,e)},n}function jp(t,e,n){n=Pt(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){wa(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){wa(t,e),typeof r!="function"&&(Xt===null?Xt=new Set([this]):Xt.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function kd(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Tv;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Uv.bind(null,t,e,n),e.then(t,t))}function Nd(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Pd(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Pt(-1,1),e.tag=2,qt(n,e,1))),n.lanes|=1),t)}var kv=Ft.ReactCurrentOwner,Le=!1;function Te(t,e,n,r){e.child=t===null?gp(e,null,n,r):vr(e,t.child,n,r)}function Rd(t,e,n,r,i){n=n.render;var s=e.ref;return cr(e,i),r=Au(t,e,n,r,s,i),n=Ou(),t!==null&&!Le?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Lt(t,e,i)):(J&&n&&wu(e),e.flags|=1,Te(t,e,r,i),e.child)}function Dd(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Wu(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,zp(t,e,s,r,i)):(t=Ns(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:vi,n(o,r)&&t.ref===e.ref)return Lt(t,e,i)}return e.flags|=1,t=Zt(s,r),t.ref=e.ref,t.return=e,e.child=t}function zp(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(vi(s,r)&&t.ref===e.ref)if(Le=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Le=!0);else return e.lanes=t.lanes,Lt(t,e,i)}return Ca(t,e,n,r,i)}function Up(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},K(ir,$e),$e|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,K(ir,$e),$e|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,K(ir,$e),$e|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,K(ir,$e),$e|=r;return Te(t,e,i,n),e.child}function Hp(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ca(t,e,n,r,i){var s=Fe(n)?Rn:Ie.current;return s=yr(e,s),cr(e,i),n=Au(t,e,n,r,s,i),r=Ou(),t!==null&&!Le?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Lt(t,e,i)):(J&&r&&wu(e),e.flags|=1,Te(t,e,n,i),e.child)}function Ad(t,e,n,r,i){if(Fe(n)){var s=!0;Us(e)}else s=!1;if(cr(e,i),e.stateNode===null)Is(t,e),pp(e,n,r),va(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var a=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Ze(u):(u=Fe(n)?Rn:Ie.current,u=yr(e,u));var d=n.getDerivedStateFromProps,c=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";c||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||a!==u)&&Sd(e,o,r,u),Ht=!1;var h=e.memoizedState;o.state=h,Vs(e,r,o,i),a=e.memoizedState,l!==r||h!==a||be.current||Ht?(typeof d=="function"&&(_a(e,n,d,r),a=e.memoizedState),(l=Ht||Ed(e,n,l,r,h,a,u))?(c||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=a),o.props=r,o.state=a,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,hp(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:rt(e.type,l),o.props=u,c=e.pendingProps,h=o.context,a=n.contextType,typeof a=="object"&&a!==null?a=Ze(a):(a=Fe(n)?Rn:Ie.current,a=yr(e,a));var g=n.getDerivedStateFromProps;(d=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==c||h!==a)&&Sd(e,o,r,a),Ht=!1,h=e.memoizedState,o.state=h,Vs(e,r,o,i);var _=e.memoizedState;l!==c||h!==_||be.current||Ht?(typeof g=="function"&&(_a(e,n,g,r),_=e.memoizedState),(u=Ht||Ed(e,n,u,r,h,_,a)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,_,a),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,_,a)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=_),o.props=r,o.state=_,o.context=a,r=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return Ea(t,e,n,r,s,i)}function Ea(t,e,n,r,i,s){Hp(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&yd(e,n,!1),Lt(t,e,s);r=e.stateNode,kv.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=vr(e,t.child,null,s),e.child=vr(e,null,l,s)):Te(t,e,l,s),e.memoizedState=r.state,i&&yd(e,n,!0),e.child}function $p(t){var e=t.stateNode;e.pendingContext?gd(t,e.pendingContext,e.pendingContext!==e.context):e.context&&gd(t,e.context,!1),Nu(t,e.containerInfo)}function Od(t,e,n,r,i){return _r(),Eu(i),e.flags|=256,Te(t,e,n,r),e.child}var Sa={dehydrated:null,treeContext:null,retryLane:0};function xa(t){return{baseLanes:t,cachePool:null,transitions:null}}function Wp(t,e,n){var r=e.pendingProps,i=ee.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),K(ee,i&1),t===null)return ga(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Ao(o,r,0,null),t=Nn(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=xa(n),e.memoizedState=Sa,t):bu(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return Nv(t,e,o,r,l,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,l=i.sibling;var a={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=a,e.deletions=null):(r=Zt(i,a),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=Zt(l,s):(s=Nn(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?xa(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Sa,r}return s=t.child,t=s.sibling,r=Zt(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function bu(t,e){return e=Ao({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ds(t,e,n,r){return r!==null&&Eu(r),vr(e,t.child,null,n),t=bu(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Nv(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=El(Error(E(422))),ds(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Ao({mode:"visible",children:r.children},i,0,null),s=Nn(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&vr(e,t.child,null,o),e.child.memoizedState=xa(o),e.memoizedState=Sa,s);if(!(e.mode&1))return ds(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(E(419)),r=El(s,r,void 0),ds(t,e,o,r)}if(l=(o&t.childLanes)!==0,Le||l){if(r=ye,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Ot(t,i),ct(r,t,i,-1))}return $u(),r=El(Error(E(421))),ds(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Hv.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,We=Yt(i.nextSibling),Be=e,J=!0,st=null,t!==null&&(Ye[qe++]=Tt,Ye[qe++]=kt,Ye[qe++]=Dn,Tt=t.id,kt=t.overflow,Dn=e),e=bu(e,r.children),e.flags|=4096,e)}function Ld(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),ya(t.return,e,n)}function Sl(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Bp(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Te(t,e,r.children,n),r=ee.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ld(t,n,e);else if(t.tag===19)Ld(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(K(ee,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Gs(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Sl(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Gs(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Sl(e,!0,n,null,s);break;case"together":Sl(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Is(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Lt(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),On|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(E(153));if(e.child!==null){for(t=e.child,n=Zt(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Zt(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Pv(t,e,n){switch(e.tag){case 3:$p(e),_r();break;case 5:yp(e);break;case 1:Fe(e.type)&&Us(e);break;case 4:Nu(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;K(Ws,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(K(ee,ee.current&1),e.flags|=128,null):n&e.child.childLanes?Wp(t,e,n):(K(ee,ee.current&1),t=Lt(t,e,n),t!==null?t.sibling:null);K(ee,ee.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Bp(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),K(ee,ee.current),r)break;return null;case 22:case 23:return e.lanes=0,Up(t,e,n)}return Lt(t,e,n)}var Vp,Ia,Gp,Qp;Vp=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ia=function(){};Gp=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Sn(_t.current);var s=null;switch(n){case"input":i=Ql(t,i),r=Ql(t,r),s=[];break;case"select":i=ne({},i,{value:void 0}),r=ne({},r,{value:void 0}),s=[];break;case"textarea":i=ql(t,i),r=ql(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=js)}Jl(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(hi.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var a=r[u];if(l=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&a!==l&&(a!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||a&&a.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in a)a.hasOwnProperty(o)&&l[o]!==a[o]&&(n||(n={}),n[o]=a[o])}else n||(s||(s=[]),s.push(u,n)),n=a;else u==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(s=s||[]).push(u,a)):u==="children"?typeof a!="string"&&typeof a!="number"||(s=s||[]).push(u,""+a):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(hi.hasOwnProperty(u)?(a!=null&&u==="onScroll"&&Y("scroll",t),s||l===a||(s=[])):(s=s||[]).push(u,a))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};Qp=function(t,e,n,r){n!==r&&(e.flags|=4)};function $r(t,e){if(!J)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ee(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Rv(t,e,n){var r=e.pendingProps;switch(Cu(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ee(e),null;case 1:return Fe(e.type)&&zs(),Ee(e),null;case 3:return r=e.stateNode,wr(),X(be),X(Ie),Ru(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(us(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,st!==null&&(Oa(st),st=null))),Ia(t,e),Ee(e),null;case 5:Pu(e);var i=Sn(xi.current);if(n=e.type,t!==null&&e.stateNode!=null)Gp(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(E(166));return Ee(e),null}if(t=Sn(_t.current),us(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[gt]=e,r[Ei]=s,t=(e.mode&1)!==0,n){case"dialog":Y("cancel",r),Y("close",r);break;case"iframe":case"object":case"embed":Y("load",r);break;case"video":case"audio":for(i=0;i<Xr.length;i++)Y(Xr[i],r);break;case"source":Y("error",r);break;case"img":case"image":case"link":Y("error",r),Y("load",r);break;case"details":Y("toggle",r);break;case"input":Wc(r,s),Y("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Y("invalid",r);break;case"textarea":Vc(r,s),Y("invalid",r)}Jl(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&as(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&as(r.textContent,l,t),i=["children",""+l]):hi.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Y("scroll",r)}switch(n){case"input":es(r),Bc(r,s,!0);break;case"textarea":es(r),Gc(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=js)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=wf(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[gt]=e,t[Ei]=r,Vp(t,e,!1,!1),e.stateNode=t;e:{switch(o=Zl(n,r),n){case"dialog":Y("cancel",t),Y("close",t),i=r;break;case"iframe":case"object":case"embed":Y("load",t),i=r;break;case"video":case"audio":for(i=0;i<Xr.length;i++)Y(Xr[i],t);i=r;break;case"source":Y("error",t),i=r;break;case"img":case"image":case"link":Y("error",t),Y("load",t),i=r;break;case"details":Y("toggle",t),i=r;break;case"input":Wc(t,r),i=Ql(t,r),Y("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=ne({},r,{value:void 0}),Y("invalid",t);break;case"textarea":Vc(t,r),i=ql(t,r),Y("invalid",t);break;default:i=r}Jl(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var a=l[s];s==="style"?Sf(t,a):s==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&Cf(t,a)):s==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&fi(t,a):typeof a=="number"&&fi(t,""+a):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(hi.hasOwnProperty(s)?a!=null&&s==="onScroll"&&Y("scroll",t):a!=null&&ou(t,s,a,o))}switch(n){case"input":es(t),Bc(t,r,!1);break;case"textarea":es(t),Gc(t);break;case"option":r.value!=null&&t.setAttribute("value",""+sn(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?or(t,!!r.multiple,s,!1):r.defaultValue!=null&&or(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=js)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ee(e),null;case 6:if(t&&e.stateNode!=null)Qp(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(E(166));if(n=Sn(xi.current),Sn(_t.current),us(e)){if(r=e.stateNode,n=e.memoizedProps,r[gt]=e,(s=r.nodeValue!==n)&&(t=Be,t!==null))switch(t.tag){case 3:as(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&as(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[gt]=e,e.stateNode=r}return Ee(e),null;case 13:if(X(ee),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(J&&We!==null&&e.mode&1&&!(e.flags&128))cp(),_r(),e.flags|=98560,s=!1;else if(s=us(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(E(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(E(317));s[gt]=e}else _r(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ee(e),s=!1}else st!==null&&(Oa(st),st=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ee.current&1?ce===0&&(ce=3):$u())),e.updateQueue!==null&&(e.flags|=4),Ee(e),null);case 4:return wr(),Ia(t,e),t===null&&wi(e.stateNode.containerInfo),Ee(e),null;case 10:return Iu(e.type._context),Ee(e),null;case 17:return Fe(e.type)&&zs(),Ee(e),null;case 19:if(X(ee),s=e.memoizedState,s===null)return Ee(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)$r(s,!1);else{if(ce!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Gs(t),o!==null){for(e.flags|=128,$r(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return K(ee,ee.current&1|2),e.child}t=t.sibling}s.tail!==null&&se()>Er&&(e.flags|=128,r=!0,$r(s,!1),e.lanes=4194304)}else{if(!r)if(t=Gs(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),$r(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!J)return Ee(e),null}else 2*se()-s.renderingStartTime>Er&&n!==1073741824&&(e.flags|=128,r=!0,$r(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=se(),e.sibling=null,n=ee.current,K(ee,r?n&1|2:n&1),e):(Ee(e),null);case 22:case 23:return Hu(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?$e&1073741824&&(Ee(e),e.subtreeFlags&6&&(e.flags|=8192)):Ee(e),null;case 24:return null;case 25:return null}throw Error(E(156,e.tag))}function Dv(t,e){switch(Cu(e),e.tag){case 1:return Fe(e.type)&&zs(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return wr(),X(be),X(Ie),Ru(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Pu(e),null;case 13:if(X(ee),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(E(340));_r()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return X(ee),null;case 4:return wr(),null;case 10:return Iu(e.type._context),null;case 22:case 23:return Hu(),null;case 24:return null;default:return null}}var hs=!1,Se=!1,Av=typeof WeakSet=="function"?WeakSet:Set,T=null;function rr(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){re(t,e,r)}else n.current=null}function Ta(t,e,n){try{n()}catch(r){re(t,e,r)}}var Md=!1;function Ov(t,e){if(ua=Ms,t=Xf(),vu(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,a=-1,u=0,d=0,c=t,h=null;t:for(;;){for(var g;c!==n||i!==0&&c.nodeType!==3||(l=o+i),c!==s||r!==0&&c.nodeType!==3||(a=o+r),c.nodeType===3&&(o+=c.nodeValue.length),(g=c.firstChild)!==null;)h=c,c=g;for(;;){if(c===t)break t;if(h===n&&++u===i&&(l=o),h===s&&++d===r&&(a=o),(g=c.nextSibling)!==null)break;c=h,h=c.parentNode}c=g}n=l===-1||a===-1?null:{start:l,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(ca={focusedElem:t,selectionRange:n},Ms=!1,T=e;T!==null;)if(e=T,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,T=t;else for(;T!==null;){e=T;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var v=_.memoizedProps,k=_.memoizedState,p=e.stateNode,f=p.getSnapshotBeforeUpdate(e.elementType===e.type?v:rt(e.type,v),k);p.__reactInternalSnapshotBeforeUpdate=f}break;case 3:var m=e.stateNode.containerInfo;m.nodeType===1?m.textContent="":m.nodeType===9&&m.documentElement&&m.removeChild(m.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(E(163))}}catch(w){re(e,e.return,w)}if(t=e.sibling,t!==null){t.return=e.return,T=t;break}T=e.return}return _=Md,Md=!1,_}function ii(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Ta(e,n,s)}i=i.next}while(i!==r)}}function Ro(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function ka(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Kp(t){var e=t.alternate;e!==null&&(t.alternate=null,Kp(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[gt],delete e[Ei],delete e[fa],delete e[mv],delete e[gv])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Yp(t){return t.tag===5||t.tag===3||t.tag===4}function bd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Yp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Na(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=js));else if(r!==4&&(t=t.child,t!==null))for(Na(t,e,n),t=t.sibling;t!==null;)Na(t,e,n),t=t.sibling}function Pa(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Pa(t,e,n),t=t.sibling;t!==null;)Pa(t,e,n),t=t.sibling}var _e=null,it=!1;function zt(t,e,n){for(n=n.child;n!==null;)qp(t,e,n),n=n.sibling}function qp(t,e,n){if(yt&&typeof yt.onCommitFiberUnmount=="function")try{yt.onCommitFiberUnmount(Eo,n)}catch{}switch(n.tag){case 5:Se||rr(n,e);case 6:var r=_e,i=it;_e=null,zt(t,e,n),_e=r,it=i,_e!==null&&(it?(t=_e,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):_e.removeChild(n.stateNode));break;case 18:_e!==null&&(it?(t=_e,n=n.stateNode,t.nodeType===8?gl(t.parentNode,n):t.nodeType===1&&gl(t,n),yi(t)):gl(_e,n.stateNode));break;case 4:r=_e,i=it,_e=n.stateNode.containerInfo,it=!0,zt(t,e,n),_e=r,it=i;break;case 0:case 11:case 14:case 15:if(!Se&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Ta(n,e,o),i=i.next}while(i!==r)}zt(t,e,n);break;case 1:if(!Se&&(rr(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){re(n,e,l)}zt(t,e,n);break;case 21:zt(t,e,n);break;case 22:n.mode&1?(Se=(r=Se)||n.memoizedState!==null,zt(t,e,n),Se=r):zt(t,e,n);break;default:zt(t,e,n)}}function Fd(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Av),e.forEach(function(r){var i=$v.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function nt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:_e=l.stateNode,it=!1;break e;case 3:_e=l.stateNode.containerInfo,it=!0;break e;case 4:_e=l.stateNode.containerInfo,it=!0;break e}l=l.return}if(_e===null)throw Error(E(160));qp(s,o,i),_e=null,it=!1;var a=i.alternate;a!==null&&(a.return=null),i.return=null}catch(u){re(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Xp(e,t),e=e.sibling}function Xp(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(nt(e,t),pt(t),r&4){try{ii(3,t,t.return),Ro(3,t)}catch(v){re(t,t.return,v)}try{ii(5,t,t.return)}catch(v){re(t,t.return,v)}}break;case 1:nt(e,t),pt(t),r&512&&n!==null&&rr(n,n.return);break;case 5:if(nt(e,t),pt(t),r&512&&n!==null&&rr(n,n.return),t.flags&32){var i=t.stateNode;try{fi(i,"")}catch(v){re(t,t.return,v)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,l=t.type,a=t.updateQueue;if(t.updateQueue=null,a!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&_f(i,s),Zl(l,o);var u=Zl(l,s);for(o=0;o<a.length;o+=2){var d=a[o],c=a[o+1];d==="style"?Sf(i,c):d==="dangerouslySetInnerHTML"?Cf(i,c):d==="children"?fi(i,c):ou(i,d,c,u)}switch(l){case"input":Kl(i,s);break;case"textarea":vf(i,s);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?or(i,!!s.multiple,g,!1):h!==!!s.multiple&&(s.defaultValue!=null?or(i,!!s.multiple,s.defaultValue,!0):or(i,!!s.multiple,s.multiple?[]:"",!1))}i[Ei]=s}catch(v){re(t,t.return,v)}}break;case 6:if(nt(e,t),pt(t),r&4){if(t.stateNode===null)throw Error(E(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(v){re(t,t.return,v)}}break;case 3:if(nt(e,t),pt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{yi(e.containerInfo)}catch(v){re(t,t.return,v)}break;case 4:nt(e,t),pt(t);break;case 13:nt(e,t),pt(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(zu=se())),r&4&&Fd(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Se=(u=Se)||d,nt(e,t),Se=u):nt(e,t),pt(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(T=t,d=t.child;d!==null;){for(c=T=d;T!==null;){switch(h=T,g=h.child,h.tag){case 0:case 11:case 14:case 15:ii(4,h,h.return);break;case 1:rr(h,h.return);var _=h.stateNode;if(typeof _.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(v){re(r,n,v)}}break;case 5:rr(h,h.return);break;case 22:if(h.memoizedState!==null){zd(c);continue}}g!==null?(g.return=h,T=g):zd(c)}d=d.sibling}e:for(d=null,c=t;;){if(c.tag===5){if(d===null){d=c;try{i=c.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=c.stateNode,a=c.memoizedProps.style,o=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=Ef("display",o))}catch(v){re(t,t.return,v)}}}else if(c.tag===6){if(d===null)try{c.stateNode.nodeValue=u?"":c.memoizedProps}catch(v){re(t,t.return,v)}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===t)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===t)break e;for(;c.sibling===null;){if(c.return===null||c.return===t)break e;d===c&&(d=null),c=c.return}d===c&&(d=null),c.sibling.return=c.return,c=c.sibling}}break;case 19:nt(e,t),pt(t),r&4&&Fd(t);break;case 21:break;default:nt(e,t),pt(t)}}function pt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Yp(n)){var r=n;break e}n=n.return}throw Error(E(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(fi(i,""),r.flags&=-33);var s=bd(t);Pa(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=bd(t);Na(t,l,o);break;default:throw Error(E(161))}}catch(a){re(t,t.return,a)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Lv(t,e,n){T=t,Jp(t)}function Jp(t,e,n){for(var r=(t.mode&1)!==0;T!==null;){var i=T,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||hs;if(!o){var l=i.alternate,a=l!==null&&l.memoizedState!==null||Se;l=hs;var u=Se;if(hs=o,(Se=a)&&!u)for(T=i;T!==null;)o=T,a=o.child,o.tag===22&&o.memoizedState!==null?Ud(i):a!==null?(a.return=o,T=a):Ud(i);for(;s!==null;)T=s,Jp(s),s=s.sibling;T=i,hs=l,Se=u}jd(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,T=s):jd(t)}}function jd(t){for(;T!==null;){var e=T;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Se||Ro(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Se)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:rt(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Cd(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Cd(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var a=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var c=d.dehydrated;c!==null&&yi(c)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(E(163))}Se||e.flags&512&&ka(e)}catch(h){re(e,e.return,h)}}if(e===t){T=null;break}if(n=e.sibling,n!==null){n.return=e.return,T=n;break}T=e.return}}function zd(t){for(;T!==null;){var e=T;if(e===t){T=null;break}var n=e.sibling;if(n!==null){n.return=e.return,T=n;break}T=e.return}}function Ud(t){for(;T!==null;){var e=T;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ro(4,e)}catch(a){re(e,n,a)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(a){re(e,i,a)}}var s=e.return;try{ka(e)}catch(a){re(e,s,a)}break;case 5:var o=e.return;try{ka(e)}catch(a){re(e,o,a)}}}catch(a){re(e,e.return,a)}if(e===t){T=null;break}var l=e.sibling;if(l!==null){l.return=e.return,T=l;break}T=e.return}}var Mv=Math.ceil,Ys=Ft.ReactCurrentDispatcher,Fu=Ft.ReactCurrentOwner,Je=Ft.ReactCurrentBatchConfig,H=0,ye=null,oe=null,ve=0,$e=0,ir=hn(0),ce=0,Ni=null,On=0,Do=0,ju=0,si=null,Oe=null,zu=0,Er=1/0,St=null,qs=!1,Ra=null,Xt=null,fs=!1,Vt=null,Xs=0,oi=0,Da=null,Ts=-1,ks=0;function Ne(){return H&6?se():Ts!==-1?Ts:Ts=se()}function Jt(t){return t.mode&1?H&2&&ve!==0?ve&-ve:_v.transition!==null?(ks===0&&(ks=Mf()),ks):(t=W,t!==0||(t=window.event,t=t===void 0?16:$f(t.type)),t):1}function ct(t,e,n,r){if(50<oi)throw oi=0,Da=null,Error(E(185));zi(t,n,r),(!(H&2)||t!==ye)&&(t===ye&&(!(H&2)&&(Do|=n),ce===4&&Wt(t,ve)),je(t,r),n===1&&H===0&&!(e.mode&1)&&(Er=se()+500,ko&&fn()))}function je(t,e){var n=t.callbackNode;__(t,e);var r=Ls(t,t===ye?ve:0);if(r===0)n!==null&&Yc(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Yc(n),e===1)t.tag===0?yv(Hd.bind(null,t)):lp(Hd.bind(null,t)),fv(function(){!(H&6)&&fn()}),n=null;else{switch(bf(r)){case 1:n=du;break;case 4:n=Of;break;case 16:n=Os;break;case 536870912:n=Lf;break;default:n=Os}n=om(n,Zp.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Zp(t,e){if(Ts=-1,ks=0,H&6)throw Error(E(327));var n=t.callbackNode;if(dr()&&t.callbackNode!==n)return null;var r=Ls(t,t===ye?ve:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Js(t,r);else{e=r;var i=H;H|=2;var s=tm();(ye!==t||ve!==e)&&(St=null,Er=se()+500,kn(t,e));do try{jv();break}catch(l){em(t,l)}while(!0);xu(),Ys.current=s,H=i,oe!==null?e=0:(ye=null,ve=0,e=ce)}if(e!==0){if(e===2&&(i=ia(t),i!==0&&(r=i,e=Aa(t,i))),e===1)throw n=Ni,kn(t,0),Wt(t,r),je(t,se()),n;if(e===6)Wt(t,r);else{if(i=t.current.alternate,!(r&30)&&!bv(i)&&(e=Js(t,r),e===2&&(s=ia(t),s!==0&&(r=s,e=Aa(t,s))),e===1))throw n=Ni,kn(t,0),Wt(t,r),je(t,se()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(E(345));case 2:_n(t,Oe,St);break;case 3:if(Wt(t,r),(r&130023424)===r&&(e=zu+500-se(),10<e)){if(Ls(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Ne(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=ha(_n.bind(null,t,Oe,St),e);break}_n(t,Oe,St);break;case 4:if(Wt(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-ut(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=se()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Mv(r/1960))-r,10<r){t.timeoutHandle=ha(_n.bind(null,t,Oe,St),r);break}_n(t,Oe,St);break;case 5:_n(t,Oe,St);break;default:throw Error(E(329))}}}return je(t,se()),t.callbackNode===n?Zp.bind(null,t):null}function Aa(t,e){var n=si;return t.current.memoizedState.isDehydrated&&(kn(t,e).flags|=256),t=Js(t,e),t!==2&&(e=Oe,Oe=n,e!==null&&Oa(e)),t}function Oa(t){Oe===null?Oe=t:Oe.push.apply(Oe,t)}function bv(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ht(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Wt(t,e){for(e&=~ju,e&=~Do,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ut(e),r=1<<n;t[n]=-1,e&=~r}}function Hd(t){if(H&6)throw Error(E(327));dr();var e=Ls(t,0);if(!(e&1))return je(t,se()),null;var n=Js(t,e);if(t.tag!==0&&n===2){var r=ia(t);r!==0&&(e=r,n=Aa(t,r))}if(n===1)throw n=Ni,kn(t,0),Wt(t,e),je(t,se()),n;if(n===6)throw Error(E(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,_n(t,Oe,St),je(t,se()),null}function Uu(t,e){var n=H;H|=1;try{return t(e)}finally{H=n,H===0&&(Er=se()+500,ko&&fn())}}function Ln(t){Vt!==null&&Vt.tag===0&&!(H&6)&&dr();var e=H;H|=1;var n=Je.transition,r=W;try{if(Je.transition=null,W=1,t)return t()}finally{W=r,Je.transition=n,H=e,!(H&6)&&fn()}}function Hu(){$e=ir.current,X(ir)}function kn(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,hv(n)),oe!==null)for(n=oe.return;n!==null;){var r=n;switch(Cu(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&zs();break;case 3:wr(),X(be),X(Ie),Ru();break;case 5:Pu(r);break;case 4:wr();break;case 13:X(ee);break;case 19:X(ee);break;case 10:Iu(r.type._context);break;case 22:case 23:Hu()}n=n.return}if(ye=t,oe=t=Zt(t.current,null),ve=$e=e,ce=0,Ni=null,ju=Do=On=0,Oe=si=null,En!==null){for(e=0;e<En.length;e++)if(n=En[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}En=null}return t}function em(t,e){do{var n=oe;try{if(xu(),Ss.current=Ks,Qs){for(var r=te.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Qs=!1}if(An=0,pe=le=te=null,ri=!1,Ii=0,Fu.current=null,n===null||n.return===null){ce=1,Ni=e,oe=null;break}e:{var s=t,o=n.return,l=n,a=e;if(e=ve,l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var u=a,d=l,c=d.tag;if(!(d.mode&1)&&(c===0||c===11||c===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var g=Nd(o);if(g!==null){g.flags&=-257,Pd(g,o,l,s,e),g.mode&1&&kd(s,u,e),e=g,a=u;var _=e.updateQueue;if(_===null){var v=new Set;v.add(a),e.updateQueue=v}else _.add(a);break e}else{if(!(e&1)){kd(s,u,e),$u();break e}a=Error(E(426))}}else if(J&&l.mode&1){var k=Nd(o);if(k!==null){!(k.flags&65536)&&(k.flags|=256),Pd(k,o,l,s,e),Eu(Cr(a,l));break e}}s=a=Cr(a,l),ce!==4&&(ce=2),si===null?si=[s]:si.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var p=Fp(s,a,e);wd(s,p);break e;case 1:l=a;var f=s.type,m=s.stateNode;if(!(s.flags&128)&&(typeof f.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Xt===null||!Xt.has(m)))){s.flags|=65536,e&=-e,s.lanes|=e;var w=jp(s,l,e);wd(s,w);break e}}s=s.return}while(s!==null)}rm(n)}catch(x){e=x,oe===n&&n!==null&&(oe=n=n.return);continue}break}while(!0)}function tm(){var t=Ys.current;return Ys.current=Ks,t===null?Ks:t}function $u(){(ce===0||ce===3||ce===2)&&(ce=4),ye===null||!(On&268435455)&&!(Do&268435455)||Wt(ye,ve)}function Js(t,e){var n=H;H|=2;var r=tm();(ye!==t||ve!==e)&&(St=null,kn(t,e));do try{Fv();break}catch(i){em(t,i)}while(!0);if(xu(),H=n,Ys.current=r,oe!==null)throw Error(E(261));return ye=null,ve=0,ce}function Fv(){for(;oe!==null;)nm(oe)}function jv(){for(;oe!==null&&!u_();)nm(oe)}function nm(t){var e=sm(t.alternate,t,$e);t.memoizedProps=t.pendingProps,e===null?rm(t):oe=e,Fu.current=null}function rm(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Dv(n,e),n!==null){n.flags&=32767,oe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ce=6,oe=null;return}}else if(n=Rv(n,e,$e),n!==null){oe=n;return}if(e=e.sibling,e!==null){oe=e;return}oe=e=t}while(e!==null);ce===0&&(ce=5)}function _n(t,e,n){var r=W,i=Je.transition;try{Je.transition=null,W=1,zv(t,e,n,r)}finally{Je.transition=i,W=r}return null}function zv(t,e,n,r){do dr();while(Vt!==null);if(H&6)throw Error(E(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(E(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(v_(t,s),t===ye&&(oe=ye=null,ve=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||fs||(fs=!0,om(Os,function(){return dr(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Je.transition,Je.transition=null;var o=W;W=1;var l=H;H|=4,Fu.current=null,Ov(t,n),Xp(n,t),sv(ca),Ms=!!ua,ca=ua=null,t.current=n,Lv(n),c_(),H=l,W=o,Je.transition=s}else t.current=n;if(fs&&(fs=!1,Vt=t,Xs=i),s=t.pendingLanes,s===0&&(Xt=null),f_(n.stateNode),je(t,se()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(qs)throw qs=!1,t=Ra,Ra=null,t;return Xs&1&&t.tag!==0&&dr(),s=t.pendingLanes,s&1?t===Da?oi++:(oi=0,Da=t):oi=0,fn(),null}function dr(){if(Vt!==null){var t=bf(Xs),e=Je.transition,n=W;try{if(Je.transition=null,W=16>t?16:t,Vt===null)var r=!1;else{if(t=Vt,Vt=null,Xs=0,H&6)throw Error(E(331));var i=H;for(H|=4,T=t.current;T!==null;){var s=T,o=s.child;if(T.flags&16){var l=s.deletions;if(l!==null){for(var a=0;a<l.length;a++){var u=l[a];for(T=u;T!==null;){var d=T;switch(d.tag){case 0:case 11:case 15:ii(8,d,s)}var c=d.child;if(c!==null)c.return=d,T=c;else for(;T!==null;){d=T;var h=d.sibling,g=d.return;if(Kp(d),d===u){T=null;break}if(h!==null){h.return=g,T=h;break}T=g}}}var _=s.alternate;if(_!==null){var v=_.child;if(v!==null){_.child=null;do{var k=v.sibling;v.sibling=null,v=k}while(v!==null)}}T=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,T=o;else e:for(;T!==null;){if(s=T,s.flags&2048)switch(s.tag){case 0:case 11:case 15:ii(9,s,s.return)}var p=s.sibling;if(p!==null){p.return=s.return,T=p;break e}T=s.return}}var f=t.current;for(T=f;T!==null;){o=T;var m=o.child;if(o.subtreeFlags&2064&&m!==null)m.return=o,T=m;else e:for(o=f;T!==null;){if(l=T,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Ro(9,l)}}catch(x){re(l,l.return,x)}if(l===o){T=null;break e}var w=l.sibling;if(w!==null){w.return=l.return,T=w;break e}T=l.return}}if(H=i,fn(),yt&&typeof yt.onPostCommitFiberRoot=="function")try{yt.onPostCommitFiberRoot(Eo,t)}catch{}r=!0}return r}finally{W=n,Je.transition=e}}return!1}function $d(t,e,n){e=Cr(n,e),e=Fp(t,e,1),t=qt(t,e,1),e=Ne(),t!==null&&(zi(t,1,e),je(t,e))}function re(t,e,n){if(t.tag===3)$d(t,t,n);else for(;e!==null;){if(e.tag===3){$d(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Xt===null||!Xt.has(r))){t=Cr(n,t),t=jp(e,t,1),e=qt(e,t,1),t=Ne(),e!==null&&(zi(e,1,t),je(e,t));break}}e=e.return}}function Uv(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ne(),t.pingedLanes|=t.suspendedLanes&n,ye===t&&(ve&n)===n&&(ce===4||ce===3&&(ve&130023424)===ve&&500>se()-zu?kn(t,0):ju|=n),je(t,e)}function im(t,e){e===0&&(t.mode&1?(e=rs,rs<<=1,!(rs&130023424)&&(rs=4194304)):e=1);var n=Ne();t=Ot(t,e),t!==null&&(zi(t,e,n),je(t,n))}function Hv(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),im(t,n)}function $v(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(E(314))}r!==null&&r.delete(e),im(t,n)}var sm;sm=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||be.current)Le=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Le=!1,Pv(t,e,n);Le=!!(t.flags&131072)}else Le=!1,J&&e.flags&1048576&&ap(e,$s,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Is(t,e),t=e.pendingProps;var i=yr(e,Ie.current);cr(e,n),i=Au(null,e,r,t,i,n);var s=Ou();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Fe(r)?(s=!0,Us(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,ku(e),i.updater=No,e.stateNode=i,i._reactInternals=e,va(e,r,t,n),e=Ea(null,e,r,!0,s,n)):(e.tag=0,J&&s&&wu(e),Te(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Is(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Bv(r),t=rt(r,t),i){case 0:e=Ca(null,e,r,t,n);break e;case 1:e=Ad(null,e,r,t,n);break e;case 11:e=Rd(null,e,r,t,n);break e;case 14:e=Dd(null,e,r,rt(r.type,t),n);break e}throw Error(E(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:rt(r,i),Ca(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:rt(r,i),Ad(t,e,r,i,n);case 3:e:{if($p(e),t===null)throw Error(E(387));r=e.pendingProps,s=e.memoizedState,i=s.element,hp(t,e),Vs(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Cr(Error(E(423)),e),e=Od(t,e,r,n,i);break e}else if(r!==i){i=Cr(Error(E(424)),e),e=Od(t,e,r,n,i);break e}else for(We=Yt(e.stateNode.containerInfo.firstChild),Be=e,J=!0,st=null,n=gp(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(_r(),r===i){e=Lt(t,e,n);break e}Te(t,e,r,n)}e=e.child}return e;case 5:return yp(e),t===null&&ga(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,da(r,i)?o=null:s!==null&&da(r,s)&&(e.flags|=32),Hp(t,e),Te(t,e,o,n),e.child;case 6:return t===null&&ga(e),null;case 13:return Wp(t,e,n);case 4:return Nu(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=vr(e,null,r,n):Te(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:rt(r,i),Rd(t,e,r,i,n);case 7:return Te(t,e,e.pendingProps,n),e.child;case 8:return Te(t,e,e.pendingProps.children,n),e.child;case 12:return Te(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,K(Ws,r._currentValue),r._currentValue=o,s!==null)if(ht(s.value,o)){if(s.children===i.children&&!be.current){e=Lt(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var a=l.firstContext;a!==null;){if(a.context===r){if(s.tag===1){a=Pt(-1,n&-n),a.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?a.next=a:(a.next=d.next,d.next=a),u.pending=a}}s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),ya(s.return,n,e),l.lanes|=n;break}a=a.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(E(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),ya(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Te(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,cr(e,n),i=Ze(i),r=r(i),e.flags|=1,Te(t,e,r,n),e.child;case 14:return r=e.type,i=rt(r,e.pendingProps),i=rt(r.type,i),Dd(t,e,r,i,n);case 15:return zp(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:rt(r,i),Is(t,e),e.tag=1,Fe(r)?(t=!0,Us(e)):t=!1,cr(e,n),pp(e,r,i),va(e,r,i,n),Ea(null,e,r,!0,t,n);case 19:return Bp(t,e,n);case 22:return Up(t,e,n)}throw Error(E(156,e.tag))};function om(t,e){return Af(t,e)}function Wv(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xe(t,e,n,r){return new Wv(t,e,n,r)}function Wu(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Bv(t){if(typeof t=="function")return Wu(t)?1:0;if(t!=null){if(t=t.$$typeof,t===au)return 11;if(t===uu)return 14}return 2}function Zt(t,e){var n=t.alternate;return n===null?(n=Xe(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ns(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Wu(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Kn:return Nn(n.children,i,s,e);case lu:o=8,i|=8;break;case Wl:return t=Xe(12,n,e,i|2),t.elementType=Wl,t.lanes=s,t;case Bl:return t=Xe(13,n,e,i),t.elementType=Bl,t.lanes=s,t;case Vl:return t=Xe(19,n,e,i),t.elementType=Vl,t.lanes=s,t;case mf:return Ao(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ff:o=10;break e;case pf:o=9;break e;case au:o=11;break e;case uu:o=14;break e;case Ut:o=16,r=null;break e}throw Error(E(130,t==null?t:typeof t,""))}return e=Xe(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Nn(t,e,n,r){return t=Xe(7,t,r,e),t.lanes=n,t}function Ao(t,e,n,r){return t=Xe(22,t,r,e),t.elementType=mf,t.lanes=n,t.stateNode={isHidden:!1},t}function xl(t,e,n){return t=Xe(6,t,null,e),t.lanes=n,t}function Il(t,e,n){return e=Xe(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Vv(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=sl(0),this.expirationTimes=sl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=sl(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Bu(t,e,n,r,i,s,o,l,a){return t=new Vv(t,e,n,l,a),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Xe(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ku(s),t}function Gv(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Qn,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function lm(t){if(!t)return on;t=t._reactInternals;e:{if($n(t)!==t||t.tag!==1)throw Error(E(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Fe(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(E(171))}if(t.tag===1){var n=t.type;if(Fe(n))return op(t,n,e)}return e}function am(t,e,n,r,i,s,o,l,a){return t=Bu(n,r,!0,t,i,s,o,l,a),t.context=lm(null),n=t.current,r=Ne(),i=Jt(n),s=Pt(r,i),s.callback=e??null,qt(n,s,i),t.current.lanes=i,zi(t,i,r),je(t,r),t}function Oo(t,e,n,r){var i=e.current,s=Ne(),o=Jt(i);return n=lm(n),e.context===null?e.context=n:e.pendingContext=n,e=Pt(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=qt(i,e,o),t!==null&&(ct(t,i,o,s),Es(t,i,o)),o}function Zs(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Wd(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Vu(t,e){Wd(t,e),(t=t.alternate)&&Wd(t,e)}function Qv(){return null}var um=typeof reportError=="function"?reportError:function(t){console.error(t)};function Gu(t){this._internalRoot=t}Lo.prototype.render=Gu.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(E(409));Oo(t,e,null,null)};Lo.prototype.unmount=Gu.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ln(function(){Oo(null,t,null,null)}),e[At]=null}};function Lo(t){this._internalRoot=t}Lo.prototype.unstable_scheduleHydration=function(t){if(t){var e=zf();t={blockedOn:null,target:t,priority:e};for(var n=0;n<$t.length&&e!==0&&e<$t[n].priority;n++);$t.splice(n,0,t),n===0&&Hf(t)}};function Qu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Mo(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Bd(){}function Kv(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=Zs(o);s.call(u)}}var o=am(e,r,t,0,null,!1,!1,"",Bd);return t._reactRootContainer=o,t[At]=o.current,wi(t.nodeType===8?t.parentNode:t),Ln(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var u=Zs(a);l.call(u)}}var a=Bu(t,0,!1,null,null,!1,!1,"",Bd);return t._reactRootContainer=a,t[At]=a.current,wi(t.nodeType===8?t.parentNode:t),Ln(function(){Oo(e,a,n,r)}),a}function bo(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var a=Zs(o);l.call(a)}}Oo(e,o,t,i)}else o=Kv(n,e,t,i,r);return Zs(o)}Ff=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=qr(e.pendingLanes);n!==0&&(hu(e,n|1),je(e,se()),!(H&6)&&(Er=se()+500,fn()))}break;case 13:Ln(function(){var r=Ot(t,1);if(r!==null){var i=Ne();ct(r,t,1,i)}}),Vu(t,1)}};fu=function(t){if(t.tag===13){var e=Ot(t,134217728);if(e!==null){var n=Ne();ct(e,t,134217728,n)}Vu(t,134217728)}};jf=function(t){if(t.tag===13){var e=Jt(t),n=Ot(t,e);if(n!==null){var r=Ne();ct(n,t,e,r)}Vu(t,e)}};zf=function(){return W};Uf=function(t,e){var n=W;try{return W=t,e()}finally{W=n}};ta=function(t,e,n){switch(e){case"input":if(Kl(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=To(r);if(!i)throw Error(E(90));yf(r),Kl(r,i)}}}break;case"textarea":vf(t,n);break;case"select":e=n.value,e!=null&&or(t,!!n.multiple,e,!1)}};Tf=Uu;kf=Ln;var Yv={usingClientEntryPoint:!1,Events:[Hi,Jn,To,xf,If,Uu]},Wr={findFiberByHostInstance:Cn,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},qv={bundleType:Wr.bundleType,version:Wr.version,rendererPackageName:Wr.rendererPackageName,rendererConfig:Wr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ft.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Rf(t),t===null?null:t.stateNode},findFiberByHostInstance:Wr.findFiberByHostInstance||Qv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ps=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ps.isDisabled&&ps.supportsFiber)try{Eo=ps.inject(qv),yt=ps}catch{}}Qe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Yv;Qe.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Qu(e))throw Error(E(200));return Gv(t,e,null,n)};Qe.createRoot=function(t,e){if(!Qu(t))throw Error(E(299));var n=!1,r="",i=um;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Bu(t,1,!1,null,null,n,!1,r,i),t[At]=e.current,wi(t.nodeType===8?t.parentNode:t),new Gu(e)};Qe.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(E(188)):(t=Object.keys(t).join(","),Error(E(268,t)));return t=Rf(e),t=t===null?null:t.stateNode,t};Qe.flushSync=function(t){return Ln(t)};Qe.hydrate=function(t,e,n){if(!Mo(e))throw Error(E(200));return bo(null,t,e,!0,n)};Qe.hydrateRoot=function(t,e,n){if(!Qu(t))throw Error(E(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=um;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=am(e,null,t,1,n??null,i,!1,s,o),t[At]=e.current,wi(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Lo(e)};Qe.render=function(t,e,n){if(!Mo(e))throw Error(E(200));return bo(null,t,e,!1,n)};Qe.unmountComponentAtNode=function(t){if(!Mo(t))throw Error(E(40));return t._reactRootContainer?(Ln(function(){bo(null,null,t,!1,function(){t._reactRootContainer=null,t[At]=null})}),!0):!1};Qe.unstable_batchedUpdates=Uu;Qe.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Mo(n))throw Error(E(200));if(t==null||t._reactInternals===void 0)throw Error(E(38));return bo(t,e,n,!1,r)};Qe.version="18.2.0-next-9e3b772b8-20220608";function cm(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(cm)}catch(t){console.error(t)}}cm(),af.exports=Qe;var Xv=af.exports,Vd=Xv;Hl.createRoot=Vd.createRoot,Hl.hydrateRoot=Vd.hydrateRoot;function I(t){return`${t.x},${t.y}`}function xt(t){const e=t.split(",");return{x:Number(e[0]),y:Number(e[1])}}const Ku=3;function Jv(t){const e=[[5,5,5],[4,4,4],[3,3,3],[2,2,2],[1,1,1],[0,0,0]];for(const s of e)for(let o=0;o<t.hands.length;o++)for(let l=0;l<t.hands[o].length;l++)if(s===t.hands[o][l].numbers)return[o,l];let n=-1,r=-1,i=-1;for(let s=0;s<t.hands.length;s++){const o=t.hands[s];for(let l=0;l<o.length;l++){const u=o[l].numbers.reduce((d,c)=>d+c,0);u>n&&(n=u,r=s,i=l)}}return[r,i]}function dm(t,e,n){return mm(t).filter(s=>{let o=!1;if((e.x+e.y)%2===0&&s.orientation==="up"){const l=n.get(I({x:e.x-1,y:e.y})),a=n.get(I({x:e.x+1,y:e.y})),u=n.get(I({x:e.x,y:e.y-1})),d=n.get(I({x:e.x-1,y:e.y+1})),c=n.get(I({x:e.x,y:e.y+1})),h=n.get(I({x:e.x+1,y:e.y+1})),g=n.get(I({x:e.x-2,y:e.y})),_=n.get(I({x:e.x-2,y:e.y-1})),v=n.get(I({x:e.x-1,y:e.y-1})),k=n.get(I({x:e.x+2,y:e.y})),p=n.get(I({x:e.x+2,y:e.y-1})),f=n.get(I({x:e.x+1,y:e.y-1}));o=(l===void 0||s.bottomLeft===l.bottomCenter&&s.topCenter===l.topRight)&&(a===void 0||s.bottomRight===a.bottomCenter&&s.topCenter===a.topLeft)&&(u===void 0||s.bottomLeft===u.topLeft&&s.bottomRight===u.topRight)&&(d===void 0||s.topCenter===d.bottomRight)&&(c===void 0||s.topCenter===c.bottomCenter)&&(h===void 0||s.topCenter===h.bottomLeft)&&(g===void 0||s.bottomLeft===g.bottomRight)&&(_===void 0||s.bottomLeft===_.topRight)&&(v==null||s.bottomLeft===v.topCenter)&&(k===void 0||s.bottomRight===k.bottomLeft)&&(p===void 0||s.bottomRight===p.topLeft)&&(f===void 0||s.bottomRight===f.topCenter)}else if(Math.abs(e.x+e.y)%2===1&&s.orientation==="down"){const l=n.get(I({x:e.x-1,y:e.y})),a=n.get(I({x:e.x+1,y:e.y})),u=n.get(I({x:e.x,y:e.y+1})),d=n.get(I({x:e.x-1,y:e.y-1})),c=n.get(I({x:e.x,y:e.y-1})),h=n.get(I({x:e.x+1,y:e.y-1})),g=n.get(I({x:e.x-2,y:e.y})),_=n.get(I({x:e.x-2,y:e.y+1})),v=n.get(I({x:e.x-1,y:e.y+1})),k=n.get(I({x:e.x+1,y:e.y+1})),p=n.get(I({x:e.x+2,y:e.y+1})),f=n.get(I({x:e.x+2,y:e.y}));o=(l===void 0||s.topLeft===l.topCenter&&s.bottomCenter===l.bottomRight)&&(a===void 0||s.bottomCenter===a.bottomLeft&&s.topRight===a.topCenter)&&(u===void 0||s.topLeft===u.bottomLeft&&s.topRight===u.bottomRight)&&(d===void 0||s.bottomCenter===d.topRight)&&(c===void 0||s.bottomCenter===c.topCenter)&&(h===void 0||s.bottomCenter===h.topLeft)&&(g===void 0||s.topLeft===g.topRight)&&(_===void 0||s.topLeft===_.bottomRight)&&(v==null||s.topLeft===v.bottomCenter)&&(k===void 0||s.topRight===k.bottomCenter)&&(p===void 0||s.topRight===p.bottomLeft)&&(f===void 0||s.topRight===f.topLeft)}return o})[0]}function hm(t){const e=new Set;return t.forEach((n,r)=>{const i=xt(r),s=[];n.orientation==="up"?s.push({x:i.x-1,y:i.y},{x:i.x+1,y:i.y},{x:i.x,y:i.y-1}):s.push({x:i.x-1,y:i.y},{x:i.x+1,y:i.y},{x:i.x,y:i.y+1}),s.forEach(o=>{const l=I(o);t.has(l)||e.add(l)})}),Array.from(e.keys()).map(xt)}function Zv(t,e){const n=[],r=hm(e);return t.forEach(i=>{r.forEach(s=>{const o=dm(i,s,e);o&&n.push({coord:s,newTile:i,placedTile:o})})}),n}function Tl(t,e){const n=[];return hm(e).forEach(i=>{const s=dm(t,i,e);s&&n.push({coord:i,newTile:t,placedTile:s})}),n}function e0(t,e){let n=t.hands[e],r=Zv(n,t.gameBoard);return r.length>0?{actionType:"play",playerIndex:e,tilePlayed:r[0].placedTile,coord:r[0].coord}:t.consecutivePasses===t.playerNames.length?{actionType:"end"}:t.drawPile.length>0&&t.tilesDrawnThisTurn<Ku?{actionType:"draw",playerIndex:e}:{actionType:"pass",playerIndex:e}}function fm(t,e,n){let r=t.newTileID.split(",").map(Number).reduce((o,l)=>o+l,0),i=!1,s=!1;if(t.orientation==="up"){const o=n.has(I({x:e.x-1,y:e.y}))&&n.has(I({x:e.x+1,y:e.y}))&&n.has(I({x:e.x-1,y:e.y+1}))&&n.has(I({x:e.x,y:e.y+1}))&&n.has(I({x:e.x+1,y:e.y+1})),l=n.has(I({x:e.x-2,y:e.y}))&&n.has(I({x:e.x-1,y:e.y}))&&n.has(I({x:e.x-2,y:e.y-1}))&&n.has(I({x:e.x-1,y:e.y-1}))&&n.has(I({x:e.x,y:e.y-1})),a=n.has(I({x:e.x+1,y:e.y}))&&n.has(I({x:e.x+2,y:e.y}))&&n.has(I({x:e.x,y:e.y-1}))&&n.has(I({x:e.x+1,y:e.y-1}))&&n.has(I({x:e.x+2,y:e.y-1}));i=o||l||a}else{const o=n.has(I({x:e.x-1,y:e.y}))&&n.has(I({x:e.x+1,y:e.y}))&&n.has(I({x:e.x-1,y:e.y-1}))&&n.has(I({x:e.x,y:e.y-1}))&&n.has(I({x:e.x+1,y:e.y-1})),l=n.has(I({x:e.x-2,y:e.y}))&&n.has(I({x:e.x-1,y:e.y}))&&n.has(I({x:e.x-2,y:e.y+1}))&&n.has(I({x:e.x-1,y:e.y+1}))&&n.has(I({x:e.x,y:e.y+1})),a=n.has(I({x:e.x+1,y:e.y}))&&n.has(I({x:e.x+2,y:e.y}))&&n.has(I({x:e.x,y:e.y+1}))&&n.has(I({x:e.x+1,y:e.y+1}))&&n.has(I({x:e.x+2,y:e.y+1}));i=o||l||a}if(!i)if(t.orientation==="up"){const o=n.has(I({x:e.x,y:e.y-1}))&&n.has(I({x:e.x,y:e.y+1})),l=n.has(I({x:e.x+1,y:e.y}))&&n.has(I({x:e.x-2,y:e.y-1})),a=n.has(I({x:e.x-1,y:e.y}))&&n.has(I({x:e.x+2,y:e.y-1}));s=o||l||a}else{const o=n.has(I({x:e.x,y:e.y+1}))&&n.has(I({x:e.x,y:e.y-1})),l=n.has(I({x:e.x+1,y:e.y}))&&n.has(I({x:e.x-2,y:e.y+1})),a=n.has(I({x:e.x-1,y:e.y}))&&n.has(I({x:e.x+2,y:e.y+1}));s=o||l||a}return i?r+=50:s&&(r+=40),[r,i,s]}function pm(t){const i={gameBoard:new Map,playerNames:[],hands:[],scores:[],drawPile:[...t.startingDeck],gameLog:[],activePlayer:0,tilesDrawnThisTurn:0,consecutivePasses:0,lastPlay:{x:0,y:0}};let s=!1;return t.actions.forEach(o=>{if(o.actionType==="add-player")i.playerNames.push(o.playerName),i.hands.push([]),i.scores.push(0);else if(o.actionType==="play"){i.gameBoard.set(I(o.coord),o.tilePlayed);const l=i.hands[o.playerIndex].findIndex(d=>d.id===o.tilePlayed.newTileID);i.hands[o.playerIndex].splice(l,1);const a=fm(o.tilePlayed,o.coord,i.gameBoard);i.scores[o.playerIndex]+=a[0],i.lastPlay=o.coord;const u=a[1]?" Hexagon!":a[2]?" Bridge!":"";i.gameLog.push(`${i.playerNames[o.playerIndex]} plays [${o.tilePlayed.newTileID}] for ${a[0]} points.`+u),i.activePlayer=(o.playerIndex+1)%i.hands.length,i.tilesDrawnThisTurn=0,i.consecutivePasses=0}else if(o.actionType==="draw")s?i.drawPile.length>0?(i.hands[o.playerIndex].push(i.drawPile.pop()),i.tilesDrawnThisTurn+=1,i.scores[o.playerIndex]-=5,i.gameLog.push(`${i.playerNames[o.playerIndex]} draws a tile and loses 5 points.`)):console.log("Can't draw, deck is empty."):(i.hands[o.playerIndex]||(i.hands[o.playerIndex]=[],i.scores[o.playerIndex]=0),i.hands[o.playerIndex].push(i.drawPile.pop()));else if(o.actionType==="pass")i.scores[o.playerIndex]-=10,i.gameLog.push(`${i.playerNames[o.playerIndex]} can not play and loses 10 points.`),i.activePlayer=(i.activePlayer+1)%i.hands.length,i.tilesDrawnThisTurn=0,i.consecutivePasses++;else if(o.actionType==="init"){const l=Jv(i),a=l[0],u=l[1],d=i.hands[a][u];i.gameBoard.set("0,0",mm(d)[0]),i.hands[a].splice(u,1);let c=d.numbers.reduce((h,g)=>h+g,0);c===0?c+=30:d.numbers[0]===d.numbers[1]&&d.numbers[1]===d.numbers[2]&&(c+=10),i.scores[a]||(i.scores[a]=0),i.scores[a]=c,i.lastPlay={x:0,y:0},i.gameLog.push("All players draw starting tiles."),i.gameLog.push(`${i.playerNames[a]} plays [${d.id}] and gains ${c} points.`),i.activePlayer=(a+1)%i.hands.length,s=!0}else if(o.actionType==="end"){let l=[],a=-1;for(let d=0;d<i.hands.length;d++){let c=0;for(const h of i.hands[d])c+=h.numbers.reduce((g,_)=>g+_,0);l.push(c),i.hands[d].length===0&&(a=d)}if(a!=-1){const d=25+l.reduce((c,h)=>c+h,0);i.scores[a]+=d,i.gameLog.push(`${i.playerNames[a]} went out and gains ${d} bonus points.`)}else{const d=Math.min(...l);for(let c=0;c<i.scores.length;c++)for(let h=0;h<i.scores.length;h++)i.scores[c]+=Math.max(0,l[h]-d)}const u=i.scores.indexOf(Math.max(...i.scores));i.gameLog.push(`Game over. ${i.playerNames[u]} wins!`),i.activePlayer=-1}else console.log("Not a valid action.")}),i}function t0(t){return{id:t.join(","),numbers:t}}function n0(){const t=[];for(let e=0;e<=5;e++)for(let n=e;n<=5;n++)for(let r=n;r<=5;r++)t.push(t0([e,n,r]));for(let e=0;e<t.length;e++){let n=Math.floor(Math.random()*t.length);[t[e],t[n]]=[t[n],t[e]]}return t}function mm(t){return[{orientation:"up",newTileID:t.id,topCenter:t.numbers[0],bottomRight:t.numbers[1],bottomLeft:t.numbers[2]},{orientation:"down",newTileID:t.id,bottomCenter:t.numbers[1],topLeft:t.numbers[2],topRight:t.numbers[0]},{orientation:"up",newTileID:t.id,topCenter:t.numbers[2],bottomRight:t.numbers[0],bottomLeft:t.numbers[1]},{orientation:"down",newTileID:t.id,bottomCenter:t.numbers[0],topLeft:t.numbers[1],topRight:t.numbers[2]},{orientation:"up",newTileID:t.id,topCenter:t.numbers[1],bottomRight:t.numbers[2],bottomLeft:t.numbers[0]},{orientation:"down",newTileID:t.id,bottomCenter:t.numbers[2],topLeft:t.numbers[0],topRight:t.numbers[1]}]}function r0(t){const e=t.numPlayers,n=t.players.map(s=>s.playerName),r={startingDeck:n0(),actions:[]};for(let s=0;s<e;s++)s<t.players.length?r.actions.push({actionType:"add-player",playerName:t.players[s].playerName,playerID:t.players[s].localPlayerID}):r.actions.push({actionType:"add-player",playerName:`Computer ${s+1-n.length}`,playerID:"null"});const i={1:9,2:9,3:7,4:7,5:6,6:6}[e];for(let s=0;s<e;s++)for(let o=0;o<i;o++)r.actions.push({actionType:"draw",playerIndex:s});return r.actions.push({actionType:"init"}),r}function i0(t){const e={startingDeck:t.startingDeck,actions:[...t.actions]};let n=pm(e),r=!1;for(let i=0;i<n.hands.length;i++)n.hands[i].length===0&&(r=!0);return t.actions[t.actions.length-1].actionType!="end"&&(r||n.consecutivePasses===n.playerNames.length&&n.drawPile.length===0?e.actions.push({actionType:"end"}):n.playerNames[n.activePlayer].startsWith("Computer")?e.actions.push(e0(n,n.activePlayer)):n.tilesDrawnThisTurn<Ku&&n.drawPile.length>0?e.actions.push({actionType:"draw",playerIndex:n.activePlayer}):e.actions.push({actionType:"pass",playerIndex:n.activePlayer})),e}function s0(t){return new Promise(e=>setTimeout(e,t))}function o0(){const[t,e]=L.useState(!1);async function n(r){await navigator.clipboard.writeText(r),e(!0),await s0(2e3),e(!1)}return{copied:t,copyToClipboard:n}}function l0(t){const{copied:e,copyToClipboard:n}=o0();return y.jsx("div",{style:{cursor:e?"not-allowed":"pointer",fontSize:e?"1rem":"1.5rem",width:"150px"},onClick:()=>!e&&n("https://adamchawansky.github.io/triominoes/?gameID="+t.toCopy),children:e?"copied to clipboard!":": "+t.toCopy})}var Gd={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gm={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S=function(t,e){if(!t)throw Dr(e)},Dr=function(t){return new Error("Firebase Database ("+gm.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ym=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},a0=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],l=t[n++],a=((i&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(a&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Yu={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,l=o?t[i+1]:0,a=i+2<t.length,u=a?t[i+2]:0,d=s>>2,c=(s&3)<<4|l>>4;let h=(l&15)<<2|u>>6,g=u&63;a||(g=64,o||(h=64)),r.push(n[d],n[c],n[h],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(ym(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):a0(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const c=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||u==null||c==null)throw new u0;const h=s<<2|l>>4;if(r.push(h),u!==64){const g=l<<4&240|u>>2;if(r.push(g),c!==64){const _=u<<6&192|c;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class u0 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const _m=function(t){const e=ym(t);return Yu.encodeByteArray(e,!0)},eo=function(t){return _m(t).replace(/\./g,"")},La=function(t){try{return Yu.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c0(t){return vm(void 0,t)}function vm(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!d0(n)||(t[n]=vm(t[n],e[n]));return t}function d0(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h0(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f0=()=>h0().__FIREBASE_DEFAULTS__,p0=()=>{if(typeof process>"u"||typeof Gd>"u")return;const t=Gd.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},m0=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&La(t[1]);return e&&JSON.parse(e)},wm=()=>{try{return f0()||p0()||m0()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},g0=t=>{var e,n;return(n=(e=wm())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},y0=t=>{const e=g0(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Cm=()=>{var t;return(t=wm())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _0(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[eo(JSON.stringify(n)),eo(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v0(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Em(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(v0())}function w0(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function C0(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Sm(){return gm.NODE_ADMIN===!0}function xm(){try{return typeof indexedDB=="object"}catch{return!1}}function Im(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}function E0(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S0="FirebaseError";class Wn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=S0,Object.setPrototypeOf(this,Wn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,jo.prototype.create)}}class jo{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?x0(s,r):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new Wn(i,l,r)}}function x0(t,e){return t.replace(I0,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const I0=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pi(t){return JSON.parse(t)}function ae(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tm=function(t){let e={},n={},r={},i="";try{const s=t.split(".");e=Pi(La(s[0])||""),n=Pi(La(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}},T0=function(t){const e=Tm(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},k0=function(t){const e=Tm(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jt(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Sr(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Qd(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function to(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function no(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(Kd(s)&&Kd(o)){if(!no(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Kd(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N0(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let c=0;c<16;c++)r[c]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let c=0;c<16;c++)r[c]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let c=16;c<80;c++){const h=r[c-3]^r[c-8]^r[c-14]^r[c-16];r[c]=(h<<1|h>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],l=this.chain_[3],a=this.chain_[4],u,d;for(let c=0;c<80;c++){c<40?c<20?(u=l^s&(o^l),d=1518500249):(u=s^o^l,d=1859775393):c<60?(u=s&o|l&(s|o),d=2400959708):(u=s^o^l,d=3395469782);const h=(i<<5|i>>>27)+u+a+d+r[c]&4294967295;a=l,l=o,o=(s<<30|s>>>2)&4294967295,s=i,i=h}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+a&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}function qu(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R0=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,S(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},zo=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D0=1e3,A0=2,O0=4*60*60*1e3,L0=.5;function Yd(t,e=D0,n=A0){const r=e*Math.pow(n,t),i=Math.round(L0*r*(Math.random()-.5)*2);return Math.min(O0,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pn(t){return t&&t._delegate?t._delegate:t}class Mt{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vn="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M0{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Fo;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(F0(e))try{this.getOrInitializeService({instanceIdentifier:vn})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=vn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=vn){return this.instances.has(e)}getOptions(e=vn){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:b0(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=vn){return this.component?this.component.multipleInstances?e:vn:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function b0(t){return t===vn?void 0:t}function F0(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j0{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new M0(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var G;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(G||(G={}));const z0={debug:G.DEBUG,verbose:G.VERBOSE,info:G.INFO,warn:G.WARN,error:G.ERROR,silent:G.SILENT},U0=G.INFO,H0={[G.DEBUG]:"log",[G.VERBOSE]:"log",[G.INFO]:"info",[G.WARN]:"warn",[G.ERROR]:"error"},$0=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=H0[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Xu{constructor(e){this.name=e,this._logLevel=U0,this._logHandler=$0,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in G))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?z0[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,G.DEBUG,...e),this._logHandler(this,G.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,G.VERBOSE,...e),this._logHandler(this,G.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,G.INFO,...e),this._logHandler(this,G.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,G.WARN,...e),this._logHandler(this,G.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,G.ERROR,...e),this._logHandler(this,G.ERROR,...e)}}const W0=(t,e)=>e.some(n=>t instanceof n);let qd,Xd;function B0(){return qd||(qd=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function V0(){return Xd||(Xd=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const km=new WeakMap,Ma=new WeakMap,Nm=new WeakMap,kl=new WeakMap,Ju=new WeakMap;function G0(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(en(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&km.set(n,t)}).catch(()=>{}),Ju.set(e,t),e}function Q0(t){if(Ma.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Ma.set(t,e)}let ba={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Ma.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Nm.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return en(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function K0(t){ba=t(ba)}function Y0(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Nl(this),e,...n);return Nm.set(r,e.sort?e.sort():[e]),en(r)}:V0().includes(t)?function(...e){return t.apply(Nl(this),e),en(km.get(this))}:function(...e){return en(t.apply(Nl(this),e))}}function q0(t){return typeof t=="function"?Y0(t):(t instanceof IDBTransaction&&Q0(t),W0(t,B0())?new Proxy(t,ba):t)}function en(t){if(t instanceof IDBRequest)return G0(t);if(kl.has(t))return kl.get(t);const e=q0(t);return e!==t&&(kl.set(t,e),Ju.set(e,t)),e}const Nl=t=>Ju.get(t);function Pm(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),l=en(o);return r&&o.addEventListener("upgradeneeded",a=>{r(en(o.result),a.oldVersion,a.newVersion,en(o.transaction),a)}),n&&o.addEventListener("blocked",a=>n(a.oldVersion,a.newVersion,a)),l.then(a=>{s&&a.addEventListener("close",()=>s()),i&&a.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const X0=["get","getKey","getAll","getAllKeys","count"],J0=["put","add","delete","clear"],Pl=new Map;function Jd(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Pl.get(e))return Pl.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=J0.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||X0.includes(n)))return;const s=async function(o,...l){const a=this.transaction(o,i?"readwrite":"readonly");let u=a.store;return r&&(u=u.index(l.shift())),(await Promise.all([u[n](...l),i&&a.done]))[0]};return Pl.set(e,s),s}K0(t=>({...t,get:(e,n,r)=>Jd(e,n)||t.get(e,n,r),has:(e,n)=>!!Jd(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z0{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(ew(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function ew(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Fa="@firebase/app",Zd="0.10.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mn=new Xu("@firebase/app"),tw="@firebase/app-compat",nw="@firebase/analytics-compat",rw="@firebase/analytics",iw="@firebase/app-check-compat",sw="@firebase/app-check",ow="@firebase/auth",lw="@firebase/auth-compat",aw="@firebase/database",uw="@firebase/database-compat",cw="@firebase/functions",dw="@firebase/functions-compat",hw="@firebase/installations",fw="@firebase/installations-compat",pw="@firebase/messaging",mw="@firebase/messaging-compat",gw="@firebase/performance",yw="@firebase/performance-compat",_w="@firebase/remote-config",vw="@firebase/remote-config-compat",ww="@firebase/storage",Cw="@firebase/storage-compat",Ew="@firebase/firestore",Sw="@firebase/vertexai-preview",xw="@firebase/firestore-compat",Iw="firebase",Tw="10.12.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ja="[DEFAULT]",kw={[Fa]:"fire-core",[tw]:"fire-core-compat",[rw]:"fire-analytics",[nw]:"fire-analytics-compat",[sw]:"fire-app-check",[iw]:"fire-app-check-compat",[ow]:"fire-auth",[lw]:"fire-auth-compat",[aw]:"fire-rtdb",[uw]:"fire-rtdb-compat",[cw]:"fire-fn",[dw]:"fire-fn-compat",[hw]:"fire-iid",[fw]:"fire-iid-compat",[pw]:"fire-fcm",[mw]:"fire-fcm-compat",[gw]:"fire-perf",[yw]:"fire-perf-compat",[_w]:"fire-rc",[vw]:"fire-rc-compat",[ww]:"fire-gcs",[Cw]:"fire-gcs-compat",[Ew]:"fire-fst",[xw]:"fire-fst-compat",[Sw]:"fire-vertex","fire-js":"fire-js",[Iw]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ro=new Map,Nw=new Map,za=new Map;function eh(t,e){try{t.container.addComponent(e)}catch(n){Mn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ln(t){const e=t.name;if(za.has(e))return Mn.debug(`There were multiple attempts to register component ${e}.`),!1;za.set(e,t);for(const n of ro.values())eh(n,t);for(const n of Nw.values())eh(n,t);return!0}function Wi(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pw={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},tn=new jo("app","Firebase",Pw);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Mt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw tn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dw=Tw;function Rm(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:ja,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw tn.create("bad-app-name",{appName:String(i)});if(n||(n=Cm()),!n)throw tn.create("no-options");const s=ro.get(i);if(s){if(no(n,s.options)&&no(r,s.config))return s;throw tn.create("duplicate-app",{appName:i})}const o=new j0(i);for(const a of za.values())o.addComponent(a);const l=new Rw(n,r,o);return ro.set(i,l),l}function Dm(t=ja){const e=ro.get(t);if(!e&&t===ja&&Cm())return Rm();if(!e)throw tn.create("no-app",{appName:t});return e}function vt(t,e,n){var r;let i=(r=kw[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Mn.warn(l.join(" "));return}ln(new Mt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aw="firebase-heartbeat-database",Ow=1,Ri="firebase-heartbeat-store";let Rl=null;function Am(){return Rl||(Rl=Pm(Aw,Ow,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ri)}catch(n){console.warn(n)}}}}).catch(t=>{throw tn.create("idb-open",{originalErrorMessage:t.message})})),Rl}async function Lw(t){try{const n=(await Am()).transaction(Ri),r=await n.objectStore(Ri).get(Om(t));return await n.done,r}catch(e){if(e instanceof Wn)Mn.warn(e.message);else{const n=tn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Mn.warn(n.message)}}}async function th(t,e){try{const r=(await Am()).transaction(Ri,"readwrite");await r.objectStore(Ri).put(e,Om(t)),await r.done}catch(n){if(n instanceof Wn)Mn.warn(n.message);else{const r=tn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Mn.warn(r.message)}}}function Om(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mw=1024,bw=30*24*60*60*1e3;class Fw{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new zw(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=nh();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=bw}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=nh(),{heartbeatsToSend:r,unsentEntries:i}=jw(this._heartbeatsCache.heartbeats),s=eo(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function nh(){return new Date().toISOString().substring(0,10)}function jw(t,e=Mw){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),rh(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),rh(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class zw{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return xm()?Im().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Lw(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return th(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return th(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function rh(t){return eo(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uw(t){ln(new Mt("platform-logger",e=>new Z0(e),"PRIVATE")),ln(new Mt("heartbeat",e=>new Fw(e),"PRIVATE")),vt(Fa,Zd,t),vt(Fa,Zd,"esm2017"),vt("fire-js","")}Uw("");var ih={};const sh="@firebase/database",oh="1.0.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lm="";function Hw(t){Lm=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),ae(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Pi(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return jt(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mm=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new $w(e)}}catch{}return new Ww},xn=Mm("localStorage"),Ua=Mm("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hr=new Xu("@firebase/database"),Bw=function(){let t=1;return function(){return t++}}(),bm=function(t){const e=R0(t),n=new P0;n.update(e);const r=n.digest();return Yu.encodeByteArray(r)},Bi=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Bi.apply(null,r):typeof r=="object"?e+=ae(r):e+=r,e+=" "}return e};let Pn=null,lh=!0;const Vw=function(t,e){S(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(hr.logLevel=G.VERBOSE,Pn=hr.log.bind(hr),e&&Ua.set("logging_enabled",!0)):typeof t=="function"?Pn=t:(Pn=null,Ua.remove("logging_enabled"))},xe=function(...t){if(lh===!0&&(lh=!1,Pn===null&&Ua.get("logging_enabled")===!0&&Vw(!0)),Pn){const e=Bi.apply(null,t);Pn(e)}},Vi=function(t){return function(...e){xe(t,...e)}},Ha=function(...t){const e="FIREBASE INTERNAL ERROR: "+Bi(...t);hr.error(e)},bt=function(...t){const e=`FIREBASE FATAL ERROR: ${Bi(...t)}`;throw hr.error(e),new Error(e)},ze=function(...t){const e="FIREBASE WARNING: "+Bi(...t);hr.warn(e)},Gw=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&ze("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Fm=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},Qw=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},xr="[MIN_NAME]",bn="[MAX_NAME]",Ar=function(t,e){if(t===e)return 0;if(t===xr||e===bn)return-1;if(e===xr||t===bn)return 1;{const n=ah(t),r=ah(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},Kw=function(t,e){return t===e?0:t<e?-1:1},Br=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+ae(e))},Zu=function(t){if(typeof t!="object"||t===null)return ae(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=ae(e[r]),n+=":",n+=Zu(t[e[r]]);return n+="}",n},jm=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function He(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const zm=function(t){S(!Fm(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let i,s,o,l,a;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(l=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=l+r,o=Math.round(t*Math.pow(2,n-l)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));const u=[];for(a=n;a;a-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(a=e;a;a-=1)u.push(s%2?1:0),s=Math.floor(s/2);u.push(i?1:0),u.reverse();const d=u.join("");let c="";for(a=0;a<64;a+=8){let h=parseInt(d.substr(a,8),2).toString(16);h.length===1&&(h="0"+h),c=c+h}return c.toLowerCase()},Yw=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},qw=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function Xw(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const Jw=new RegExp("^-?(0*)\\d{1,10}$"),Zw=-2147483648,e1=2147483647,ah=function(t){if(Jw.test(t)){const e=Number(t);if(e>=Zw&&e<=e1)return e}return null},Or=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw ze("Exception was thrown by user callback.",n),e},Math.floor(0))}},t1=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},li=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){ze(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(xe("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ze(e)}}class fr{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}fr.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ec="5",Um="v",Hm="s",$m="r",Wm="f",Bm=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Vm="ls",Gm="p",$a="ac",Qm="websocket",Km="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{constructor(e,n,r,i,s=!1,o="",l=!1,a=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=l,this.isUsingEmulator=a,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=xn.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&xn.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function i1(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function qm(t,e,n){S(typeof e=="string","typeof type must == string"),S(typeof n=="object","typeof params must == object");let r;if(e===Qm)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===Km)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);i1(t)&&(n.ns=t.namespace);const i=[];return He(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{constructor(){this.counters_={}}incrementCounter(e,n=1){jt(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return c0(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dl={},Al={};function tc(t){const e=t.toString();return Dl[e]||(Dl[e]=new s1),Dl[e]}function o1(t,e){const n=t.toString();return Al[n]||(Al[n]=e()),Al[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Or(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uh="start",a1="close",u1="pLPCommand",c1="pRTLPCB",Xm="id",Jm="pw",Zm="ser",d1="cb",h1="seg",f1="ts",p1="d",m1="dframe",eg=1870,tg=30,g1=eg-tg,y1=25e3,_1=3e4;class sr{constructor(e,n,r,i,s,o,l){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=l,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Vi(e),this.stats_=tc(n),this.urlFn=a=>(this.appCheckToken&&(a[$a]=this.appCheckToken),qm(n,Km,a))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new l1(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(_1)),Qw(()=>{if(this.isClosed_)return;this.scriptTagHolder=new nc((...s)=>{const[o,l,a,u,d]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===uh)this.id=l,this.password=a;else if(o===a1)l?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(l,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,l]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,l)},()=>{this.onClosed_()},this.urlFn);const r={};r[uh]="t",r[Zm]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[d1]=this.scriptTagHolder.uniqueCallbackIdentifier),r[Um]=ec,this.transportSessionId&&(r[Hm]=this.transportSessionId),this.lastSessionId&&(r[Vm]=this.lastSessionId),this.applicationId&&(r[Gm]=this.applicationId),this.appCheckToken&&(r[$a]=this.appCheckToken),typeof location<"u"&&location.hostname&&Bm.test(location.hostname)&&(r[$m]=Wm);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){sr.forceAllow_=!0}static forceDisallow(){sr.forceDisallow_=!0}static isAvailable(){return sr.forceAllow_?!0:!sr.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!Yw()&&!qw()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=ae(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=_m(n),i=jm(r,g1);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[m1]="t",r[Xm]=e,r[Jm]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=ae(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class nc{constructor(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=Bw(),window[u1+this.uniqueCallbackIdentifier]=e,window[c1+this.uniqueCallbackIdentifier]=n,this.myIFrame=nc.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(l){xe("frame writing exception"),l.stack&&xe(l.stack),xe(l)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||xe("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[Xm]=this.myID,e[Jm]=this.myPW,e[Zm]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+tg+r.length<=eg;){const o=this.pendingSegs.shift();r=r+"&"+h1+i+"="+o.seg+"&"+f1+i+"="+o.ts+"&"+p1+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(y1)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{xe("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v1=16384,w1=45e3;let io=null;typeof MozWebSocket<"u"?io=MozWebSocket:typeof WebSocket<"u"&&(io=WebSocket);class ot{constructor(e,n,r,i,s,o,l){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Vi(this.connId),this.stats_=tc(n),this.connURL=ot.connectionURL_(n,o,l,i,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,i,s){const o={};return o[Um]=ec,typeof location<"u"&&location.hostname&&Bm.test(location.hostname)&&(o[$m]=Wm),n&&(o[Hm]=n),r&&(o[Vm]=r),i&&(o[$a]=i),s&&(o[Gm]=s),qm(e,Qm,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,xn.set("previous_websocket_failure",!0);try{let r;Sm(),this.mySock=new io(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){ot.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&io!==null&&!ot.forceDisallow_}static previouslyFailed(){return xn.isInMemoryStorage||xn.get("previous_websocket_failure")===!0}markConnectionHealthy(){xn.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=Pi(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(S(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=ae(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=jm(n,v1);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(w1))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}ot.responsesRequiredToBeHealthy=2;ot.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[sr,ot]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=ot&&ot.isAvailable();let r=n&&!ot.previouslyFailed();if(e.webSocketOnly&&(n||ze("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[ot];else{const i=this.transports_=[];for(const s of Di.ALL_TRANSPORTS)s&&s.isAvailable()&&i.push(s);Di.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Di.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C1=6e4,E1=5e3,S1=10*1024,x1=100*1024,Ol="t",ch="d",I1="s",dh="r",T1="e",hh="o",fh="a",ph="n",mh="p",k1="h";class N1{constructor(e,n,r,i,s,o,l,a,u,d){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=l,this.onDisconnect_=a,this.onKill_=u,this.lastSessionId=d,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Vi("c:"+this.id+":"),this.transportManager_=new Di(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=li(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>x1?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>S1?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Ol in e){const n=e[Ol];n===fh?this.upgradeIfSecondaryHealthy_():n===dh?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===hh&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Br("t",e),r=Br("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:mh,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:fh,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:ph,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Br("t",e),r=Br("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Br(Ol,e);if(ch in e){const r=e[ch];if(n===k1){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===ph){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===I1?this.onConnectionShutdown_(r):n===dh?this.onReset_(r):n===T1?Ha("Server Error: "+r):n===hh?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Ha("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),ec!==r&&ze("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),li(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(C1))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):li(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(E1))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:mh,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(xn.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ng{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{constructor(e){this.allowedEvents_=e,this.listeners_={},S(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){S(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so extends rg{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Em()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new so}getInitialEvent(e){return S(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gh=32,yh=768;class B{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function $(){return new B("")}function F(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function an(t){return t.pieces_.length-t.pieceNum_}function Q(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new B(t.pieces_,e)}function ig(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function P1(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function sg(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function og(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new B(e,0)}function ue(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof B)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new B(n,0)}function z(t){return t.pieceNum_>=t.pieces_.length}function ke(t,e){const n=F(t),r=F(e);if(n===null)return e;if(n===r)return ke(Q(t),Q(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function rc(t,e){if(an(t)!==an(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function lt(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(an(t)>an(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class R1{constructor(e,n){this.errorPrefix_=n,this.parts_=sg(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=zo(this.parts_[r]);lg(this)}}function D1(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=zo(e),lg(t)}function A1(t){const e=t.parts_.pop();t.byteLength_-=zo(e),t.parts_.length>0&&(t.byteLength_-=1)}function lg(t){if(t.byteLength_>yh)throw new Error(t.errorPrefix_+"has a key path longer than "+yh+" bytes ("+t.byteLength_+").");if(t.parts_.length>gh)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+gh+") or object contains a cycle "+wn(t))}function wn(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic extends rg{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new ic}getInitialEvent(e){return S(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vr=1e3,O1=60*5*1e3,_h=30*1e3,L1=1.3,M1=3e4,b1="server_kill",vh=3;class Rt extends ng{constructor(e,n,r,i,s,o,l,a){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=l,this.authOverride_=a,this.id=Rt.nextPersistentConnectionId_++,this.log_=Vi("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Vr,this.maxReconnectDelay_=O1,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,a&&!Sm())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");ic.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&so.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const i=++this.requestNumber_,s={r:i,a:e,b:n};this.log_(ae(s)),S(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[i]=r)}get(e){this.initConnection_();const n=new Fo,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const l=o.d;o.s==="ok"?n.resolve(l):n.reject(l)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(e,n,r,i){this.initConnection_();const s=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),S(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),S(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const l={onComplete:i,hashFn:n,query:e,tag:r};this.listens.get(o).set(s,l),this.connected_&&this.sendListen_(l)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);const s={p:r},o="q";e.tag&&(s.q=n._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(o,s,l=>{const a=l.d,u=l.s;Rt.warnOnListenWarnings_(a,n),(this.listens.get(r)&&this.listens.get(r).get(i))===e&&(this.log_("listen response",l),u!=="ok"&&this.removeListen_(r,i),e.onComplete&&e.onComplete(u,a))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&jt(e,"w")){const r=Sr(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();ze(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||k0(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=_h)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=T0(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,i=>{const s=i.s,o=i.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),S(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,e._queryObject,n)}sendUnlisten_(e,n,r,i){this.log_("Unlisten on "+e+" for "+n);const s={p:e},o="n";i&&(s.q=r,s.t=i),this.sendRequest(o,s)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,i){const s={p:n,d:r};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,o=>{i&&setTimeout(()=>{i(o.s,o.d)},Math.floor(0))})}put(e,n,r,i){this.putInternal("p",e,n,r,i)}merge(e,n,r,i){this.putInternal("m",e,n,r,i)}putInternal(e,n,r,i,s){this.initConnection_();const o={p:n,d:r};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:e,request:o,onComplete:i}),this.outstandingPutCount_++;const l=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(l):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(s.s,s.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+ae(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):Ha("Unrecognized action received from server: "+ae(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){S(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Vr,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Vr,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>M1&&(this.reconnectDelay_=Vr),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*L1)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+Rt.nextConnectionId_++,s=this.lastSessionId;let o=!1,l=null;const a=function(){l?l.close():(o=!0,r())},u=function(c){S(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(c)};this.realtime_={close:a,sendRequest:u};const d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[c,h]=await Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);o?xe("getToken() completed but was canceled"):(xe("getToken() completed. Creating connection."),this.authToken_=c&&c.accessToken,this.appCheckToken_=h&&h.token,l=new N1(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,g=>{ze(g+" ("+this.repoInfo_.toString()+")"),this.interrupt(b1)},s))}catch(c){this.log_("Failed to get token: "+c),o||(this.repoInfo_.nodeAdmin&&ze(c),a())}}}interrupt(e){xe("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){xe("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Qd(this.interruptReasons_)&&(this.reconnectDelay_=Vr,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(s=>Zu(s)).join("$"):r="default";const i=this.removeListen_(e,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,n){const r=new B(e).toString();let i;if(this.listens.has(r)){const s=this.listens.get(r);i=s.get(n),s.delete(n),s.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(e,n){xe("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=vh&&(this.reconnectDelay_=_h,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){xe("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=vh&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+Lm.replace(/\./g,"-")]=1,Em()?e["framework.cordova"]=1:C0()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=so.getInstance().currentlyOnline();return Qd(this.interruptReasons_)&&e}}Rt.nextPersistentConnectionId_=0;Rt.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new j(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new j(xr,e),i=new j(xr,n);return this.compare(r,i)!==0}minPost(){return j.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ms;class ag extends Uo{static get __EMPTY_NODE(){return ms}static set __EMPTY_NODE(e){ms=e}compare(e,n){return Ar(e.name,n.name)}isDefinedOn(e){throw Dr("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return j.MIN}maxPost(){return new j(bn,ms)}makePost(e,n){return S(typeof e=="string","KeyIndex indexValue must always be a string."),new j(e,ms)}toString(){return".key"}}const pr=new ag;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class me{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??me.RED,this.left=i??Me.EMPTY_NODE,this.right=s??Me.EMPTY_NODE}copy(e,n,r,i,s){return new me(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return Me.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,i;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return Me.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,me.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,me.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}me.RED=!0;me.BLACK=!1;class F1{copy(e,n,r,i,s){return this}insert(e,n,r){return new me(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Me{constructor(e,n=Me.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Me(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,me.BLACK,null,null))}remove(e){return new Me(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,me.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new gs(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new gs(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new gs(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new gs(this.root_,null,this.comparator_,!0,e)}}Me.EMPTY_NODE=new F1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j1(t,e){return Ar(t.name,e.name)}function sc(t,e){return Ar(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wa;function z1(t){Wa=t}const ug=function(t){return typeof t=="number"?"number:"+zm(t):"string:"+t},cg=function(t){if(t.isLeafNode()){const e=t.val();S(typeof e=="string"||typeof e=="number"||typeof e=="object"&&jt(e,".sv"),"Priority must be a string or number.")}else S(t===Wa||t.isEmpty(),"priority of unexpected type.");S(t===Wa||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wh;class fe{constructor(e,n=fe.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,S(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),cg(this.priorityNode_)}static set __childrenNodeConstructor(e){wh=e}static get __childrenNodeConstructor(){return wh}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new fe(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:fe.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return z(e)?this:F(e)===".priority"?this.priorityNode_:fe.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:fe.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=F(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(S(r!==".priority"||an(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,fe.__childrenNodeConstructor.EMPTY_NODE.updateChild(Q(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+ug(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=zm(this.value_):e+=this.value_,this.lazyHash_=bm(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===fe.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof fe.__childrenNodeConstructor?-1:(S(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,i=fe.VALUE_TYPE_ORDER.indexOf(n),s=fe.VALUE_TYPE_ORDER.indexOf(r);return S(i>=0,"Unknown leaf type: "+n),S(s>=0,"Unknown leaf type: "+r),i===s?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}fe.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dg,hg;function U1(t){dg=t}function H1(t){hg=t}class $1 extends Uo{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?Ar(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return j.MIN}maxPost(){return new j(bn,new fe("[PRIORITY-POST]",hg))}makePost(e,n){const r=dg(e);return new j(n,new fe("[PRIORITY-POST]",r))}toString(){return".priority"}}const ie=new $1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W1=Math.log(2);class B1{constructor(e){const n=s=>parseInt(Math.log(s)/W1,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const oo=function(t,e,n,r){t.sort(e);const i=function(a,u){const d=u-a;let c,h;if(d===0)return null;if(d===1)return c=t[a],h=n?n(c):c,new me(h,c.node,me.BLACK,null,null);{const g=parseInt(d/2,10)+a,_=i(a,g),v=i(g+1,u);return c=t[g],h=n?n(c):c,new me(h,c.node,me.BLACK,_,v)}},s=function(a){let u=null,d=null,c=t.length;const h=function(_,v){const k=c-_,p=c;c-=_;const f=i(k+1,p),m=t[k],w=n?n(m):m;g(new me(w,m.node,v,null,f))},g=function(_){u?(u.left=_,u=_):(d=_,u=_)};for(let _=0;_<a.count;++_){const v=a.nextBitIsOne(),k=Math.pow(2,a.count-(_+1));v?h(k,me.BLACK):(h(k,me.BLACK),h(k,me.RED))}return d},o=new B1(t.length),l=s(o);return new Me(r||e,l)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ll;const Gn={};class Nt{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return S(Gn&&ie,"ChildrenNode.ts has not been loaded"),Ll=Ll||new Nt({".priority":Gn},{".priority":ie}),Ll}get(e){const n=Sr(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Me?n:null}hasIndex(e){return jt(this.indexSet_,e.toString())}addIndex(e,n){S(e!==pr,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=n.getIterator(j.Wrap);let o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let l;i?l=oo(r,e.getCompare()):l=Gn;const a=e.toString(),u=Object.assign({},this.indexSet_);u[a]=e;const d=Object.assign({},this.indexes_);return d[a]=l,new Nt(d,u)}addToIndexes(e,n){const r=to(this.indexes_,(i,s)=>{const o=Sr(this.indexSet_,s);if(S(o,"Missing index implementation for "+s),i===Gn)if(o.isDefinedOn(e.node)){const l=[],a=n.getIterator(j.Wrap);let u=a.getNext();for(;u;)u.name!==e.name&&l.push(u),u=a.getNext();return l.push(e),oo(l,o.getCompare())}else return Gn;else{const l=n.get(e.name);let a=i;return l&&(a=a.remove(new j(e.name,l))),a.insert(e,e.node)}});return new Nt(r,this.indexSet_)}removeFromIndexes(e,n){const r=to(this.indexes_,i=>{if(i===Gn)return i;{const s=n.get(e.name);return s?i.remove(new j(e.name,s)):i}});return new Nt(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gr;class O{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&cg(this.priorityNode_),this.children_.isEmpty()&&S(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Gr||(Gr=new O(new Me(sc),null,Nt.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Gr}updatePriority(e){return this.children_.isEmpty()?this:new O(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Gr:n}}getChild(e){const n=F(e);return n===null?this:this.getImmediateChild(n).getChild(Q(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(S(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new j(e,n);let i,s;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));const o=i.isEmpty()?Gr:this.priorityNode_;return new O(i,o,s)}}updateChild(e,n){const r=F(e);if(r===null)return n;{S(F(e)!==".priority"||an(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(Q(e),n);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,i=0,s=!0;if(this.forEachChild(ie,(o,l)=>{n[o]=l.val(e),r++,s&&O.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):s=!1}),!e&&s&&i<2*r){const o=[];for(const l in n)o[l]=n[l];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+ug(this.getPriority().val())+":"),this.forEachChild(ie,(n,r)=>{const i=r.hash();i!==""&&(e+=":"+n+":"+i)}),this.lazyHash_=e===""?"":bm(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const i=this.resolveIndex_(r);if(i){const s=i.getPredecessorKey(new j(e,n));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new j(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new j(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,j.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)<0;)i.getNext(),s=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,j.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)>0;)i.getNext(),s=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Gi?-1:0}withIndex(e){if(e===pr||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new O(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===pr||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(ie),i=n.getIterator(ie);let s=r.getNext(),o=i.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=r.getNext(),o=i.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===pr?null:this.indexMap_.get(e.toString())}}O.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class V1 extends O{constructor(){super(new Me(sc),O.EMPTY_NODE,Nt.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return O.EMPTY_NODE}isEmpty(){return!1}}const Gi=new V1;Object.defineProperties(j,{MIN:{value:new j(xr,O.EMPTY_NODE)},MAX:{value:new j(bn,Gi)}});ag.__EMPTY_NODE=O.EMPTY_NODE;fe.__childrenNodeConstructor=O;z1(Gi);H1(Gi);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G1=!0;function ge(t,e=null){if(t===null)return O.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),S(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new fe(n,ge(e))}if(!(t instanceof Array)&&G1){const n=[];let r=!1;if(He(t,(o,l)=>{if(o.substring(0,1)!=="."){const a=ge(l);a.isEmpty()||(r=r||!a.getPriority().isEmpty(),n.push(new j(o,a)))}}),n.length===0)return O.EMPTY_NODE;const s=oo(n,j1,o=>o.name,sc);if(r){const o=oo(n,ie.getCompare());return new O(s,ge(e),new Nt({".priority":o},{".priority":ie}))}else return new O(s,ge(e),Nt.Default)}else{let n=O.EMPTY_NODE;return He(t,(r,i)=>{if(jt(t,r)&&r.substring(0,1)!=="."){const s=ge(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(ge(e))}}U1(ge);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1 extends Uo{constructor(e){super(),this.indexPath_=e,S(!z(e)&&F(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?Ar(e.name,n.name):s}makePost(e,n){const r=ge(e),i=O.EMPTY_NODE.updateChild(this.indexPath_,r);return new j(n,i)}maxPost(){const e=O.EMPTY_NODE.updateChild(this.indexPath_,Gi);return new j(bn,e)}toString(){return sg(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1 extends Uo{compare(e,n){const r=e.node.compareTo(n.node);return r===0?Ar(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return j.MIN}maxPost(){return j.MAX}makePost(e,n){const r=ge(e);return new j(n,r)}toString(){return".value"}}const Y1=new K1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fg(t){return{type:"value",snapshotNode:t}}function Ir(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Ai(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Oi(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function q1(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc{constructor(e){this.index_=e}updateChild(e,n,r,i,s,o){S(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const l=e.getImmediateChild(n);return l.getChild(i).equals(r.getChild(i))&&l.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(Ai(n,l)):S(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):l.isEmpty()?o.trackChildChange(Ir(n,r)):o.trackChildChange(Oi(n,r,l))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(ie,(i,s)=>{n.hasChild(i)||r.trackChildChange(Ai(i,s))}),n.isLeafNode()||n.forEachChild(ie,(i,s)=>{if(e.hasChild(i)){const o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(Oi(i,s,o))}else r.trackChildChange(Ir(i,s))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?O.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(e){this.indexedFilter_=new oc(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Li.getStartPost_(e),this.endPost_=Li.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,i,s,o){return this.matches(new j(n,r))||(r=O.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,s,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=O.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(O.EMPTY_NODE);const s=this;return n.forEachChild(ie,(o,l)=>{s.matches(new j(o,l))||(i=i.updateImmediateChild(o,O.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Li(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,i,s,o){return this.rangedFilter_.matches(new j(n,r))||(r=O.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,s,o):this.fullLimitUpdateChild_(e,n,r,s,o)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=O.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=O.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const l=s.getNext();if(this.withinDirectionalStart(l))if(this.withinDirectionalEnd(l))i=i.updateImmediateChild(l.name,l.node),o++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(O.EMPTY_NODE);let s;this.reverse_?s=i.getReverseIterator(this.index_):s=i.getIterator(this.index_);let o=0;for(;s.hasNext();){const l=s.getNext();o<this.limit_&&this.withinDirectionalStart(l)&&this.withinDirectionalEnd(l)?o++:i=i.updateImmediateChild(l.name,O.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,s){let o;if(this.reverse_){const c=this.index_.getCompare();o=(h,g)=>c(g,h)}else o=this.index_.getCompare();const l=e;S(l.numChildren()===this.limit_,"");const a=new j(n,r),u=this.reverse_?l.getFirstChild(this.index_):l.getLastChild(this.index_),d=this.rangedFilter_.matches(a);if(l.hasChild(n)){const c=l.getImmediateChild(n);let h=i.getChildAfterChild(this.index_,u,this.reverse_);for(;h!=null&&(h.name===n||l.hasChild(h.name));)h=i.getChildAfterChild(this.index_,h,this.reverse_);const g=h==null?1:o(h,a);if(d&&!r.isEmpty()&&g>=0)return s!=null&&s.trackChildChange(Oi(n,r,c)),l.updateImmediateChild(n,r);{s!=null&&s.trackChildChange(Ai(n,c));const v=l.updateImmediateChild(n,O.EMPTY_NODE);return h!=null&&this.rangedFilter_.matches(h)?(s!=null&&s.trackChildChange(Ir(h.name,h.node)),v.updateImmediateChild(h.name,h.node)):v}}else return r.isEmpty()?e:d&&o(u,a)>=0?(s!=null&&(s.trackChildChange(Ai(u.name,u.node)),s.trackChildChange(Ir(n,r))),l.updateImmediateChild(n,r).updateImmediateChild(u.name,O.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ie}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return S(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return S(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:xr}hasEnd(){return this.endSet_}getIndexEndValue(){return S(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return S(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:bn}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return S(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ie}copy(){const e=new lc;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function J1(t){return t.loadsAllData()?new oc(t.getIndex()):t.hasLimit()?new X1(t):new Li(t)}function Ch(t){const e={};if(t.isDefault())return e;let n;if(t.index_===ie?n="$priority":t.index_===Y1?n="$value":t.index_===pr?n="$key":(S(t.index_ instanceof Q1,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=ae(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=ae(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+ae(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=ae(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+ae(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function Eh(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==ie&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo extends ng{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Vi("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(S(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=lo.getListenId_(e,r),l={};this.listens_[o]=l;const a=Ch(e._queryParams);this.restRequest_(s+".json",a,(u,d)=>{let c=d;if(u===404&&(c=null,u=null),u===null&&this.onDataUpdate_(s,c,!1,r),Sr(this.listens_,o)===l){let h;u?u===401?h="permission_denied":h="rest_error:"+u:h="ok",i(h,null)}})}unlisten(e,n){const r=lo.getListenId_(e,n);delete this.listens_[r]}get(e){const n=Ch(e._queryParams),r=e._path.toString(),i=new Fo;return this.restRequest_(r+".json",n,(s,o)=>{let l=o;s===404&&(l=null,s=null),s===null?(this.onDataUpdate_(r,l,!1,null),i.resolve(l)):i.reject(new Error(l))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+N0(n);this.log_("Sending REST request for "+o);const l=new XMLHttpRequest;l.onreadystatechange=()=>{if(r&&l.readyState===4){this.log_("REST Response for "+o+" received. status:",l.status,"response:",l.responseText);let a=null;if(l.status>=200&&l.status<300){try{a=Pi(l.responseText)}catch{ze("Failed to parse JSON response for "+o+": "+l.responseText)}r(null,a)}else l.status!==401&&l.status!==404&&ze("Got unsuccessful REST response for "+o+" Status: "+l.status),r(l.status);r=null}},l.open("GET",o,!0),l.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{constructor(){this.rootNode_=O.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ao(){return{value:null,children:new Map}}function pg(t,e,n){if(z(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=F(e);t.children.has(r)||t.children.set(r,ao());const i=t.children.get(r);e=Q(e),pg(i,e,n)}}function Ba(t,e,n){t.value!==null?n(e,t.value):eC(t,(r,i)=>{const s=new B(e.toString()+"/"+r);Ba(i,s,n)})}function eC(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&He(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sh=10*1e3,nC=30*1e3,rC=5*60*1e3;class iC{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new tC(e);const r=Sh+(nC-Sh)*Math.random();li(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;He(e,(i,s)=>{s>0&&jt(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),li(this.reportStats_.bind(this),Math.floor(Math.random()*2*rC))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var at;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(at||(at={}));function mg(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function ac(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function uc(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=at.ACK_USER_WRITE,this.source=mg()}operationForChild(e){if(z(this.path)){if(this.affectedTree.value!=null)return S(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new B(e));return new uo($(),n,this.revert)}}else return S(F(this.path)===e,"operationForChild called for unrelated child."),new uo(Q(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{constructor(e,n){this.source=e,this.path=n,this.type=at.LISTEN_COMPLETE}operationForChild(e){return z(this.path)?new Mi(this.source,$()):new Mi(this.source,Q(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=at.OVERWRITE}operationForChild(e){return z(this.path)?new Fn(this.source,$(),this.snap.getImmediateChild(e)):new Fn(this.source,Q(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=at.MERGE}operationForChild(e){if(z(this.path)){const n=this.children.subtree(new B(e));return n.isEmpty()?null:n.value?new Fn(this.source,$(),n.value):new bi(this.source,$(),n)}else return S(F(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new bi(this.source,Q(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(z(e))return this.isFullyInitialized()&&!this.filtered_;const n=F(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function oC(t,e,n,r){const i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(q1(o.childName,o.snapshotNode))}),Qr(t,i,"child_removed",e,r,n),Qr(t,i,"child_added",e,r,n),Qr(t,i,"child_moved",s,r,n),Qr(t,i,"child_changed",e,r,n),Qr(t,i,"value",e,r,n),i}function Qr(t,e,n,r,i,s){const o=r.filter(l=>l.type===n);o.sort((l,a)=>aC(t,l,a)),o.forEach(l=>{const a=lC(t,l,s);i.forEach(u=>{u.respondsTo(l.type)&&e.push(u.createEvent(a,t.query_))})})}function lC(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function aC(t,e,n){if(e.childName==null||n.childName==null)throw Dr("Should only compare child_ events.");const r=new j(e.childName,e.snapshotNode),i=new j(n.childName,n.snapshotNode);return t.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ho(t,e){return{eventCache:t,serverCache:e}}function ai(t,e,n,r){return Ho(new un(e,n,r),t.serverCache)}function gg(t,e,n,r){return Ho(t.eventCache,new un(e,n,r))}function co(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function jn(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ml;const uC=()=>(Ml||(Ml=new Me(Kw)),Ml);class q{constructor(e,n=uC()){this.value=e,this.children=n}static fromObject(e){let n=new q(null);return He(e,(r,i)=>{n=n.set(new B(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:$(),value:this.value};if(z(e))return null;{const r=F(e),i=this.children.get(r);if(i!==null){const s=i.findRootMostMatchingPathAndValue(Q(e),n);return s!=null?{path:ue(new B(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(z(e))return this;{const n=F(e),r=this.children.get(n);return r!==null?r.subtree(Q(e)):new q(null)}}set(e,n){if(z(e))return new q(n,this.children);{const r=F(e),s=(this.children.get(r)||new q(null)).set(Q(e),n),o=this.children.insert(r,s);return new q(this.value,o)}}remove(e){if(z(e))return this.children.isEmpty()?new q(null):new q(null,this.children);{const n=F(e),r=this.children.get(n);if(r){const i=r.remove(Q(e));let s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new q(null):new q(this.value,s)}else return this}}get(e){if(z(e))return this.value;{const n=F(e),r=this.children.get(n);return r?r.get(Q(e)):null}}setTree(e,n){if(z(e))return n;{const r=F(e),s=(this.children.get(r)||new q(null)).setTree(Q(e),n);let o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new q(this.value,o)}}fold(e){return this.fold_($(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(ue(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,$(),n)}findOnPath_(e,n,r){const i=this.value?r(n,this.value):!1;if(i)return i;if(z(e))return null;{const s=F(e),o=this.children.get(s);return o?o.findOnPath_(Q(e),ue(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,$(),n)}foreachOnPath_(e,n,r){if(z(e))return this;{this.value&&r(n,this.value);const i=F(e),s=this.children.get(i);return s?s.foreachOnPath_(Q(e),ue(n,i),r):new q(null)}}foreach(e){this.foreach_($(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(ue(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e){this.writeTree_=e}static empty(){return new dt(new q(null))}}function ui(t,e,n){if(z(e))return new dt(new q(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const i=r.path;let s=r.value;const o=ke(i,e);return s=s.updateChild(o,n),new dt(t.writeTree_.set(i,s))}else{const i=new q(n),s=t.writeTree_.setTree(e,i);return new dt(s)}}}function xh(t,e,n){let r=t;return He(n,(i,s)=>{r=ui(r,ue(e,i),s)}),r}function Ih(t,e){if(z(e))return dt.empty();{const n=t.writeTree_.setTree(e,new q(null));return new dt(n)}}function Va(t,e){return Bn(t,e)!=null}function Bn(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(ke(n.path,e)):null}function Th(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(ie,(r,i)=>{e.push(new j(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new j(r,i.value))}),e}function nn(t,e){if(z(e))return t;{const n=Bn(t,e);return n!=null?new dt(new q(n)):new dt(t.writeTree_.subtree(e))}}function Ga(t){return t.writeTree_.isEmpty()}function Tr(t,e){return yg($(),t.writeTree_,e)}function yg(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(S(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=yg(ue(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(ue(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $o(t,e){return Cg(e,t)}function cC(t,e,n,r,i){S(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=ui(t.visibleWrites,e,n)),t.lastWriteId=r}function dC(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function hC(t,e){const n=t.allWrites.findIndex(l=>l.writeId===e);S(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){const l=t.allWrites[o];l.visible&&(o>=n&&fC(l,r.path)?i=!1:lt(r.path,l.path)&&(s=!0)),o--}if(i){if(s)return pC(t),!0;if(r.snap)t.visibleWrites=Ih(t.visibleWrites,r.path);else{const l=r.children;He(l,a=>{t.visibleWrites=Ih(t.visibleWrites,ue(r.path,a))})}return!0}else return!1}function fC(t,e){if(t.snap)return lt(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&lt(ue(t.path,n),e))return!0;return!1}function pC(t){t.visibleWrites=_g(t.allWrites,mC,$()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function mC(t){return t.visible}function _g(t,e,n){let r=dt.empty();for(let i=0;i<t.length;++i){const s=t[i];if(e(s)){const o=s.path;let l;if(s.snap)lt(n,o)?(l=ke(n,o),r=ui(r,l,s.snap)):lt(o,n)&&(l=ke(o,n),r=ui(r,$(),s.snap.getChild(l)));else if(s.children){if(lt(n,o))l=ke(n,o),r=xh(r,l,s.children);else if(lt(o,n))if(l=ke(o,n),z(l))r=xh(r,$(),s.children);else{const a=Sr(s.children,F(l));if(a){const u=a.getChild(Q(l));r=ui(r,$(),u)}}}else throw Dr("WriteRecord should have .snap or .children")}}return r}function vg(t,e,n,r,i){if(!r&&!i){const s=Bn(t.visibleWrites,e);if(s!=null)return s;{const o=nn(t.visibleWrites,e);if(Ga(o))return n;if(n==null&&!Va(o,$()))return null;{const l=n||O.EMPTY_NODE;return Tr(o,l)}}}else{const s=nn(t.visibleWrites,e);if(!i&&Ga(s))return n;if(!i&&n==null&&!Va(s,$()))return null;{const o=function(u){return(u.visible||i)&&(!r||!~r.indexOf(u.writeId))&&(lt(u.path,e)||lt(e,u.path))},l=_g(t.allWrites,o,e),a=n||O.EMPTY_NODE;return Tr(l,a)}}}function gC(t,e,n){let r=O.EMPTY_NODE;const i=Bn(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(ie,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){const s=nn(t.visibleWrites,e);return n.forEachChild(ie,(o,l)=>{const a=Tr(nn(s,new B(o)),l);r=r.updateImmediateChild(o,a)}),Th(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const s=nn(t.visibleWrites,e);return Th(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function yC(t,e,n,r,i){S(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=ue(e,n);if(Va(t.visibleWrites,s))return null;{const o=nn(t.visibleWrites,s);return Ga(o)?i.getChild(n):Tr(o,i.getChild(n))}}function _C(t,e,n,r){const i=ue(e,n),s=Bn(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){const o=nn(t.visibleWrites,i);return Tr(o,r.getNode().getImmediateChild(n))}else return null}function vC(t,e){return Bn(t.visibleWrites,e)}function wC(t,e,n,r,i,s,o){let l;const a=nn(t.visibleWrites,e),u=Bn(a,$());if(u!=null)l=u;else if(n!=null)l=Tr(a,n);else return[];if(l=l.withIndex(o),!l.isEmpty()&&!l.isLeafNode()){const d=[],c=o.getCompare(),h=s?l.getReverseIteratorFrom(r,o):l.getIteratorFrom(r,o);let g=h.getNext();for(;g&&d.length<i;)c(g,r)!==0&&d.push(g),g=h.getNext();return d}else return[]}function CC(){return{visibleWrites:dt.empty(),allWrites:[],lastWriteId:-1}}function ho(t,e,n,r){return vg(t.writeTree,t.treePath,e,n,r)}function cc(t,e){return gC(t.writeTree,t.treePath,e)}function kh(t,e,n,r){return yC(t.writeTree,t.treePath,e,n,r)}function fo(t,e){return vC(t.writeTree,ue(t.treePath,e))}function EC(t,e,n,r,i,s){return wC(t.writeTree,t.treePath,e,n,r,i,s)}function dc(t,e,n){return _C(t.writeTree,t.treePath,e,n)}function wg(t,e){return Cg(ue(t.treePath,e),t.writeTree)}function Cg(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;S(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),S(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,Oi(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,Ai(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,Ir(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,Oi(r,e.snapshotNode,i.oldSnap));else throw Dr("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const Eg=new xC;class hc{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new un(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return dc(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:jn(this.viewCache_),s=EC(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IC(t){return{filter:t}}function TC(t,e){S(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),S(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function kC(t,e,n,r,i){const s=new SC;let o,l;if(n.type===at.OVERWRITE){const u=n;u.source.fromUser?o=Qa(t,e,u.path,u.snap,r,i,s):(S(u.source.fromServer,"Unknown source."),l=u.source.tagged||e.serverCache.isFiltered()&&!z(u.path),o=po(t,e,u.path,u.snap,r,i,l,s))}else if(n.type===at.MERGE){const u=n;u.source.fromUser?o=PC(t,e,u.path,u.children,r,i,s):(S(u.source.fromServer,"Unknown source."),l=u.source.tagged||e.serverCache.isFiltered(),o=Ka(t,e,u.path,u.children,r,i,l,s))}else if(n.type===at.ACK_USER_WRITE){const u=n;u.revert?o=AC(t,e,u.path,r,i,s):o=RC(t,e,u.path,u.affectedTree,r,i,s)}else if(n.type===at.LISTEN_COMPLETE)o=DC(t,e,n.path,r,s);else throw Dr("Unknown operation type: "+n.type);const a=s.getChanges();return NC(e,o,a),{viewCache:o,changes:a}}function NC(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=co(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(fg(co(e)))}}function Sg(t,e,n,r,i,s){const o=e.eventCache;if(fo(r,n)!=null)return e;{let l,a;if(z(n))if(S(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const u=jn(e),d=u instanceof O?u:O.EMPTY_NODE,c=cc(r,d);l=t.filter.updateFullNode(e.eventCache.getNode(),c,s)}else{const u=ho(r,jn(e));l=t.filter.updateFullNode(e.eventCache.getNode(),u,s)}else{const u=F(n);if(u===".priority"){S(an(n)===1,"Can't have a priority with additional path components");const d=o.getNode();a=e.serverCache.getNode();const c=kh(r,n,d,a);c!=null?l=t.filter.updatePriority(d,c):l=o.getNode()}else{const d=Q(n);let c;if(o.isCompleteForChild(u)){a=e.serverCache.getNode();const h=kh(r,n,o.getNode(),a);h!=null?c=o.getNode().getImmediateChild(u).updateChild(d,h):c=o.getNode().getImmediateChild(u)}else c=dc(r,u,e.serverCache);c!=null?l=t.filter.updateChild(o.getNode(),u,c,d,i,s):l=o.getNode()}}return ai(e,l,o.isFullyInitialized()||z(n),t.filter.filtersNodes())}}function po(t,e,n,r,i,s,o,l){const a=e.serverCache;let u;const d=o?t.filter:t.filter.getIndexedFilter();if(z(n))u=d.updateFullNode(a.getNode(),r,null);else if(d.filtersNodes()&&!a.isFiltered()){const g=a.getNode().updateChild(n,r);u=d.updateFullNode(a.getNode(),g,null)}else{const g=F(n);if(!a.isCompleteForPath(n)&&an(n)>1)return e;const _=Q(n),k=a.getNode().getImmediateChild(g).updateChild(_,r);g===".priority"?u=d.updatePriority(a.getNode(),k):u=d.updateChild(a.getNode(),g,k,_,Eg,null)}const c=gg(e,u,a.isFullyInitialized()||z(n),d.filtersNodes()),h=new hc(i,c,s);return Sg(t,c,n,i,h,l)}function Qa(t,e,n,r,i,s,o){const l=e.eventCache;let a,u;const d=new hc(i,e,s);if(z(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,o),a=ai(e,u,!0,t.filter.filtersNodes());else{const c=F(n);if(c===".priority")u=t.filter.updatePriority(e.eventCache.getNode(),r),a=ai(e,u,l.isFullyInitialized(),l.isFiltered());else{const h=Q(n),g=l.getNode().getImmediateChild(c);let _;if(z(h))_=r;else{const v=d.getCompleteChild(c);v!=null?ig(h)===".priority"&&v.getChild(og(h)).isEmpty()?_=v:_=v.updateChild(h,r):_=O.EMPTY_NODE}if(g.equals(_))a=e;else{const v=t.filter.updateChild(l.getNode(),c,_,h,d,o);a=ai(e,v,l.isFullyInitialized(),t.filter.filtersNodes())}}}return a}function Nh(t,e){return t.eventCache.isCompleteForChild(e)}function PC(t,e,n,r,i,s,o){let l=e;return r.foreach((a,u)=>{const d=ue(n,a);Nh(e,F(d))&&(l=Qa(t,l,d,u,i,s,o))}),r.foreach((a,u)=>{const d=ue(n,a);Nh(e,F(d))||(l=Qa(t,l,d,u,i,s,o))}),l}function Ph(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function Ka(t,e,n,r,i,s,o,l){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let a=e,u;z(n)?u=r:u=new q(null).setTree(n,r);const d=e.serverCache.getNode();return u.children.inorderTraversal((c,h)=>{if(d.hasChild(c)){const g=e.serverCache.getNode().getImmediateChild(c),_=Ph(t,g,h);a=po(t,a,new B(c),_,i,s,o,l)}}),u.children.inorderTraversal((c,h)=>{const g=!e.serverCache.isCompleteForChild(c)&&h.value===null;if(!d.hasChild(c)&&!g){const _=e.serverCache.getNode().getImmediateChild(c),v=Ph(t,_,h);a=po(t,a,new B(c),v,i,s,o,l)}}),a}function RC(t,e,n,r,i,s,o){if(fo(i,n)!=null)return e;const l=e.serverCache.isFiltered(),a=e.serverCache;if(r.value!=null){if(z(n)&&a.isFullyInitialized()||a.isCompleteForPath(n))return po(t,e,n,a.getNode().getChild(n),i,s,l,o);if(z(n)){let u=new q(null);return a.getNode().forEachChild(pr,(d,c)=>{u=u.set(new B(d),c)}),Ka(t,e,n,u,i,s,l,o)}else return e}else{let u=new q(null);return r.foreach((d,c)=>{const h=ue(n,d);a.isCompleteForPath(h)&&(u=u.set(d,a.getNode().getChild(h)))}),Ka(t,e,n,u,i,s,l,o)}}function DC(t,e,n,r,i){const s=e.serverCache,o=gg(e,s.getNode(),s.isFullyInitialized()||z(n),s.isFiltered());return Sg(t,o,n,r,Eg,i)}function AC(t,e,n,r,i,s){let o;if(fo(r,n)!=null)return e;{const l=new hc(r,e,i),a=e.eventCache.getNode();let u;if(z(n)||F(n)===".priority"){let d;if(e.serverCache.isFullyInitialized())d=ho(r,jn(e));else{const c=e.serverCache.getNode();S(c instanceof O,"serverChildren would be complete if leaf node"),d=cc(r,c)}d=d,u=t.filter.updateFullNode(a,d,s)}else{const d=F(n);let c=dc(r,d,e.serverCache);c==null&&e.serverCache.isCompleteForChild(d)&&(c=a.getImmediateChild(d)),c!=null?u=t.filter.updateChild(a,d,c,Q(n),l,s):e.eventCache.getNode().hasChild(d)?u=t.filter.updateChild(a,d,O.EMPTY_NODE,Q(n),l,s):u=a,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=ho(r,jn(e)),o.isLeafNode()&&(u=t.filter.updateFullNode(u,o,s)))}return o=e.serverCache.isFullyInitialized()||fo(r,$())!=null,ai(e,u,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new oc(r.getIndex()),s=J1(r);this.processor_=IC(s);const o=n.serverCache,l=n.eventCache,a=i.updateFullNode(O.EMPTY_NODE,o.getNode(),null),u=s.updateFullNode(O.EMPTY_NODE,l.getNode(),null),d=new un(a,o.isFullyInitialized(),i.filtersNodes()),c=new un(u,l.isFullyInitialized(),s.filtersNodes());this.viewCache_=Ho(c,d),this.eventGenerator_=new sC(this.query_)}get query(){return this.query_}}function LC(t){return t.viewCache_.serverCache.getNode()}function MC(t){return co(t.viewCache_)}function bC(t,e){const n=jn(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!z(e)&&!n.getImmediateChild(F(e)).isEmpty())?n.getChild(e):null}function Rh(t){return t.eventRegistrations_.length===0}function FC(t,e){t.eventRegistrations_.push(e)}function Dh(t,e,n){const r=[];if(n){S(e==null,"A cancel should cancel all event registrations.");const i=t.query._path;t.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(n,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<t.eventRegistrations_.length;++s){const o=t.eventRegistrations_[s];if(!o.matches(e))i.push(o);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(s+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function Ah(t,e,n,r){e.type===at.MERGE&&e.source.queryId!==null&&(S(jn(t.viewCache_),"We should always have a full cache before handling merges"),S(co(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,s=kC(t.processor_,i,e,n,r);return TC(t.processor_,s.viewCache),S(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,xg(t,s.changes,s.viewCache.eventCache.getNode(),null)}function jC(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(ie,(s,o)=>{r.push(Ir(s,o))}),n.isFullyInitialized()&&r.push(fg(n.getNode())),xg(t,r,n.getNode(),e)}function xg(t,e,n,r){const i=r?[r]:t.eventRegistrations_;return oC(t.eventGenerator_,e,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mo;class Ig{constructor(){this.views=new Map}}function zC(t){S(!mo,"__referenceConstructor has already been defined"),mo=t}function UC(){return S(mo,"Reference.ts has not been loaded"),mo}function HC(t){return t.views.size===0}function fc(t,e,n,r){const i=e.source.queryId;if(i!==null){const s=t.views.get(i);return S(s!=null,"SyncTree gave us an op for an invalid query."),Ah(s,e,n,r)}else{let s=[];for(const o of t.views.values())s=s.concat(Ah(o,e,n,r));return s}}function Tg(t,e,n,r,i){const s=e._queryIdentifier,o=t.views.get(s);if(!o){let l=ho(n,i?r:null),a=!1;l?a=!0:r instanceof O?(l=cc(n,r),a=!1):(l=O.EMPTY_NODE,a=!1);const u=Ho(new un(l,a,!1),new un(r,i,!1));return new OC(e,u)}return o}function $C(t,e,n,r,i,s){const o=Tg(t,e,r,i,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),FC(o,n),jC(o,n)}function WC(t,e,n,r){const i=e._queryIdentifier,s=[];let o=[];const l=cn(t);if(i==="default")for(const[a,u]of t.views.entries())o=o.concat(Dh(u,n,r)),Rh(u)&&(t.views.delete(a),u.query._queryParams.loadsAllData()||s.push(u.query));else{const a=t.views.get(i);a&&(o=o.concat(Dh(a,n,r)),Rh(a)&&(t.views.delete(i),a.query._queryParams.loadsAllData()||s.push(a.query)))}return l&&!cn(t)&&s.push(new(UC())(e._repo,e._path)),{removed:s,events:o}}function kg(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function rn(t,e){let n=null;for(const r of t.views.values())n=n||bC(r,e);return n}function Ng(t,e){if(e._queryParams.loadsAllData())return Wo(t);{const r=e._queryIdentifier;return t.views.get(r)}}function Pg(t,e){return Ng(t,e)!=null}function cn(t){return Wo(t)!=null}function Wo(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let go;function BC(t){S(!go,"__referenceConstructor has already been defined"),go=t}function VC(){return S(go,"Reference.ts has not been loaded"),go}let GC=1;class Oh{constructor(e){this.listenProvider_=e,this.syncPointTree_=new q(null),this.pendingWriteTree_=CC(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Rg(t,e,n,r,i){return cC(t.pendingWriteTree_,e,n,r,i),i?Ki(t,new Fn(mg(),e,n)):[]}function In(t,e,n=!1){const r=dC(t.pendingWriteTree_,e);if(hC(t.pendingWriteTree_,e)){let s=new q(null);return r.snap!=null?s=s.set($(),!0):He(r.children,o=>{s=s.set(new B(o),!0)}),Ki(t,new uo(r.path,s,n))}else return[]}function Qi(t,e,n){return Ki(t,new Fn(ac(),e,n))}function QC(t,e,n){const r=q.fromObject(n);return Ki(t,new bi(ac(),e,r))}function KC(t,e){return Ki(t,new Mi(ac(),e))}function YC(t,e,n){const r=mc(t,n);if(r){const i=gc(r),s=i.path,o=i.queryId,l=ke(s,e),a=new Mi(uc(o),l);return yc(t,s,a)}else return[]}function yo(t,e,n,r,i=!1){const s=e._path,o=t.syncPointTree_.get(s);let l=[];if(o&&(e._queryIdentifier==="default"||Pg(o,e))){const a=WC(o,e,n,r);HC(o)&&(t.syncPointTree_=t.syncPointTree_.remove(s));const u=a.removed;if(l=a.events,!i){const d=u.findIndex(h=>h._queryParams.loadsAllData())!==-1,c=t.syncPointTree_.findOnPath(s,(h,g)=>cn(g));if(d&&!c){const h=t.syncPointTree_.subtree(s);if(!h.isEmpty()){const g=JC(h);for(let _=0;_<g.length;++_){const v=g[_],k=v.query,p=Lg(t,v);t.listenProvider_.startListening(ci(k),Fi(t,k),p.hashFn,p.onComplete)}}}!c&&u.length>0&&!r&&(d?t.listenProvider_.stopListening(ci(e),null):u.forEach(h=>{const g=t.queryToTagMap.get(Bo(h));t.listenProvider_.stopListening(ci(h),g)}))}ZC(t,u)}return l}function Dg(t,e,n,r){const i=mc(t,r);if(i!=null){const s=gc(i),o=s.path,l=s.queryId,a=ke(o,e),u=new Fn(uc(l),a,n);return yc(t,o,u)}else return[]}function qC(t,e,n,r){const i=mc(t,r);if(i){const s=gc(i),o=s.path,l=s.queryId,a=ke(o,e),u=q.fromObject(n),d=new bi(uc(l),a,u);return yc(t,o,d)}else return[]}function Ya(t,e,n,r=!1){const i=e._path;let s=null,o=!1;t.syncPointTree_.foreachOnPath(i,(h,g)=>{const _=ke(h,i);s=s||rn(g,_),o=o||cn(g)});let l=t.syncPointTree_.get(i);l?(o=o||cn(l),s=s||rn(l,$())):(l=new Ig,t.syncPointTree_=t.syncPointTree_.set(i,l));let a;s!=null?a=!0:(a=!1,s=O.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((g,_)=>{const v=rn(_,$());v&&(s=s.updateImmediateChild(g,v))}));const u=Pg(l,e);if(!u&&!e._queryParams.loadsAllData()){const h=Bo(e);S(!t.queryToTagMap.has(h),"View does not exist, but we have a tag");const g=eE();t.queryToTagMap.set(h,g),t.tagToQueryMap.set(g,h)}const d=$o(t.pendingWriteTree_,i);let c=$C(l,e,n,d,s,a);if(!u&&!o&&!r){const h=Ng(l,e);c=c.concat(tE(t,e,h))}return c}function pc(t,e,n){const i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,l)=>{const a=ke(o,e),u=rn(l,a);if(u)return u});return vg(i,e,s,n,!0)}function XC(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(u,d)=>{const c=ke(u,n);r=r||rn(d,c)});let i=t.syncPointTree_.get(n);i?r=r||rn(i,$()):(i=new Ig,t.syncPointTree_=t.syncPointTree_.set(n,i));const s=r!=null,o=s?new un(r,!0,!1):null,l=$o(t.pendingWriteTree_,e._path),a=Tg(i,e,l,s?o.getNode():O.EMPTY_NODE,s);return MC(a)}function Ki(t,e){return Ag(e,t.syncPointTree_,null,$o(t.pendingWriteTree_,$()))}function Ag(t,e,n,r){if(z(t.path))return Og(t,e,n,r);{const i=e.get($());n==null&&i!=null&&(n=rn(i,$()));let s=[];const o=F(t.path),l=t.operationForChild(o),a=e.children.get(o);if(a&&l){const u=n?n.getImmediateChild(o):null,d=wg(r,o);s=s.concat(Ag(l,a,u,d))}return i&&(s=s.concat(fc(i,t,r,n))),s}}function Og(t,e,n,r){const i=e.get($());n==null&&i!=null&&(n=rn(i,$()));let s=[];return e.children.inorderTraversal((o,l)=>{const a=n?n.getImmediateChild(o):null,u=wg(r,o),d=t.operationForChild(o);d&&(s=s.concat(Og(d,l,a,u)))}),i&&(s=s.concat(fc(i,t,r,n))),s}function Lg(t,e){const n=e.query,r=Fi(t,n);return{hashFn:()=>(LC(e)||O.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?YC(t,n._path,r):KC(t,n._path);{const s=Xw(i,n);return yo(t,n,null,s)}}}}function Fi(t,e){const n=Bo(e);return t.queryToTagMap.get(n)}function Bo(t){return t._path.toString()+"$"+t._queryIdentifier}function mc(t,e){return t.tagToQueryMap.get(e)}function gc(t){const e=t.indexOf("$");return S(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new B(t.substr(0,e))}}function yc(t,e,n){const r=t.syncPointTree_.get(e);S(r,"Missing sync point for query tag that we're tracking");const i=$o(t.pendingWriteTree_,e);return fc(r,n,i,null)}function JC(t){return t.fold((e,n,r)=>{if(n&&cn(n))return[Wo(n)];{let i=[];return n&&(i=kg(n)),He(r,(s,o)=>{i=i.concat(o)}),i}})}function ci(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(VC())(t._repo,t._path):t}function ZC(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const i=Bo(r),s=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(s)}}}function eE(){return GC++}function tE(t,e,n){const r=e._path,i=Fi(t,e),s=Lg(t,n),o=t.listenProvider_.startListening(ci(e),i,s.hashFn,s.onComplete),l=t.syncPointTree_.subtree(r);if(i)S(!cn(l.value),"If we're adding a query, it shouldn't be shadowed");else{const a=l.fold((u,d,c)=>{if(!z(u)&&d&&cn(d))return[Wo(d).query];{let h=[];return d&&(h=h.concat(kg(d).map(g=>g.query))),He(c,(g,_)=>{h=h.concat(_)}),h}});for(let u=0;u<a.length;++u){const d=a[u];t.listenProvider_.stopListening(ci(d),Fi(t,d))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new _c(n)}node(){return this.node_}}class vc{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=ue(this.path_,e);return new vc(this.syncTree_,n)}node(){return pc(this.syncTree_,this.path_)}}const nE=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},Lh=function(t,e,n){if(!t||typeof t!="object")return t;if(S(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return rE(t[".sv"],e,n);if(typeof t[".sv"]=="object")return iE(t[".sv"],e);S(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},rE=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:S(!1,"Unexpected server value: "+t)}},iE=function(t,e,n){t.hasOwnProperty("increment")||S(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&S(!1,"Unexpected increment value: "+r);const i=e.node();if(S(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return typeof o!="number"?r:o+r},sE=function(t,e,n,r){return wc(e,new vc(n,t),r)},Mg=function(t,e,n){return wc(t,new _c(e),n)};function wc(t,e,n){const r=t.getPriority().val(),i=Lh(r,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const o=t,l=Lh(o.getValue(),e,n);return l!==o.getValue()||i!==o.getPriority().val()?new fe(l,ge(i)):t}else{const o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new fe(i))),o.forEachChild(ie,(l,a)=>{const u=wc(a,e.getImmediateChild(l),n);u!==a&&(s=s.updateImmediateChild(l,u))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function Ec(t,e){let n=e instanceof B?e:new B(e),r=t,i=F(n);for(;i!==null;){const s=Sr(r.node.children,i)||{children:{},childCount:0};r=new Cc(i,r,s),n=Q(n),i=F(n)}return r}function Lr(t){return t.node.value}function bg(t,e){t.node.value=e,qa(t)}function Fg(t){return t.node.childCount>0}function oE(t){return Lr(t)===void 0&&!Fg(t)}function Vo(t,e){He(t.node.children,(n,r)=>{e(new Cc(n,t,r))})}function jg(t,e,n,r){n&&!r&&e(t),Vo(t,i=>{jg(i,e,!0,r)}),n&&r&&e(t)}function lE(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Yi(t){return new B(t.parent===null?t.name:Yi(t.parent)+"/"+t.name)}function qa(t){t.parent!==null&&aE(t.parent,t.name,t)}function aE(t,e,n){const r=oE(n),i=jt(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,qa(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,qa(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uE=/[\[\].#$\/\u0000-\u001F\u007F]/,cE=/[\[\].#$\u0000-\u001F\u007F]/,bl=10*1024*1024,zg=function(t){return typeof t=="string"&&t.length!==0&&!uE.test(t)},Ug=function(t){return typeof t=="string"&&t.length!==0&&!cE.test(t)},dE=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Ug(t)},hE=function(t,e,n,r){r&&e===void 0||Sc(qu(t,"value"),e,n)},Sc=function(t,e,n){const r=n instanceof B?new R1(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+wn(r));if(typeof e=="function")throw new Error(t+"contains a function "+wn(r)+" with contents = "+e.toString());if(Fm(e))throw new Error(t+"contains "+e.toString()+" "+wn(r));if(typeof e=="string"&&e.length>bl/3&&zo(e)>bl)throw new Error(t+"contains a string greater than "+bl+" utf8 bytes "+wn(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(He(e,(o,l)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!zg(o)))throw new Error(t+" contains an invalid key ("+o+") "+wn(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);D1(r,o),Sc(t,l,r),A1(r)}),i&&s)throw new Error(t+' contains ".value" child '+wn(r)+" in addition to actual children.")}},Hg=function(t,e,n,r){if(!(r&&n===void 0)&&!Ug(n))throw new Error(qu(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},fE=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Hg(t,e,n,r)},pE=function(t,e){if(F(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},mE=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!zg(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!dE(n))throw new Error(qu(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gE{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function xc(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();n!==null&&!rc(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function $g(t,e,n){xc(t,n),Wg(t,r=>rc(r,e))}function wt(t,e,n){xc(t,n),Wg(t,r=>lt(r,e)||lt(e,r))}function Wg(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];if(i){const s=i.path;e(s)?(yE(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function yE(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();Pn&&xe("event: "+n.toString()),Or(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _E="repo_interrupt",vE=25;class wE{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new gE,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=ao(),this.transactionQueueTree_=new Cc,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function CE(t,e,n){if(t.stats_=tc(t.repoInfo_),t.forceRestClient_||t1())t.server_=new lo(t.repoInfo_,(r,i,s,o)=>{Mh(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>bh(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ae(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Rt(t.repoInfo_,e,(r,i,s,o)=>{Mh(t,r,i,s,o)},r=>{bh(t,r)},r=>{SE(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=o1(t.repoInfo_,()=>new iC(t.stats_,t.server_)),t.infoData_=new Z1,t.infoSyncTree_=new Oh({startListening:(r,i,s,o)=>{let l=[];const a=t.infoData_.getNode(r._path);return a.isEmpty()||(l=Qi(t.infoSyncTree_,r._path,a),setTimeout(()=>{o("ok")},0)),l},stopListening:()=>{}}),Tc(t,"connected",!1),t.serverSyncTree_=new Oh({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(l,a)=>{const u=o(l,a);wt(t.eventQueue_,r._path,u)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function EE(t){const n=t.infoData_.getNode(new B(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function Ic(t){return nE({timestamp:EE(t)})}function Mh(t,e,n,r,i){t.dataUpdateCount++;const s=new B(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){const a=to(n,u=>ge(u));o=qC(t.serverSyncTree_,s,a,i)}else{const a=ge(n);o=Dg(t.serverSyncTree_,s,a,i)}else if(r){const a=to(n,u=>ge(u));o=QC(t.serverSyncTree_,s,a)}else{const a=ge(n);o=Qi(t.serverSyncTree_,s,a)}let l=s;o.length>0&&(l=Qo(t,s)),wt(t.eventQueue_,l,o)}function bh(t,e){Tc(t,"connected",e),e===!1&&TE(t)}function SE(t,e){He(e,(n,r)=>{Tc(t,n,r)})}function Tc(t,e,n){const r=new B("/.info/"+e),i=ge(n);t.infoData_.updateSnapshot(r,i);const s=Qi(t.infoSyncTree_,r,i);wt(t.eventQueue_,r,s)}function Bg(t){return t.nextWriteId_++}function xE(t,e,n){const r=XC(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(i=>{const s=ge(i).withIndex(e._queryParams.getIndex());Ya(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=Qi(t.serverSyncTree_,e._path,s);else{const l=Fi(t.serverSyncTree_,e);o=Dg(t.serverSyncTree_,e._path,s,l)}return wt(t.eventQueue_,e._path,o),yo(t.serverSyncTree_,e,n,null,!0),s},i=>(Go(t,"get for query "+ae(e)+" failed: "+i),Promise.reject(new Error(i))))}function IE(t,e,n,r,i){Go(t,"set",{path:e.toString(),value:n,priority:r});const s=Ic(t),o=ge(n,r),l=pc(t.serverSyncTree_,e),a=Mg(o,l,s),u=Bg(t),d=Rg(t.serverSyncTree_,e,a,u,!0);xc(t.eventQueue_,d),t.server_.put(e.toString(),o.val(!0),(h,g)=>{const _=h==="ok";_||ze("set at "+e+" failed: "+h);const v=In(t.serverSyncTree_,u,!_);wt(t.eventQueue_,e,v),PE(t,i,h,g)});const c=Yg(t,e);Qo(t,c),wt(t.eventQueue_,c,[])}function TE(t){Go(t,"onDisconnectEvents");const e=Ic(t),n=ao();Ba(t.onDisconnect_,$(),(i,s)=>{const o=sE(i,s,t.serverSyncTree_,e);pg(n,i,o)});let r=[];Ba(n,$(),(i,s)=>{r=r.concat(Qi(t.serverSyncTree_,i,s));const o=Yg(t,i);Qo(t,o)}),t.onDisconnect_=ao(),wt(t.eventQueue_,$(),r)}function kE(t,e,n){let r;F(e._path)===".info"?r=Ya(t.infoSyncTree_,e,n):r=Ya(t.serverSyncTree_,e,n),$g(t.eventQueue_,e._path,r)}function Fh(t,e,n){let r;F(e._path)===".info"?r=yo(t.infoSyncTree_,e,n):r=yo(t.serverSyncTree_,e,n),$g(t.eventQueue_,e._path,r)}function NE(t){t.persistentConnection_&&t.persistentConnection_.interrupt(_E)}function Go(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),xe(n,...e)}function PE(t,e,n,r){e&&Or(()=>{if(n==="ok")e(null);else{const i=(n||"error").toUpperCase();let s=i;r&&(s+=": "+r);const o=new Error(s);o.code=i,e(o)}})}function Vg(t,e,n){return pc(t.serverSyncTree_,e,n)||O.EMPTY_NODE}function kc(t,e=t.transactionQueueTree_){if(e||Ko(t,e),Lr(e)){const n=Qg(t,e);S(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&RE(t,Yi(e),n)}else Fg(e)&&Vo(e,n=>{kc(t,n)})}function RE(t,e,n){const r=n.map(u=>u.currentWriteId),i=Vg(t,e,r);let s=i;const o=i.hash();for(let u=0;u<n.length;u++){const d=n[u];S(d.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),d.status=1,d.retryCount++;const c=ke(e,d.path);s=s.updateChild(c,d.currentOutputSnapshotRaw)}const l=s.val(!0),a=e;t.server_.put(a.toString(),l,u=>{Go(t,"transaction put response",{path:a.toString(),status:u});let d=[];if(u==="ok"){const c=[];for(let h=0;h<n.length;h++)n[h].status=2,d=d.concat(In(t.serverSyncTree_,n[h].currentWriteId)),n[h].onComplete&&c.push(()=>n[h].onComplete(null,!0,n[h].currentOutputSnapshotResolved)),n[h].unwatcher();Ko(t,Ec(t.transactionQueueTree_,e)),kc(t,t.transactionQueueTree_),wt(t.eventQueue_,e,d);for(let h=0;h<c.length;h++)Or(c[h])}else{if(u==="datastale")for(let c=0;c<n.length;c++)n[c].status===3?n[c].status=4:n[c].status=0;else{ze("transaction at "+a.toString()+" failed: "+u);for(let c=0;c<n.length;c++)n[c].status=4,n[c].abortReason=u}Qo(t,e)}},o)}function Qo(t,e){const n=Gg(t,e),r=Yi(n),i=Qg(t,n);return DE(t,i,r),r}function DE(t,e,n){if(e.length===0)return;const r=[];let i=[];const o=e.filter(l=>l.status===0).map(l=>l.currentWriteId);for(let l=0;l<e.length;l++){const a=e[l],u=ke(n,a.path);let d=!1,c;if(S(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),a.status===4)d=!0,c=a.abortReason,i=i.concat(In(t.serverSyncTree_,a.currentWriteId,!0));else if(a.status===0)if(a.retryCount>=vE)d=!0,c="maxretry",i=i.concat(In(t.serverSyncTree_,a.currentWriteId,!0));else{const h=Vg(t,a.path,o);a.currentInputSnapshot=h;const g=e[l].update(h.val());if(g!==void 0){Sc("transaction failed: Data returned ",g,a.path);let _=ge(g);typeof g=="object"&&g!=null&&jt(g,".priority")||(_=_.updatePriority(h.getPriority()));const k=a.currentWriteId,p=Ic(t),f=Mg(_,h,p);a.currentOutputSnapshotRaw=_,a.currentOutputSnapshotResolved=f,a.currentWriteId=Bg(t),o.splice(o.indexOf(k),1),i=i.concat(Rg(t.serverSyncTree_,a.path,f,a.currentWriteId,a.applyLocally)),i=i.concat(In(t.serverSyncTree_,k,!0))}else d=!0,c="nodata",i=i.concat(In(t.serverSyncTree_,a.currentWriteId,!0))}wt(t.eventQueue_,n,i),i=[],d&&(e[l].status=2,function(h){setTimeout(h,Math.floor(0))}(e[l].unwatcher),e[l].onComplete&&(c==="nodata"?r.push(()=>e[l].onComplete(null,!1,e[l].currentInputSnapshot)):r.push(()=>e[l].onComplete(new Error(c),!1,null))))}Ko(t,t.transactionQueueTree_);for(let l=0;l<r.length;l++)Or(r[l]);kc(t,t.transactionQueueTree_)}function Gg(t,e){let n,r=t.transactionQueueTree_;for(n=F(e);n!==null&&Lr(r)===void 0;)r=Ec(r,n),e=Q(e),n=F(e);return r}function Qg(t,e){const n=[];return Kg(t,e,n),n.sort((r,i)=>r.order-i.order),n}function Kg(t,e,n){const r=Lr(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);Vo(e,i=>{Kg(t,i,n)})}function Ko(t,e){const n=Lr(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,bg(e,n.length>0?n:void 0)}Vo(e,r=>{Ko(t,r)})}function Yg(t,e){const n=Yi(Gg(t,e)),r=Ec(t.transactionQueueTree_,e);return lE(r,i=>{Fl(t,i)}),Fl(t,r),jg(r,i=>{Fl(t,i)}),n}function Fl(t,e){const n=Lr(e);if(n){const r=[];let i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(S(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(S(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(In(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?bg(e,void 0):n.length=s+1,wt(t.eventQueue_,Yi(e),i);for(let o=0;o<r.length;o++)Or(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AE(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function OE(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):ze(`Invalid query segment '${n}' in query '${t}'`)}return e}const jh=function(t,e){const n=LE(t),r=n.namespace;n.domain==="firebase.com"&&bt(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&bt("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||Gw();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Ym(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new B(n.pathString)}},LE=function(t){let e="",n="",r="",i="",s="",o=!0,l="https",a=443;if(typeof t=="string"){let u=t.indexOf("//");u>=0&&(l=t.substring(0,u-1),t=t.substring(u+2));let d=t.indexOf("/");d===-1&&(d=t.length);let c=t.indexOf("?");c===-1&&(c=t.length),e=t.substring(0,Math.min(d,c)),d<c&&(i=AE(t.substring(d,c)));const h=OE(t.substring(Math.min(t.length,c)));u=e.indexOf(":"),u>=0?(o=l==="https"||l==="wss",a=parseInt(e.substring(u+1),10)):u=e.length;const g=e.slice(0,u);if(g.toLowerCase()==="localhost")n="localhost";else if(g.split(".").length<=2)n=g;else{const _=e.indexOf(".");r=e.substring(0,_).toLowerCase(),n=e.substring(_+1),s=r}"ns"in h&&(s=h.ns)}return{host:e,port:a,domain:n,subdomain:r,secure:o,scheme:l,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qg{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+ae(this.snapshot.exportVal())}}class Xg{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jg{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return S(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return z(this._path)?null:ig(this._path)}get ref(){return new Ct(this._repo,this._path)}get _queryIdentifier(){const e=Eh(this._queryParams),n=Zu(e);return n==="{}"?"default":n}get _queryObject(){return Eh(this._queryParams)}isEqual(e){if(e=pn(e),!(e instanceof Nc))return!1;const n=this._repo===e._repo,r=rc(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+P1(this._path)}}class Ct extends Nc{constructor(e,n){super(e,n,new lc,!1)}get parent(){const e=og(this._path);return e===null?null:new Ct(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class kr{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new B(e),r=_o(this.ref,e);return new kr(this._node.getChild(n),r,ie)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new kr(i,_o(this.ref,r),ie)))}hasChild(e){const n=new B(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Pc(t,e){return t=pn(t),t._checkNotDeleted("ref"),e!==void 0?_o(t._root,e):t._root}function _o(t,e){return t=pn(t),F(t._path)===null?fE("child","path",e,!1):Hg("child","path",e,!1),new Ct(t._repo,ue(t._path,e))}function Zg(t,e){t=pn(t),pE("set",t._path),hE("set",e,t._path,!1);const n=new Fo;return IE(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function ey(t){t=pn(t);const e=new Jg(()=>{}),n=new Yo(e);return xE(t._repo,t,n).then(r=>new kr(r,new Ct(t._repo,t._path),t._queryParams.getIndex()))}class Yo{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new qg("value",this,new kr(e.snapshotNode,new Ct(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new Xg(this,e,n):null}matches(e){return e instanceof Yo?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class Rc{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new Xg(this,e,n):null}createEvent(e,n){S(e.childName!=null,"Child events should have a childName.");const r=_o(new Ct(n._repo,n._path),e.childName),i=n._queryParams.getIndex();return new qg(e.type,this,new kr(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Rc?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function ME(t,e,n,r,i){let s;if(typeof r=="object"&&(s=void 0,i=r),typeof r=="function"&&(s=r),i&&i.onlyOnce){const a=n,u=(d,c)=>{Fh(t._repo,t,l),a(d,c)};u.userCallback=n.userCallback,u.context=n.context,n=u}const o=new Jg(n,s||void 0),l=e==="value"?new Yo(o):new Rc(e,o);return kE(t._repo,t,l),()=>Fh(t._repo,t,l)}function bE(t,e,n,r){return ME(t,"value",e,n,r)}zC(Ct);BC(Ct);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FE="FIREBASE_DATABASE_EMULATOR_HOST",Xa={};let jE=!1;function zE(t,e,n,r){t.repoInfo_=new Ym(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function UE(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||bt("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),xe("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=jh(s,i),l=o.repoInfo,a,u;typeof process<"u"&&ih&&(u=ih[FE]),u?(a=!0,s=`http://${u}?ns=${l.namespace}`,o=jh(s,i),l=o.repoInfo):a=!o.repoInfo.secure;const d=i&&a?new fr(fr.OWNER):new r1(t.name,t.options,e);mE("Invalid Firebase Database URL",o),z(o.path)||bt("Database URL must point to the root of a Firebase Database (not including a child path).");const c=$E(l,t,d,new n1(t.name,n));return new WE(c,t)}function HE(t,e){const n=Xa[e];(!n||n[t.key]!==t)&&bt(`Database ${e}(${t.repoInfo_}) has already been deleted.`),NE(t),delete n[t.key]}function $E(t,e,n,r){let i=Xa[e.name];i||(i={},Xa[e.name]=i);let s=i[t.toURLString()];return s&&bt("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new wE(t,jE,n,r),i[t.toURLString()]=s,s}class WE{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(CE(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ct(this._repo,$())),this._rootInternal}_delete(){return this._rootInternal!==null&&(HE(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&bt("Cannot call "+e+" on a deleted database.")}}function Dc(t=Dm(),e){const n=Wi(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=y0("database");r&&BE(n,...r)}return n}function BE(t,e,n,r={}){t=pn(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&bt("Cannot call useEmulator() after instance has already been initialized.");const i=t._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&bt('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new fr(fr.OWNER);else if(r.mockUserToken){const o=typeof r.mockUserToken=="string"?r.mockUserToken:_0(r.mockUserToken,t.app.options.projectId);s=new fr(o)}zE(i,e,n,s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VE(t){Hw(Dw),ln(new Mt("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return UE(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),vt(sh,oh,t),vt(sh,oh,"esm2017")}Rt.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Rt.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};VE();var GE="firebase",QE="10.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vt(GE,QE,"app");const ty="@firebase/installations",Ac="0.6.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ny=1e4,ry=`w:${Ac}`,iy="FIS_v2",KE="https://firebaseinstallations.googleapis.com/v1",YE=60*60*1e3,qE="installations",XE="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JE={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},zn=new jo(qE,XE,JE);function sy(t){return t instanceof Wn&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oy({projectId:t}){return`${KE}/projects/${t}/installations`}function ly(t){return{token:t.token,requestStatus:2,expiresIn:eS(t.expiresIn),creationTime:Date.now()}}async function ay(t,e){const r=(await e.json()).error;return zn.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function uy({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function ZE(t,{refreshToken:e}){const n=uy(t);return n.append("Authorization",tS(e)),n}async function cy(t){const e=await t();return e.status>=500&&e.status<600?t():e}function eS(t){return Number(t.replace("s","000"))}function tS(t){return`${iy} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nS({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=oy(t),i=uy(t),s=e.getImmediate({optional:!0});if(s){const u=await s.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const o={fid:n,authVersion:iy,appId:t.appId,sdkVersion:ry},l={method:"POST",headers:i,body:JSON.stringify(o)},a=await cy(()=>fetch(r,l));if(a.ok){const u=await a.json();return{fid:u.fid||n,registrationStatus:2,refreshToken:u.refreshToken,authToken:ly(u.authToken)}}else throw await ay("Create Installation",a)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dy(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rS(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iS=/^[cdef][\w-]{21}$/,Ja="";function sS(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=oS(t);return iS.test(n)?n:Ja}catch{return Ja}}function oS(t){return rS(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qo(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hy=new Map;function fy(t,e){const n=qo(t);py(n,e),lS(n,e)}function py(t,e){const n=hy.get(t);if(n)for(const r of n)r(e)}function lS(t,e){const n=aS();n&&n.postMessage({key:t,fid:e}),uS()}let Tn=null;function aS(){return!Tn&&"BroadcastChannel"in self&&(Tn=new BroadcastChannel("[Firebase] FID Change"),Tn.onmessage=t=>{py(t.data.key,t.data.fid)}),Tn}function uS(){hy.size===0&&Tn&&(Tn.close(),Tn=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cS="firebase-installations-database",dS=1,Un="firebase-installations-store";let jl=null;function Oc(){return jl||(jl=Pm(cS,dS,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Un)}}})),jl}async function vo(t,e){const n=qo(t),i=(await Oc()).transaction(Un,"readwrite"),s=i.objectStore(Un),o=await s.get(n);return await s.put(e,n),await i.done,(!o||o.fid!==e.fid)&&fy(t,e.fid),e}async function my(t){const e=qo(t),r=(await Oc()).transaction(Un,"readwrite");await r.objectStore(Un).delete(e),await r.done}async function Xo(t,e){const n=qo(t),i=(await Oc()).transaction(Un,"readwrite"),s=i.objectStore(Un),o=await s.get(n),l=e(o);return l===void 0?await s.delete(n):await s.put(l,n),await i.done,l&&(!o||o.fid!==l.fid)&&fy(t,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lc(t){let e;const n=await Xo(t.appConfig,r=>{const i=hS(r),s=fS(t,i);return e=s.registrationPromise,s.installationEntry});return n.fid===Ja?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function hS(t){const e=t||{fid:sS(),registrationStatus:0};return gy(e)}function fS(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(zn.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=pS(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:mS(t)}:{installationEntry:e}}async function pS(t,e){try{const n=await nS(t,e);return vo(t.appConfig,n)}catch(n){throw sy(n)&&n.customData.serverCode===409?await my(t.appConfig):await vo(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function mS(t){let e=await zh(t.appConfig);for(;e.registrationStatus===1;)await dy(100),e=await zh(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await Lc(t);return r||n}return e}function zh(t){return Xo(t,e=>{if(!e)throw zn.create("installation-not-found");return gy(e)})}function gy(t){return gS(t)?{fid:t.fid,registrationStatus:0}:t}function gS(t){return t.registrationStatus===1&&t.registrationTime+ny<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yS({appConfig:t,heartbeatServiceProvider:e},n){const r=_S(t,n),i=ZE(t,n),s=e.getImmediate({optional:!0});if(s){const u=await s.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const o={installation:{sdkVersion:ry,appId:t.appId}},l={method:"POST",headers:i,body:JSON.stringify(o)},a=await cy(()=>fetch(r,l));if(a.ok){const u=await a.json();return ly(u)}else throw await ay("Generate Auth Token",a)}function _S(t,{fid:e}){return`${oy(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mc(t,e=!1){let n;const r=await Xo(t.appConfig,s=>{if(!yy(s))throw zn.create("not-registered");const o=s.authToken;if(!e&&CS(o))return s;if(o.requestStatus===1)return n=vS(t,e),s;{if(!navigator.onLine)throw zn.create("app-offline");const l=SS(s);return n=wS(t,l),l}});return n?await n:r.authToken}async function vS(t,e){let n=await Uh(t.appConfig);for(;n.authToken.requestStatus===1;)await dy(100),n=await Uh(t.appConfig);const r=n.authToken;return r.requestStatus===0?Mc(t,e):r}function Uh(t){return Xo(t,e=>{if(!yy(e))throw zn.create("not-registered");const n=e.authToken;return xS(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function wS(t,e){try{const n=await yS(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await vo(t.appConfig,r),n}catch(n){if(sy(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await my(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await vo(t.appConfig,r)}throw n}}function yy(t){return t!==void 0&&t.registrationStatus===2}function CS(t){return t.requestStatus===2&&!ES(t)}function ES(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+YE}function SS(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function xS(t){return t.requestStatus===1&&t.requestTime+ny<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IS(t){const e=t,{installationEntry:n,registrationPromise:r}=await Lc(e);return r?r.catch(console.error):Mc(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TS(t,e=!1){const n=t;return await kS(n),(await Mc(n,e)).token}async function kS(t){const{registrationPromise:e}=await Lc(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NS(t){if(!t||!t.options)throw zl("App Configuration");if(!t.name)throw zl("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw zl(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function zl(t){return zn.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _y="installations",PS="installations-internal",RS=t=>{const e=t.getProvider("app").getImmediate(),n=NS(e),r=Wi(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},DS=t=>{const e=t.getProvider("app").getImmediate(),n=Wi(e,_y).getImmediate();return{getId:()=>IS(n),getToken:i=>TS(n,i)}};function AS(){ln(new Mt(_y,RS,"PUBLIC")),ln(new Mt(PS,DS,"PRIVATE"))}AS();vt(ty,Ac);vt(ty,Ac,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wo="analytics",OS="firebase_id",LS="origin",MS=60*1e3,bS="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",bc="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ue=new Xu("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FS={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Ve=new jo("analytics","Analytics",FS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jS(t){if(!t.startsWith(bc)){const e=Ve.create("invalid-gtag-resource",{gtagURL:t});return Ue.warn(e.message),""}return t}function vy(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function zS(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function US(t,e){const n=zS("firebase-js-sdk-policy",{createScriptURL:jS}),r=document.createElement("script"),i=`${bc}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function HS(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function $S(t,e,n,r,i,s){const o=r[i];try{if(o)await e[o];else{const a=(await vy(n)).find(u=>u.measurementId===i);a&&await e[a.appId]}}catch(l){Ue.error(l)}t("config",i,s)}async function WS(t,e,n,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const l=await vy(n);for(const a of o){const u=l.find(c=>c.measurementId===a),d=u&&e[u.appId];if(d)s.push(d);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),t("event",r,i||{})}catch(s){Ue.error(s)}}function BS(t,e,n,r){async function i(s,...o){try{if(s==="event"){const[l,a]=o;await WS(t,e,n,l,a)}else if(s==="config"){const[l,a]=o;await $S(t,e,n,r,l,a)}else if(s==="consent"){const[l]=o;t("consent","update",l)}else if(s==="get"){const[l,a,u]=o;t("get",l,a,u)}else if(s==="set"){const[l]=o;t("set",l)}else t(s,...o)}catch(l){Ue.error(l)}}return i}function VS(t,e,n,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=BS(s,t,e,n),{gtagCore:s,wrappedGtag:window[i]}}function GS(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(bc)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QS=30,KS=1e3;class YS{constructor(e={},n=KS){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const wy=new YS;function qS(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function XS(t){var e;const{appId:n,apiKey:r}=t,i={method:"GET",headers:qS(r)},s=bS.replace("{app-id}",n),o=await fetch(s,i);if(o.status!==200&&o.status!==304){let l="";try{const a=await o.json();!((e=a.error)===null||e===void 0)&&e.message&&(l=a.error.message)}catch{}throw Ve.create("config-fetch-failed",{httpStatus:o.status,responseMessage:l})}return o.json()}async function JS(t,e=wy,n){const{appId:r,apiKey:i,measurementId:s}=t.options;if(!r)throw Ve.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw Ve.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new tx;return setTimeout(async()=>{l.abort()},n!==void 0?n:MS),Cy({appId:r,apiKey:i,measurementId:s},o,l,e)}async function Cy(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=wy){var s;const{appId:o,measurementId:l}=t;try{await ZS(r,e)}catch(a){if(l)return Ue.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${a==null?void 0:a.message}]`),{appId:o,measurementId:l};throw a}try{const a=await XS(t);return i.deleteThrottleMetadata(o),a}catch(a){const u=a;if(!ex(u)){if(i.deleteThrottleMetadata(o),l)return Ue.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:o,measurementId:l};throw a}const d=Number((s=u==null?void 0:u.customData)===null||s===void 0?void 0:s.httpStatus)===503?Yd(n,i.intervalMillis,QS):Yd(n,i.intervalMillis),c={throttleEndTimeMillis:Date.now()+d,backoffCount:n+1};return i.setThrottleMetadata(o,c),Ue.debug(`Calling attemptFetch again in ${d} millis`),Cy(t,c,r,i)}}function ZS(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(Ve.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function ex(t){if(!(t instanceof Wn)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class tx{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function nx(t,e,n,r,i){if(i&&i.global){t("event",n,r);return}else{const s=await e,o=Object.assign(Object.assign({},r),{send_to:s});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rx(){if(xm())try{await Im()}catch(t){return Ue.warn(Ve.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Ue.warn(Ve.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function ix(t,e,n,r,i,s,o){var l;const a=JS(t);a.then(g=>{n[g.measurementId]=g.appId,t.options.measurementId&&g.measurementId!==t.options.measurementId&&Ue.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${g.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(g=>Ue.error(g)),e.push(a);const u=rx().then(g=>{if(g)return r.getId()}),[d,c]=await Promise.all([a,u]);GS(s)||US(s,d.measurementId),i("js",new Date);const h=(l=o==null?void 0:o.config)!==null&&l!==void 0?l:{};return h[LS]="firebase",h.update=!0,c!=null&&(h[OS]=c),i("config",d.measurementId,h),d.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(e){this.app=e}_delete(){return delete di[this.app.options.appId],Promise.resolve()}}let di={},Hh=[];const $h={};let Ul="dataLayer",ox="gtag",Wh,Ey,Bh=!1;function lx(){const t=[];if(w0()&&t.push("This is a browser extension environment."),E0()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=Ve.create("invalid-analytics-context",{errorInfo:e});Ue.warn(n.message)}}function ax(t,e,n){lx();const r=t.options.appId;if(!r)throw Ve.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Ue.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Ve.create("no-api-key");if(di[r]!=null)throw Ve.create("already-exists",{id:r});if(!Bh){HS(Ul);const{wrappedGtag:s,gtagCore:o}=VS(di,Hh,$h,Ul,ox);Ey=s,Wh=o,Bh=!0}return di[r]=ix(t,Hh,$h,e,Wh,Ul,n),new sx(t)}function ux(t=Dm()){t=pn(t);const e=Wi(t,wo);return e.isInitialized()?e.getImmediate():cx(t)}function cx(t,e={}){const n=Wi(t,wo);if(n.isInitialized()){const i=n.getImmediate();if(no(e,n.getOptions()))return i;throw Ve.create("already-initialized")}return n.initialize({options:e})}function dx(t,e,n,r){t=pn(t),nx(Ey,di[t.app.options.appId],e,n,r).catch(i=>Ue.error(i))}const Vh="@firebase/analytics",Gh="0.10.3";function hx(){ln(new Mt(wo,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return ax(r,i,n)},"PUBLIC")),ln(new Mt("analytics-internal",t,"PRIVATE")),vt(Vh,Gh),vt(Vh,Gh,"esm2017");function t(e){try{const n=e.getProvider(wo).getImmediate();return{logEvent:(r,i,s)=>dx(n,r,i,s)}}catch(n){throw Ve.create("interop-component-reg-failed",{reason:n})}}}hx();const fx={apiKey:"AIzaSyBRqtCuq9ts7KqT-NS3_akHjZQoiiuf2X4",authDomain:"triominoes-7043f.firebaseapp.com",databaseURL:"https://triominoes-7043f-default-rtdb.firebaseio.com",projectId:"triominoes-7043f",storageBucket:"triominoes-7043f.appspot.com",messagingSenderId:"824630932052",appId:"1:824630932052:web:9cf65f50a6c9280f6b33c1",measurementId:"G-QDV767XXJE"},Jo=Rm(fx);ux(Jo);function Sy(t){var e,n;return{...t,gameHistory:{...t.gameHistory,startingDeck:((e=t.gameHistory)==null?void 0:e.startingDeck)??[],actions:((n=t.gameHistory)==null?void 0:n.actions)??[]},players:t.players??[],messageHistory:t.messageHistory??{messages:[]}}}function mr(t){const e=Dc(Jo),n=Pc(e,`games/${t.gameID}`);Zg(n,t)}async function Za(t){const e=Dc(Jo),n=Pc(e,`games/${t}`),r=await ey(n);return console.log("Game data accessed at "+Date.now()),r.exists()?Sy(r.val()):null}async function px(t,e){const n=Dc(Jo),r=Pc(n,`games/${t.gameID}`);(await ey(r)).exists()||await Zg(r,t),bE(r,s=>{e(Sy(s.val()))})}const mx=""+new URL("active-player-Bhfi1NRE.gif",import.meta.url).href,xy=["player-color-red","player-color-blue","player-color-green","player-color-purple","player-color-brown","player-color-orange"];function gx(t){return y.jsx("div",{className:"player-scores",children:t.gameState.scores.map((e,n)=>y.jsx("div",{className:`player-score-item ${t.gameState.activePlayer===n?"active":""}`,"data-tiles":t.gameState.hands[n].length,children:y.jsxs("div",{className:"player-score-details",children:[y.jsx("div",{className:"player-active-box",children:t.gameState.activePlayer===n&&y.jsx("img",{src:mx,alt:"Active Player",className:"active-player-gif"})}),y.jsx("div",{className:`player-name ${xy[n]}`,children:t.gameState.playerNames[n]}),y.jsxs("div",{className:"player-score",children:[e," points"]})]})},n))})}const yx=({playerName:t,playerIndex:e,gameData:n})=>{const r=n.messageHistory,[i,s]=L.useState(""),o=L.useRef(null),[l,a]=L.useState(!0),[u,d]=L.useState(!1);L.useEffect(()=>{h(),l||d(!0)},[r,l]);const c=()=>{if(i.trim()!==""){const v={playerName:t,playerIndex:e,content:i.trim()},k={messages:[...r.messages,v]};mr({...n,messageHistory:k}),s(""),d(!1)}},h=()=>{o.current&&(o.current.scrollTop=o.current.scrollHeight)},g=v=>{v.key==="Enter"&&c()},_=()=>{u&&a(l),d(!1)};return y.jsxs("div",{className:`chat-component ${l?"expanded":"minimized"}`,onClick:_,children:[y.jsx("div",{className:"message-container",ref:o,children:r.messages.map((v,k)=>y.jsxs("div",{className:"message",children:[y.jsx("span",{className:`player ${xy[v.playerIndex]}`,children:v.playerName+": "}),y.jsx("span",{className:"content",children:v.content})]},k))}),y.jsx("div",{className:"input-container",children:y.jsx("input",{type:"text",value:i,onChange:v=>s(v.target.value),onKeyPress:g,placeholder:"Type your message..."})})]})};function _x(t){const e=[t.orientation==="up"?"tile-container":"tile-container-inverted",t.tileStyle?t.tileStyle:""];return y.jsx("div",{className:e.join(" "),style:t.style,draggable:t.draggable,onClick:t.onClick,onDragStart:t.onDragStart,onDragOver:t.onDragOver,onDrop:t.onDrop,children:t.orientation==="up"?y.jsxs(y.Fragment,{children:[y.jsx("span",{className:"number bottom-left",children:t.bottom[0]}),y.jsx("span",{className:"number bottom-right",children:t.bottom[1]}),y.jsx("span",{className:"number top-center",children:t.top[0]})]}):y.jsxs(y.Fragment,{children:[y.jsx("span",{className:"number top-left",children:t.top[0]}),y.jsx("span",{className:"number top-right",children:t.top[1]}),y.jsx("span",{className:"number bottom-center",children:t.bottom[0]})]})})}function Qh(t){const e=t.placedTile.orientation==="up"?[t.placedTile.topCenter]:[t.placedTile.topLeft,t.placedTile.topRight],n=t.placedTile.orientation==="up"?[t.placedTile.bottomLeft,t.placedTile.bottomRight]:[t.placedTile.bottomCenter];return y.jsx(_x,{style:t.position,top:e,bottom:n,orientation:t.placedTile.orientation,tileStyle:t.tileStyle,onClick:t.onClick,onDragOver:t.onDragOver,onDrop:t.onDrop})}function vx(t){const{gameState:e,tileInHand:n,pushAction:r,setTileInHand:i,isActivePlayer:s,moveHighlightingEnabled:o}=t,[l,a]=L.useState(!1);L.useEffect(()=>{const A=()=>{a(window.innerWidth<=767)};return A(),window.addEventListener("resize",A),()=>{window.removeEventListener("resize",A)}},[]);const u=L.useRef(null),[d,c]=L.useState(0),[h,g]=L.useState(0);L.useEffect(()=>{const A=()=>{u.current&&(c(u.current.clientWidth),g(u.current.clientHeight))};return A(),window.addEventListener("resize",A),()=>{window.removeEventListener("resize",A)}},[]);const _=l?57.6:96,v=_*.88,k=Array.from(e.gameBoard.entries()),p=Math.min(...k.map(([A])=>xt(A).x)),f=Math.max(...k.map(([A])=>xt(A).x)),m=Math.min(...k.map(([A])=>xt(A).y)),w=Math.max(...k.map(([A])=>xt(A).y)),x=(f-p+1)*_*.5,P=(w-m+1)*v,N=(d-x)/2,D=(h-P)/2;function V(A){if(s&&n){const De=Tl(n,e.gameBoard).find(tt=>tt.coord.x===A.x&&tt.coord.y===A.y);if(De){const tt={actionType:"play",playerIndex:e.activePlayer,tilePlayed:De.placedTile,coord:De.coord};r(tt),i(void 0)}}}function b(A,de){if(s){A.preventDefault();const De=A.dataTransfer.getData("text/plain"),tt=JSON.parse(De),Et=Tl(tt,e.gameBoard).find(ft=>ft.coord.x===de.x&&ft.coord.y===de.y);if(Et){const ft={actionType:"play",playerIndex:e.activePlayer,tilePlayed:Et.placedTile,coord:Et.coord};r(ft),i(void 0)}}}return y.jsxs("div",{className:"game-board",ref:u,children:[Array.from(e.gameBoard.entries()).map(([A,de])=>y.jsx(Qh,{coord:xt(A),placedTile:de,tileStyle:I(e.lastPlay)===A?"most-recent":"",position:{left:`${(xt(A).x-p)*_*.5+N}px`,bottom:`${(xt(A).y-m)*v+D}px`}},A)),n?Tl(n,e.gameBoard).map(A=>y.jsx(Qh,{coord:A.coord,placedTile:A.placedTile,tileStyle:o?"playable-visible":"playable-hidden",onClick:()=>V(A.coord),onDragOver:de=>de.preventDefault(),onDrop:de=>b(de,A.coord),position:{left:`${(A.coord.x-p)*_*.5+N}px`,bottom:`${(A.coord.y-m)*v+D}px`}},I(A.coord))):null]})}function Kh(t,e){const n=JSON.parse(localStorage.getItem("tilesInHand")||"[]"),r=n.findIndex(i=>i.id===t);r===-1?n.push({id:t,permutation:e}):n[r].permutation=e,localStorage.setItem("tilesInHand",JSON.stringify(n))}function Yh(){return JSON.parse(localStorage.getItem("tilesInHand")||"[]")}function wx(){localStorage.removeItem("tilesInHand")}const qh=""+new URL("346178-rotate-tile-DsZf3oRH.wav",import.meta.url).href;function Cx(t){const{newTile:e,isSelected:n,setTileInHand:r,soundEffectsEnabled:i,onDrop:s}=t,[o,l]=L.useState(()=>{const f=Yh().find(m=>m.id===e.id);return f?f.permutation:0});L.useEffect(()=>{Yh().findIndex(m=>m.id===e.id)===-1&&Kh(e.id,0)},[e.id]);const a=L.useRef(null);function u(){const p=o+1;l(p),Kh(e.id,p),r(e),i&&Ps(a.current)}const d=o*60,c={0:{transform:"translate(  0%,   0%)"},60:{transform:"translate( 13%, -20%)"},120:{transform:"translate( 13%,  27%)"},180:{transform:"translate(  0%,   6%)"},240:{transform:"translate(-13%,  27%)"},300:{transform:"translate(-15%, -20%)"}}[d%360],[h,g]=L.useState(!1);function _(p){p.dataTransfer.setData("text/plain",JSON.stringify(e)),r(e),g(!0)}function v(){g(!1)}const k=h?d%120===0?"tile-dragging":"tile-dragging-inverted":"";return y.jsx("div",{className:`${k}`,draggable:!0,onDragStart:_,onDragEnd:v,onDrop:s,onDragOver:p=>p.preventDefault(),children:y.jsxs("div",{className:`tile-in-hand ${n?"selected":""}`,"data-tile-id":e.id,style:{...c,transform:`${c.transform} rotate(${d}deg)`},onClick:u,children:[y.jsx("audio",{ref:a,src:qh}),y.jsx("audio",{ref:a,src:qh}),y.jsxs("div",{className:"number-container",children:[y.jsx("span",{className:"number top-center",children:e.numbers[0]}),y.jsx("span",{className:"number bottom-right",children:e.numbers[1]}),y.jsx("span",{className:"number bottom-left",children:e.numbers[2]})]})]})})}function Ex(t){const{playerIndex:e,gameState:n,tileInHand:r,setTileInHand:i,soundEffectsEnabled:s}=t,o=n.hands[e],[l,a]=L.useState(()=>o.map(c=>c.id));L.useEffect(()=>{if(n.gameBoard.size===0){const c=o.map(h=>h.id);a(c)}},[n.gameBoard]),L.useEffect(()=>{const c=o.map(h=>h.id);a(h=>{const g=h.filter(v=>c.includes(v)),_=c.filter(v=>!h.includes(v));return console.log("Updated tileOrder: "+[...g,..._]),[...g,..._]})},[o]);const u=o.slice().sort((c,h)=>{const g=l.indexOf(c.id),_=l.indexOf(h.id);return g-_});console.log("orderedPlayerHand: "+u.map(c=>c.id));function d(c){var k;c.preventDefault();const h=JSON.parse(c.dataTransfer.getData("text/plain")),g=l.findIndex(p=>p===h.id),v=(k=c.target.closest(".tile-in-hand"))==null?void 0:k.getAttribute("data-tile-id");if(v&&g!==-1){const p=l.findIndex(f=>f===v);if(p!==-1&&g!==p){const f=[...l];f.splice(g,1),f.splice(p,0,h.id),a(f)}}}return n.gameBoard.size===0||e===-1?y.jsx("div",{}):y.jsx("div",{className:"player-hand",children:u.map(c=>y.jsx(Cx,{newTile:c,isSelected:c.id===(r==null?void 0:r.id),setTileInHand:i,soundEffectsEnabled:s,onDrop:d},c.id))})}function Sx(t){const[e,n]=L.useState(!1),r=L.useRef(null),i=()=>{n(!e)};L.useEffect(()=>{s()},[t.gameState]);const s=()=>{r.current&&(r.current.scrollTop=r.current.scrollHeight)};return y.jsxs("div",{className:`game-log ${e?"collapsed":""}`,children:[y.jsxs("h3",{className:"game-log-header",onClick:i,children:["Game Log ",e?"+":"-"]}),!e&&y.jsx("ul",{className:"game-log-entries",ref:r,children:t.gameState.gameLog.map((o,l)=>y.jsx("li",{className:"game-log-entry",children:o},l))})]})}const xx=""+new URL("456965-notification-BBmFiQXS.mp3",import.meta.url).href,Ix=""+new URL("456968-win-game-BhvzVM5l.mp3",import.meta.url).href,Tx=""+new URL("639945-lose-game-DLZw6yM4.wav",import.meta.url).href,kx=""+new URL("442586-bridge-D9GTKLT2.wav",import.meta.url).href,Nx=""+new URL("37233-hexagon-M9W5sgar.wav",import.meta.url).href;function Px(t){return y.jsx("button",{className:"how-to-play-button",onClick:t.onClick,children:"HOW TO PLAY"})}function Rx(t){const{isOpen:e,onClose:n}=t;return e?y.jsx("div",{className:"overlay",onClick:n,children:y.jsxs("div",{className:"popup-content",onClick:r=>r.stopPropagation(),children:[y.jsxs("div",{className:"popup-header",children:[y.jsx("h2",{children:"How to Play Triominoes"}),y.jsx("span",{className:"close-btn",onClick:n,children:""})]}),y.jsxs("div",{className:"wikipedia-content",children:[y.jsx("h2",{children:"Setup and initial move"}),y.jsx("p",{children:"At the start of the game, all of the tiles are placed face down and shuffled. Players randomly draw their starting pieces. The specific number depends upon the number of players: a two-player game uses nine pieces per player to start, three or four players use seven pieces, and five or six players use six pieces. The tiles after the draw are kept face-down for later use."}),y.jsx("p",{children:"One player keeps score for all, using columns for each player and cumulative scores."}),y.jsx("p",{children:'The player who draws the largest "triple" (all three numbers the same on the tile), begins the game by placing that tile. That player scores 10 points plus the total value of the tile. The exception is that if the triple zero tile is used to start, that player earns 40 points. In this case, the only triple tile held is the triple zero, which would otherwise be trumped by any other triple tile.'}),y.jsx("p",{children:"If no triple is held by any player, the player with the highest single tile value plays it and scores its value without the 10 point bonus. Tile values are computed by summing the three numbers. For example, the 2-4-5 tile is worth 2+4+5=11 points. When two or more players hold tiles with the same summed value, the next highest counts and so on until there is the highest value tile."}),y.jsxs("div",{className:"gallery",children:[y.jsx("div",{className:"gallery-caption",children:"Starting examples"}),y.jsxs("div",{className:"gallery-items",children:[y.jsxs("div",{className:"gallery-item",children:[y.jsx("div",{className:"gallery-item-thumb",children:y.jsx("img",{src:"//upload.wikimedia.org/wikipedia/commons/thumb/d/d2/Triominoes_4-4-4.svg/112px-Triominoes_4-4-4.svg.png",alt:"Placing a triple-4 tile to start gives the player a score of 22 points (43 + 10 point bonus)"})}),y.jsx("div",{className:"gallery-item-text",children:"Placing a triple-4 tile to start gives the player a score of 22 points (43 + 10 point bonus)"})]}),y.jsxs("div",{className:"gallery-item",children:[y.jsx("div",{className:"gallery-item-thumb",children:y.jsx("img",{src:"//upload.wikimedia.org/wikipedia/commons/thumb/f/fe/Triominoes_0-0-0.svg/112px-Triominoes_0-0-0.svg.png",alt:"Placing a triple-0 tile to start gives the player a score of 40 points (30 points for triple-0 + 10 point bonus)"})}),y.jsx("div",{className:"gallery-item-text",children:"Placing a triple-0 tile to start gives the player a score of 40 points (30 points for triple-0 + 10 point bonus)"})]}),y.jsxs("div",{className:"gallery-item",children:[y.jsx("div",{className:"gallery-item-thumb",children:y.jsx("img",{src:"//upload.wikimedia.org/wikipedia/commons/thumb/5/54/Triominoes_2-4-5.svg/112px-Triominoes_2-4-5.svg.png",alt:"Placing a 2-4-5 tile to start gives the player a score of 11 points (2+4+5, no bonus)"})}),y.jsx("div",{className:"gallery-item-text",children:"Placing a 2-4-5 tile to start gives the player a score of 11 points (2+4+5, no bonus)"})]})]})]}),y.jsx("h2",{children:"Tile Placement"}),y.jsxs("div",{className:"gallery",children:[y.jsx("div",{className:"gallery-caption",children:"Legal placement examples"}),y.jsxs("div",{className:"gallery-items",children:[y.jsxs("div",{className:"gallery-item",children:[y.jsx("div",{className:"gallery-item-thumb",children:y.jsx("img",{src:"//upload.wikimedia.org/wikipedia/commons/thumb/a/a5/Triominoes_placement_example_01.svg/200px-Triominoes_placement_example_01.svg.png",alt:"The legal placement of the 3-4-4 tile scores 3+4+4=11 points. Note how the corner values are matched to the adjacent 4-4-4 tile."})}),y.jsx("div",{className:"gallery-item-text",children:"The legal placement of the 3-4-4 tile scores 3+4+4=11 points. Note how the corner values are matched to the adjacent 4-4-4 tile."})]}),y.jsxs("div",{className:"gallery-item",children:[y.jsx("div",{className:"gallery-item-thumb",children:y.jsx("img",{src:"//upload.wikimedia.org/wikipedia/commons/thumb/3/38/Triominoes_placement_example_02.svg/200px-Triominoes_placement_example_02.svg.png",alt:"The legal placement of the 2-5-5 tile scores 12 points."})}),y.jsx("div",{className:"gallery-item-text",children:"The legal placement of the 2-5-5 tile scores 12 points."})]})]})]}),y.jsx("p",{children:"Play proceeds clockwise; each player places a tile from their hand that lines up with the already placed tiles. A valid play of a triomino is similar to that of a domino in that the sides contacting each other must have matching numbers; this means the two numbers at the corners must match with the adjacent tile. A side with a 1 and a 2 will often not match the side the player is attempting to match. If a new tile is being placed such that it would touch two other tiles, then all of the adjacent numbers must match. Where the points of tiles meet the numbers must always be the same; if they are not, someone has been allowed to misplace a tile and the round must be restarted."}),y.jsx("p",{children:"Points are scored based on the numbers on the tile played, with additional bonuses applied when special placements are made. After a tile has been placed legally, each number on the newly placed tile is summed and added to that player's score. (E.g. 5 + 3 + 1 = 9)."}),y.jsx("h2",{children:"Drawing Penalty"}),y.jsx("p",{children:"If a player cannot place a piece using the tiles in their hand, they must draw a new piece from the remaining pile. Each tile drawn penalizes the player 5 points. Players must continue to draw until a matching tile is found or until they have drawn three tiles. If one of the three can be placed the score is the value of the tile placed less the penalty, which may be positive or negative, depending on the placed tile value and number of tiles drawn. If none of these three tiles can be placed the penalty is 25 points."}),y.jsx("p",{children:"If there are no remaining tiles left to be drawn and a player is unable to place a tile, they lose 10 points. For example, if there are two tiles left, a player without a tile to be placed may draw them (receiving a penalty -10 in total for the two tiles drawn), and if that player still has no tile that can be played, the additional end penalty is incurred (total penalty -10 + -10)."}),y.jsx("h2",{children:"Bonus Points"}),y.jsx("p",{children:"When a player can place a tile that completes a closed hexagonal shape (i.e. the 6th piece & all 3 numbers match), that player receives a bonus of 50 points plus the regular score for a legally placed tile, less any penalty if pieces have been drawn. If a player completes two hexagons in one move the player receives a 100 point bonus."}),y.jsx("p",{children:"Bridges are made by matching one side of the tile and the point opposite. If a bridge is completed or a tile is added to a bridge, that player receives a 40- point bonus in addition to the tile's points, less any penalty if pieces have been drawn."}),y.jsxs("div",{className:"gallery",children:[y.jsx("div",{className:"gallery-caption",children:"Bonus placement examples"}),y.jsxs("div",{className:"gallery-items",children:[y.jsxs("div",{className:"gallery-item",children:[y.jsx("div",{className:"gallery-item-thumb",children:y.jsx("img",{src:"//upload.wikimedia.org/wikipedia/commons/thumb/7/79/Triominoes_placement_example_03.svg/165px-Triominoes_placement_example_03.svg.png",alt:"The completion of the hexagon with the 0-5-5 tile scores 0+5+5 + 50 (bonus) = 60 points in total. Note how all three values on the placed 0-5-5 tile must match the two adjacent tiles."})}),y.jsx("div",{className:"gallery-item-text",children:"The completion of the hexagon with the 0-5-5 tile scores 0+5+5 + 50 (bonus) = 60 points in total. Note how all three values on the placed 0-5-5 tile must match the two adjacent tiles."})]}),y.jsxs("div",{className:"gallery-item",children:[y.jsx("div",{className:"gallery-item-thumb",children:y.jsx("img",{src:"//upload.wikimedia.org/wikipedia/commons/thumb/8/87/Triominoes_placement_example_04.svg/139px-Triominoes_placement_example_04.svg.png",alt:"The completion of the bridge with the 1-4-4 tile scores 1+4+4 + 40 (bonus) = 49 points in total. Note how the corner value 1 must match the adjacent corners."})}),y.jsx("div",{className:"gallery-item-text",children:"The completion of the bridge with the 1-4-4 tile scores 1+4+4 + 40 (bonus) = 49 points in total. Note how the corner value 1 must match the adjacent corners."})]}),y.jsxs("div",{className:"gallery-item",children:[y.jsx("div",{className:"gallery-item-thumb",children:y.jsx("img",{src:"//upload.wikimedia.org/wikipedia/commons/thumb/6/6e/Triominoes_placement_example_05.svg/200px-Triominoes_placement_example_05.svg.png",alt:"The completion of the bridge with the 1-2-5 tile scored 1+2+5+40 = 48 points. The bridge was then augmented with the 1-1-5 tile, which scored 1+1+5+40 = 47 points, as that player was required to match two adjacent sides."})}),y.jsx("div",{className:"gallery-item-text",children:"The completion of the bridge with the 1-2-5 tile scored 1+2+5+40 = 48 points. The bridge was then augmented with the 1-1-5 tile, which scored 1+1+5+40 = 47 points, as that player was required to match two adjacent sides."})]})]})]}),y.jsx("h2",{children:"Round ending and objective"}),y.jsx("p",{children:"The round ends when no player can place a tile, whether or not all the face-down tiles have been drawn, or when one player runs out of tiles."}),y.jsxs("ol",{children:[y.jsx("li",{children:"When the round ends because no one can place a piece, then the player with the lowest total value hand gains the value in excess of their hand from each other player. For example, if the total value of the remaining tiles in Player B's hand is 15, while Player A's remaining hand sums to 23 and Player C's hand sums to 27, Player B will receive a total bonus of 20, which is the sum of the differences between B and A (23-15=8) and B and C (27- 15=12)."}),y.jsx("li",{children:"A player who is able to empty their hand and place their last tile receives 25 bonus points, plus the total of all of the remaining tiles in their opponent(s)' hands. This is consistent with the prior ending condition, as the player who emptied their hand has the lowest remaining total value (0)."})]}),y.jsx("p",{children:"Additional rounds are played until one player reaches a total of 400 points. They are not yet the winner, and may not be: this only signals that this is the last round, even if penalties later reduce their total below 400. The winner is the one who has the most points at the end of this last round."})]})]})}):null}function Ps(t){t&&(t.pause(),t.currentTime=0,t.play())}function Dx(t){const[e,n]=L.useState(t.initialGameData),[r,i]=L.useState();L.useEffect(()=>{async function C(){await px(t.initialGameData,R=>n(R))}C()},[]);const s=e.players.findIndex(C=>C.localPlayerID===t.localPlayerID),o=s!==-1?e.players[s].playerName:"",l=e.gameHistory;function a(C,R){mr({...e,gameHistory:C,gameInProgress:R})}const u=pm(l);function d(){const C=r0(e);a(C,!0),wx()}function c(){const C=i0(e.gameHistory),R=C.actions[C.actions.length-1].actionType!=="end";a(C,R)}function h(C){if(C.actionType!=="end"||!l.actions.some(R=>R.actionType==="end")){const R={startingDeck:e.gameHistory.startingDeck,actions:e.gameHistory.actions.concat(C)},M=C.actionType!=="end";a(R,M)}}L.useEffect(()=>{if(e.gameInProgress&&u.playerNames[u.activePlayer].startsWith("Computer")){const R=setTimeout(()=>{c()},500);return()=>clearTimeout(R)}},[e.gameInProgress,l.actions]);function g(C){if(C.gameBoard.size===0)return"START GAME";if(e.gameInProgress){const R=C.drawPile.length;return y.jsxs(y.Fragment,{children:[C.tilesDrawnThisTurn<Ku&&R>0?"DRAW":"PASS",y.jsx("br",{}),y.jsxs("span",{className:"tiles-remaining",children:[R," tiles left"]})]})}else return"NEW GAME"}function _(){return e.gameInProgress?c:d}const[v,k]=L.useState(!0);function p(){k(C=>!C)}const[f,m]=L.useState(!1);function w(){m(C=>!C)}const x=L.useRef(null),[P,N]=L.useState(!1);if(f){const C=e.gameInProgress&&u.activePlayer===s;C&&!P?(Ps(x.current),N(!0)):!C&&P&&N(!1)}const[D,V]=L.useState(0),b=L.useRef(null),A=L.useRef(null);L.useEffect(()=>{const C=l.actions[l.actions.length-1];if(f&&C&&C.actionType==="play"){const R=fm(C.tilePlayed,C.coord,u.gameBoard);D!==l.actions.length&&(R[1]?Ps(b.current):R[2]&&Ps(A.current),V(l.actions.length))}},[e.gameHistory.actions]);const de=L.useRef(null),De=L.useRef(null);L.useEffect(()=>{var C,R;if(f&&!e.gameInProgress&&u.gameBoard.size>0){const M=u.scores[s],Z=Math.max(...u.scores);D!==l.actions.length&&(M===Z?(C=de.current)==null||C.play():(R=De.current)==null||R.play(),V(l.actions.length))}},[e.gameHistory.actions]);const[tt,Mr]=L.useState(!1),Et=()=>{Mr(!0)},ft=()=>{Mr(!1)};return y.jsxs("main",{children:[y.jsx("audio",{ref:x,src:xx}),y.jsx("audio",{ref:b,src:kx}),y.jsx("audio",{ref:A,src:Nx}),y.jsx("audio",{ref:de,src:Ix}),y.jsx("audio",{ref:De,src:Tx}),y.jsx(Rx,{isOpen:tt,onClose:ft}),y.jsxs("div",{className:"left-container",children:[y.jsxs("div",{className:"button-container",children:[y.jsx("div",{className:"button-group left",children:y.jsx(Px,{onClick:Et})}),y.jsx("div",{className:"button-group center",children:e.players[s].playerType!=="spectator"&&y.jsx("button",{className:"button",onClick:_(),disabled:e.gameInProgress&&u.activePlayer!==s,children:g(u)})}),y.jsxs("div",{className:"button-group right",children:[y.jsx("button",{className:"sound-toggle-button",onClick:w,children:f?"":""}),y.jsx("button",{className:"move-highlighting-toggle-button",onClick:p,style:{textDecoration:v?"none":"line-through",color:v?"whitesmoke":"red"},children:"SHOW MOVES"})]})]}),y.jsx(l0,{toCopy:e.gameID}),y.jsx(vx,{gameState:u,tileInHand:r,setTileInHand:i,pushAction:h,isActivePlayer:u.activePlayer===s,moveHighlightingEnabled:v}),y.jsx("div",{className:"bottom-container",children:e.players[s].playerType!=="spectator"&&y.jsx(Ex,{playerIndex:s,gameState:u,tileInHand:r,setTileInHand:i,soundEffectsEnabled:f})})]}),y.jsxs("div",{className:"right-container",children:[y.jsx(gx,{gameState:u}),y.jsx(Sx,{gameState:u}),y.jsx(yx,{playerName:o,playerIndex:s,gameData:e})]})]})}const Ax={gameID:"gameID"};window.fbapi={saveGameData:mr,getGameData:Za};function Ox(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZ";let e="";for(let n=0;n<6;n++){const r=Math.floor(Math.random()*t.length);e+=t[r]}return e}let Ae=localStorage.getItem("playerID");Ae||(Ae=Lx(),localStorage.setItem("playerID",Ae));function Lx(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function Mx(){let e=new URLSearchParams(window.location.search).get(Ax.gameID);const[n,r]=L.useState(),[i,s]=L.useState(""),[o,l]=L.useState(e||""),[a,u]=L.useState(e?"joinGame":"landing"),[d,c]=L.useState(null),h=async p=>{const f=await Za(p);f?(c(f),u("enterRoom")):(console.log("Invalid game ID"),u("landing"))};L.useEffect(()=>{e&&h(e).then(()=>{d&&d.players.some(p=>p.localPlayerID===Ae)?u("enterRoom"):u("joinGame")})},[e]);const g=()=>{u("newGame")},_=()=>{u("joinGame")},v=async()=>{if(n&&Ae&&!isNaN(n)&&i.trim()!==""){const p=Ox();l(p);const f=`${window.location.origin}/triominoes/?gameID=${p}`;window.history.pushState({path:f},"",f),await mr({gameID:p,numPlayers:n,gameHistory:{startingDeck:[],actions:[{actionType:"add-player",playerName:i,playerID:Ae}]},players:[{localPlayerID:Ae||"null",playerName:i,playerType:"human"}],gameInProgress:!1,messageHistory:{messages:[]}}),await h(p),u("enterRoom")}},k=async()=>{if(o!==""&&i.trim()!==""&&Ae){const p=await Za(o);if(console.log(p),p){const f=p.players.findIndex(m=>m.localPlayerID===Ae);if(f!==-1){const m={...p,gameHistory:{startingDeck:[...p.gameHistory.startingDeck],actions:p.gameHistory.actions.map(w=>w.actionType==="add-player"&&w.playerID===Ae?{...w,playerName:i,playerID:Ae}:w)},players:p.players.map((w,x)=>x===f?{...w,playerName:i}:w)};await mr(m),c(m)}else{let m;p.gameInProgress||p.players.length>=p.numPlayers?m="spectator":m="human";const w={...p,gameHistory:m==="human"?{startingDeck:[...p.gameHistory.startingDeck],actions:[...p.gameHistory.actions,{actionType:"add-player",playerName:i,playerID:Ae}]}:p.gameHistory,players:[...p.players,{localPlayerID:Ae||"null",playerName:i,playerType:m}]};await mr(w),c(w)}u("enterRoom")}else console.log("Invalid Game ID")}};return a==="enterRoom"&&d?y.jsx(Dx,{initialGameData:d,localPlayerID:Ae||"null"}):a==="landing"?y.jsxs("div",{className:"loading-screen",children:[y.jsx("h1",{children:"Let's play Triominoes!"}),y.jsx("button",{className:"button",onClick:g,children:"Create New Game"}),y.jsx("button",{className:"button",onClick:_,children:"Join a Game"})]}):a==="newGame"?y.jsxs("div",{className:"loading-screen",children:[y.jsx("h2",{children:"Create New Game"}),y.jsxs("label",{children:["Number of Players:",y.jsxs("select",{className:"input-field",value:n,onChange:p=>r(Number(p.target.value)),children:[y.jsx("option",{value:"",children:"Select number of players"}),[...Array(6)].map((p,f)=>y.jsx("option",{value:f+1,children:f+1},f+1))]})]}),y.jsx("br",{}),y.jsxs("label",{children:["Player Name:",y.jsx("input",{className:"input-field",type:"text",value:i,onChange:p=>s(p.target.value),placeholder:"Enter your name"})]}),y.jsx("br",{}),y.jsx("button",{className:"button",onClick:v,children:"Create Room"})]}):a==="joinGame"?y.jsxs("div",{className:"loading-screen",children:[y.jsx("h2",{children:"Join a Game"}),y.jsxs("label",{children:["Game ID:",y.jsx("input",{className:"input-field",type:"text",value:o,onChange:p=>l(p.target.value)})]}),y.jsx("br",{}),y.jsxs("label",{children:["Player Name:",y.jsx("input",{className:"input-field",type:"text",value:i,onChange:p=>s(p.target.value),placeholder:"Enter your name"})]}),y.jsx("br",{}),y.jsx("button",{className:"button",onClick:k,children:"Join Game"})]}):(console.log("Invalid Game Status"),null)}Hl.createRoot(document.getElementById("root")).render(y.jsx(Hy.StrictMode,{children:y.jsx(Mx,{})}));
