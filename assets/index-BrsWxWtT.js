(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function Oy(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Qf={exports:{}},go={},Kf={exports:{}},j={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Oi=Symbol.for("react.element"),Ly=Symbol.for("react.portal"),My=Symbol.for("react.fragment"),Fy=Symbol.for("react.strict_mode"),by=Symbol.for("react.profiler"),jy=Symbol.for("react.provider"),zy=Symbol.for("react.context"),Uy=Symbol.for("react.forward_ref"),Hy=Symbol.for("react.suspense"),$y=Symbol.for("react.memo"),Wy=Symbol.for("react.lazy"),Mc=Symbol.iterator;function Vy(t){return t===null||typeof t!="object"?null:(t=Mc&&t[Mc]||t["@@iterator"],typeof t=="function"?t:null)}var Yf={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},qf=Object.assign,Xf={};function Sr(t,e,n){this.props=t,this.context=e,this.refs=Xf,this.updater=n||Yf}Sr.prototype.isReactComponent={};Sr.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Sr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Jf(){}Jf.prototype=Sr.prototype;function Xa(t,e,n){this.props=t,this.context=e,this.refs=Xf,this.updater=n||Yf}var Ja=Xa.prototype=new Jf;Ja.constructor=Xa;qf(Ja,Sr.prototype);Ja.isPureReactComponent=!0;var Fc=Array.isArray,Zf=Object.prototype.hasOwnProperty,Za={current:null},eh={key:!0,ref:!0,__self:!0,__source:!0};function th(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Zf.call(e,r)&&!eh.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var a=Array(l),u=0;u<l;u++)a[u]=arguments[u+2];i.children=a}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:Oi,type:t,key:s,ref:o,props:i,_owner:Za.current}}function By(t,e){return{$$typeof:Oi,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function eu(t){return typeof t=="object"&&t!==null&&t.$$typeof===Oi}function Gy(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var bc=/\/+/g;function Jo(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Gy(""+t.key):e.toString(36)}function hs(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Oi:case Ly:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Jo(o,0):r,Fc(i)?(n="",t!=null&&(n=t.replace(bc,"$&/")+"/"),hs(i,e,n,"",function(u){return u})):i!=null&&(eu(i)&&(i=By(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(bc,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Fc(t))for(var l=0;l<t.length;l++){s=t[l];var a=r+Jo(s,l);o+=hs(s,e,n,a,i)}else if(a=Vy(t),typeof a=="function")for(t=a.call(t),l=0;!(s=t.next()).done;)s=s.value,a=r+Jo(s,l++),o+=hs(s,e,n,a,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Qi(t,e,n){if(t==null)return t;var r=[],i=0;return hs(t,r,"","",function(s){return e.call(n,s,i++)}),r}function Qy(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ke={current:null},ps={transition:null},Ky={ReactCurrentDispatcher:ke,ReactCurrentBatchConfig:ps,ReactCurrentOwner:Za};j.Children={map:Qi,forEach:function(t,e,n){Qi(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Qi(t,function(){e++}),e},toArray:function(t){return Qi(t,function(e){return e})||[]},only:function(t){if(!eu(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};j.Component=Sr;j.Fragment=My;j.Profiler=by;j.PureComponent=Xa;j.StrictMode=Fy;j.Suspense=Hy;j.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ky;j.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=qf({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Za.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(a in e)Zf.call(e,a)&&!eh.hasOwnProperty(a)&&(r[a]=e[a]===void 0&&l!==void 0?l[a]:e[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){l=Array(a);for(var u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:Oi,type:t.type,key:i,ref:s,props:r,_owner:o}};j.createContext=function(t){return t={$$typeof:zy,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:jy,_context:t},t.Consumer=t};j.createElement=th;j.createFactory=function(t){var e=th.bind(null,t);return e.type=t,e};j.createRef=function(){return{current:null}};j.forwardRef=function(t){return{$$typeof:Uy,render:t}};j.isValidElement=eu;j.lazy=function(t){return{$$typeof:Wy,_payload:{_status:-1,_result:t},_init:Qy}};j.memo=function(t,e){return{$$typeof:$y,type:t,compare:e===void 0?null:e}};j.startTransition=function(t){var e=ps.transition;ps.transition={};try{t()}finally{ps.transition=e}};j.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};j.useCallback=function(t,e){return ke.current.useCallback(t,e)};j.useContext=function(t){return ke.current.useContext(t)};j.useDebugValue=function(){};j.useDeferredValue=function(t){return ke.current.useDeferredValue(t)};j.useEffect=function(t,e){return ke.current.useEffect(t,e)};j.useId=function(){return ke.current.useId()};j.useImperativeHandle=function(t,e,n){return ke.current.useImperativeHandle(t,e,n)};j.useInsertionEffect=function(t,e){return ke.current.useInsertionEffect(t,e)};j.useLayoutEffect=function(t,e){return ke.current.useLayoutEffect(t,e)};j.useMemo=function(t,e){return ke.current.useMemo(t,e)};j.useReducer=function(t,e,n){return ke.current.useReducer(t,e,n)};j.useRef=function(t){return ke.current.useRef(t)};j.useState=function(t){return ke.current.useState(t)};j.useSyncExternalStore=function(t,e,n){return ke.current.useSyncExternalStore(t,e,n)};j.useTransition=function(){return ke.current.useTransition()};j.version="18.2.0";Kf.exports=j;var $=Kf.exports;const Yy=Oy($);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qy=$,Xy=Symbol.for("react.element"),Jy=Symbol.for("react.fragment"),Zy=Object.prototype.hasOwnProperty,e_=qy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,t_={key:!0,ref:!0,__self:!0,__source:!0};function nh(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Zy.call(e,r)&&!t_.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Xy,type:t,key:s,ref:o,props:i,_owner:e_.current}}go.Fragment=Jy;go.jsx=nh;go.jsxs=nh;Qf.exports=go;var w=Qf.exports,zl={},rh={exports:{}},We={},ih={exports:{}},sh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(N,O){var L=N.length;N.push(O);e:for(;0<L;){var re=L-1>>>1,ce=N[re];if(0<i(ce,O))N[re]=O,N[L]=ce,L=re;else break e}}function n(N){return N.length===0?null:N[0]}function r(N){if(N.length===0)return null;var O=N[0],L=N.pop();if(L!==O){N[0]=L;e:for(var re=0,ce=N.length,Bi=ce>>>1;re<Bi;){var dn=2*(re+1)-1,Xo=N[dn],fn=dn+1,Gi=N[fn];if(0>i(Xo,L))fn<ce&&0>i(Gi,Xo)?(N[re]=Gi,N[fn]=L,re=fn):(N[re]=Xo,N[dn]=L,re=dn);else if(fn<ce&&0>i(Gi,L))N[re]=Gi,N[fn]=L,re=fn;else break e}}return O}function i(N,O){var L=N.sortIndex-O.sortIndex;return L!==0?L:N.id-O.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var a=[],u=[],d=1,c=null,f=3,g=!1,y=!1,_=!1,S=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,h=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function m(N){for(var O=n(u);O!==null;){if(O.callback===null)r(u);else if(O.startTime<=N)r(u),O.sortIndex=O.expirationTime,e(a,O);else break;O=n(u)}}function v(N){if(_=!1,m(N),!y)if(n(a)!==null)y=!0,Yo(x);else{var O=n(u);O!==null&&qo(v,O.startTime-N)}}function x(N,O){y=!1,_&&(_=!1,p(R),R=-1),g=!0;var L=f;try{for(m(O),c=n(a);c!==null&&(!(c.expirationTime>O)||N&&!Be());){var re=c.callback;if(typeof re=="function"){c.callback=null,f=c.priorityLevel;var ce=re(c.expirationTime<=O);O=t.unstable_now(),typeof ce=="function"?c.callback=ce:c===n(a)&&r(a),m(O)}else r(a);c=n(a)}if(c!==null)var Bi=!0;else{var dn=n(u);dn!==null&&qo(v,dn.startTime-O),Bi=!1}return Bi}finally{c=null,f=L,g=!1}}var P=!1,E=null,R=-1,W=5,A=-1;function Be(){return!(t.unstable_now()-A<W)}function vt(){if(E!==null){var N=t.unstable_now();A=N;var O=!0;try{O=E(!0,N)}finally{O?ut():(P=!1,E=null)}}else P=!1}var ut;if(typeof h=="function")ut=function(){h(vt)};else if(typeof MessageChannel<"u"){var Lc=new MessageChannel,Ay=Lc.port2;Lc.port1.onmessage=vt,ut=function(){Ay.postMessage(null)}}else ut=function(){S(vt,0)};function Yo(N){E=N,P||(P=!0,ut())}function qo(N,O){R=S(function(){N(t.unstable_now())},O)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(N){N.callback=null},t.unstable_continueExecution=function(){y||g||(y=!0,Yo(x))},t.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<N?Math.floor(1e3/N):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(a)},t.unstable_next=function(N){switch(f){case 1:case 2:case 3:var O=3;break;default:O=f}var L=f;f=O;try{return N()}finally{f=L}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(N,O){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var L=f;f=N;try{return O()}finally{f=L}},t.unstable_scheduleCallback=function(N,O,L){var re=t.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?re+L:re):L=re,N){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return ce=L+ce,N={id:d++,callback:O,priorityLevel:N,startTime:L,expirationTime:ce,sortIndex:-1},L>re?(N.sortIndex=L,e(u,N),n(a)===null&&N===n(u)&&(_?(p(R),R=-1):_=!0,qo(v,L-re))):(N.sortIndex=ce,e(a,N),y||g||(y=!0,Yo(x))),N},t.unstable_shouldYield=Be,t.unstable_wrapCallback=function(N){var O=f;return function(){var L=f;f=O;try{return N.apply(this,arguments)}finally{f=L}}}})(sh);ih.exports=sh;var n_=ih.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oh=$,$e=n_;function C(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var lh=new Set,oi={};function bn(t,e){dr(t,e),dr(t+"Capture",e)}function dr(t,e){for(oi[t]=e,t=0;t<e.length;t++)lh.add(e[t])}var kt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ul=Object.prototype.hasOwnProperty,r_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,jc={},zc={};function i_(t){return Ul.call(zc,t)?!0:Ul.call(jc,t)?!1:r_.test(t)?zc[t]=!0:(jc[t]=!0,!1)}function s_(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function o_(t,e,n,r){if(e===null||typeof e>"u"||s_(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ne(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var _e={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){_e[t]=new Ne(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];_e[e]=new Ne(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){_e[t]=new Ne(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){_e[t]=new Ne(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){_e[t]=new Ne(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){_e[t]=new Ne(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){_e[t]=new Ne(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){_e[t]=new Ne(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){_e[t]=new Ne(t,5,!1,t.toLowerCase(),null,!1,!1)});var tu=/[\-:]([a-z])/g;function nu(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(tu,nu);_e[e]=new Ne(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(tu,nu);_e[e]=new Ne(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(tu,nu);_e[e]=new Ne(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){_e[t]=new Ne(t,1,!1,t.toLowerCase(),null,!1,!1)});_e.xlinkHref=new Ne("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){_e[t]=new Ne(t,1,!1,t.toLowerCase(),null,!0,!0)});function ru(t,e,n,r){var i=_e.hasOwnProperty(e)?_e[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(o_(e,n,i,r)&&(n=null),r||i===null?i_(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ot=oh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ki=Symbol.for("react.element"),Wn=Symbol.for("react.portal"),Vn=Symbol.for("react.fragment"),iu=Symbol.for("react.strict_mode"),Hl=Symbol.for("react.profiler"),ah=Symbol.for("react.provider"),uh=Symbol.for("react.context"),su=Symbol.for("react.forward_ref"),$l=Symbol.for("react.suspense"),Wl=Symbol.for("react.suspense_list"),ou=Symbol.for("react.memo"),Ft=Symbol.for("react.lazy"),ch=Symbol.for("react.offscreen"),Uc=Symbol.iterator;function Pr(t){return t===null||typeof t!="object"?null:(t=Uc&&t[Uc]||t["@@iterator"],typeof t=="function"?t:null)}var ee=Object.assign,Zo;function $r(t){if(Zo===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Zo=e&&e[1]||""}return`
`+Zo+t}var el=!1;function tl(t,e){if(!t||el)return"";el=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var a=`
`+i[o].replace(" at new "," at ");return t.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",t.displayName)),a}while(1<=o&&0<=l);break}}}finally{el=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?$r(t):""}function l_(t){switch(t.tag){case 5:return $r(t.type);case 16:return $r("Lazy");case 13:return $r("Suspense");case 19:return $r("SuspenseList");case 0:case 2:case 15:return t=tl(t.type,!1),t;case 11:return t=tl(t.type.render,!1),t;case 1:return t=tl(t.type,!0),t;default:return""}}function Vl(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Vn:return"Fragment";case Wn:return"Portal";case Hl:return"Profiler";case iu:return"StrictMode";case $l:return"Suspense";case Wl:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case uh:return(t.displayName||"Context")+".Consumer";case ah:return(t._context.displayName||"Context")+".Provider";case su:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ou:return e=t.displayName||null,e!==null?e:Vl(t.type)||"Memo";case Ft:e=t._payload,t=t._init;try{return Vl(t(e))}catch{}}return null}function a_(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Vl(e);case 8:return e===iu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function en(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function dh(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function u_(t){var e=dh(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Yi(t){t._valueTracker||(t._valueTracker=u_(t))}function fh(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=dh(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Ts(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Bl(t,e){var n=e.checked;return ee({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Hc(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=en(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function hh(t,e){e=e.checked,e!=null&&ru(t,"checked",e,!1)}function Gl(t,e){hh(t,e);var n=en(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ql(t,e.type,n):e.hasOwnProperty("defaultValue")&&Ql(t,e.type,en(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function $c(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Ql(t,e,n){(e!=="number"||Ts(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Wr=Array.isArray;function nr(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+en(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Kl(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(C(91));return ee({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Wc(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(C(92));if(Wr(n)){if(1<n.length)throw Error(C(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:en(n)}}function ph(t,e){var n=en(e.value),r=en(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Vc(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function mh(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Yl(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?mh(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var qi,gh=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(qi=qi||document.createElement("div"),qi.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=qi.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function li(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Gr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},c_=["Webkit","ms","Moz","O"];Object.keys(Gr).forEach(function(t){c_.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Gr[e]=Gr[t]})});function yh(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Gr.hasOwnProperty(t)&&Gr[t]?(""+e).trim():e+"px"}function _h(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=yh(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var d_=ee({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ql(t,e){if(e){if(d_[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(C(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(C(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(C(61))}if(e.style!=null&&typeof e.style!="object")throw Error(C(62))}}function Xl(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Jl=null;function lu(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Zl=null,rr=null,ir=null;function Bc(t){if(t=Fi(t)){if(typeof Zl!="function")throw Error(C(280));var e=t.stateNode;e&&(e=Co(e),Zl(t.stateNode,t.type,e))}}function vh(t){rr?ir?ir.push(t):ir=[t]:rr=t}function wh(){if(rr){var t=rr,e=ir;if(ir=rr=null,Bc(t),e)for(t=0;t<e.length;t++)Bc(e[t])}}function Ch(t,e){return t(e)}function Eh(){}var nl=!1;function Sh(t,e,n){if(nl)return t(e,n);nl=!0;try{return Ch(t,e,n)}finally{nl=!1,(rr!==null||ir!==null)&&(Eh(),wh())}}function ai(t,e){var n=t.stateNode;if(n===null)return null;var r=Co(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(C(231,e,typeof n));return n}var ea=!1;if(kt)try{var Dr={};Object.defineProperty(Dr,"passive",{get:function(){ea=!0}}),window.addEventListener("test",Dr,Dr),window.removeEventListener("test",Dr,Dr)}catch{ea=!1}function f_(t,e,n,r,i,s,o,l,a){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var Qr=!1,xs=null,ks=!1,ta=null,h_={onError:function(t){Qr=!0,xs=t}};function p_(t,e,n,r,i,s,o,l,a){Qr=!1,xs=null,f_.apply(h_,arguments)}function m_(t,e,n,r,i,s,o,l,a){if(p_.apply(this,arguments),Qr){if(Qr){var u=xs;Qr=!1,xs=null}else throw Error(C(198));ks||(ks=!0,ta=u)}}function jn(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Ih(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Gc(t){if(jn(t)!==t)throw Error(C(188))}function g_(t){var e=t.alternate;if(!e){if(e=jn(t),e===null)throw Error(C(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Gc(i),t;if(s===r)return Gc(i),e;s=s.sibling}throw Error(C(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(C(189))}}if(n.alternate!==r)throw Error(C(190))}if(n.tag!==3)throw Error(C(188));return n.stateNode.current===n?t:e}function Th(t){return t=g_(t),t!==null?xh(t):null}function xh(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=xh(t);if(e!==null)return e;t=t.sibling}return null}var kh=$e.unstable_scheduleCallback,Qc=$e.unstable_cancelCallback,y_=$e.unstable_shouldYield,__=$e.unstable_requestPaint,ie=$e.unstable_now,v_=$e.unstable_getCurrentPriorityLevel,au=$e.unstable_ImmediatePriority,Nh=$e.unstable_UserBlockingPriority,Ns=$e.unstable_NormalPriority,w_=$e.unstable_LowPriority,Rh=$e.unstable_IdlePriority,yo=null,pt=null;function C_(t){if(pt&&typeof pt.onCommitFiberRoot=="function")try{pt.onCommitFiberRoot(yo,t,void 0,(t.current.flags&128)===128)}catch{}}var st=Math.clz32?Math.clz32:I_,E_=Math.log,S_=Math.LN2;function I_(t){return t>>>=0,t===0?32:31-(E_(t)/S_|0)|0}var Xi=64,Ji=4194304;function Vr(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Rs(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=Vr(l):(s&=o,s!==0&&(r=Vr(s)))}else o=n&~i,o!==0?r=Vr(o):s!==0&&(r=Vr(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-st(e),i=1<<n,r|=t[n],e&=~i;return r}function T_(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function x_(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-st(s),l=1<<o,a=i[o];a===-1?(!(l&n)||l&r)&&(i[o]=T_(l,e)):a<=e&&(t.expiredLanes|=l),s&=~l}}function na(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Ph(){var t=Xi;return Xi<<=1,!(Xi&4194240)&&(Xi=64),t}function rl(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Li(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-st(e),t[e]=n}function k_(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-st(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function uu(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-st(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var H=0;function Dh(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Ah,cu,Oh,Lh,Mh,ra=!1,Zi=[],$t=null,Wt=null,Vt=null,ui=new Map,ci=new Map,jt=[],N_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Kc(t,e){switch(t){case"focusin":case"focusout":$t=null;break;case"dragenter":case"dragleave":Wt=null;break;case"mouseover":case"mouseout":Vt=null;break;case"pointerover":case"pointerout":ui.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ci.delete(e.pointerId)}}function Ar(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Fi(e),e!==null&&cu(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function R_(t,e,n,r,i){switch(e){case"focusin":return $t=Ar($t,t,e,n,r,i),!0;case"dragenter":return Wt=Ar(Wt,t,e,n,r,i),!0;case"mouseover":return Vt=Ar(Vt,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return ui.set(s,Ar(ui.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,ci.set(s,Ar(ci.get(s)||null,t,e,n,r,i)),!0}return!1}function Fh(t){var e=yn(t.target);if(e!==null){var n=jn(e);if(n!==null){if(e=n.tag,e===13){if(e=Ih(n),e!==null){t.blockedOn=e,Mh(t.priority,function(){Oh(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ms(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=ia(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Jl=r,n.target.dispatchEvent(r),Jl=null}else return e=Fi(n),e!==null&&cu(e),t.blockedOn=n,!1;e.shift()}return!0}function Yc(t,e,n){ms(t)&&n.delete(e)}function P_(){ra=!1,$t!==null&&ms($t)&&($t=null),Wt!==null&&ms(Wt)&&(Wt=null),Vt!==null&&ms(Vt)&&(Vt=null),ui.forEach(Yc),ci.forEach(Yc)}function Or(t,e){t.blockedOn===e&&(t.blockedOn=null,ra||(ra=!0,$e.unstable_scheduleCallback($e.unstable_NormalPriority,P_)))}function di(t){function e(i){return Or(i,t)}if(0<Zi.length){Or(Zi[0],t);for(var n=1;n<Zi.length;n++){var r=Zi[n];r.blockedOn===t&&(r.blockedOn=null)}}for($t!==null&&Or($t,t),Wt!==null&&Or(Wt,t),Vt!==null&&Or(Vt,t),ui.forEach(e),ci.forEach(e),n=0;n<jt.length;n++)r=jt[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<jt.length&&(n=jt[0],n.blockedOn===null);)Fh(n),n.blockedOn===null&&jt.shift()}var sr=Ot.ReactCurrentBatchConfig,Ps=!0;function D_(t,e,n,r){var i=H,s=sr.transition;sr.transition=null;try{H=1,du(t,e,n,r)}finally{H=i,sr.transition=s}}function A_(t,e,n,r){var i=H,s=sr.transition;sr.transition=null;try{H=4,du(t,e,n,r)}finally{H=i,sr.transition=s}}function du(t,e,n,r){if(Ps){var i=ia(t,e,n,r);if(i===null)hl(t,e,r,Ds,n),Kc(t,r);else if(R_(i,t,e,n,r))r.stopPropagation();else if(Kc(t,r),e&4&&-1<N_.indexOf(t)){for(;i!==null;){var s=Fi(i);if(s!==null&&Ah(s),s=ia(t,e,n,r),s===null&&hl(t,e,r,Ds,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else hl(t,e,r,null,n)}}var Ds=null;function ia(t,e,n,r){if(Ds=null,t=lu(r),t=yn(t),t!==null)if(e=jn(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Ih(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ds=t,null}function bh(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(v_()){case au:return 1;case Nh:return 4;case Ns:case w_:return 16;case Rh:return 536870912;default:return 16}default:return 16}}var Ut=null,fu=null,gs=null;function jh(){if(gs)return gs;var t,e=fu,n=e.length,r,i="value"in Ut?Ut.value:Ut.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return gs=i.slice(t,1<r?1-r:void 0)}function ys(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function es(){return!0}function qc(){return!1}function Ve(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?es:qc,this.isPropagationStopped=qc,this}return ee(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=es)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=es)},persist:function(){},isPersistent:es}),e}var Ir={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hu=Ve(Ir),Mi=ee({},Ir,{view:0,detail:0}),O_=Ve(Mi),il,sl,Lr,_o=ee({},Mi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pu,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Lr&&(Lr&&t.type==="mousemove"?(il=t.screenX-Lr.screenX,sl=t.screenY-Lr.screenY):sl=il=0,Lr=t),il)},movementY:function(t){return"movementY"in t?t.movementY:sl}}),Xc=Ve(_o),L_=ee({},_o,{dataTransfer:0}),M_=Ve(L_),F_=ee({},Mi,{relatedTarget:0}),ol=Ve(F_),b_=ee({},Ir,{animationName:0,elapsedTime:0,pseudoElement:0}),j_=Ve(b_),z_=ee({},Ir,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),U_=Ve(z_),H_=ee({},Ir,{data:0}),Jc=Ve(H_),$_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},W_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},V_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function B_(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=V_[t])?!!e[t]:!1}function pu(){return B_}var G_=ee({},Mi,{key:function(t){if(t.key){var e=$_[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ys(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?W_[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pu,charCode:function(t){return t.type==="keypress"?ys(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ys(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Q_=Ve(G_),K_=ee({},_o,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Zc=Ve(K_),Y_=ee({},Mi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pu}),q_=Ve(Y_),X_=ee({},Ir,{propertyName:0,elapsedTime:0,pseudoElement:0}),J_=Ve(X_),Z_=ee({},_o,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ev=Ve(Z_),tv=[9,13,27,32],mu=kt&&"CompositionEvent"in window,Kr=null;kt&&"documentMode"in document&&(Kr=document.documentMode);var nv=kt&&"TextEvent"in window&&!Kr,zh=kt&&(!mu||Kr&&8<Kr&&11>=Kr),ed=" ",td=!1;function Uh(t,e){switch(t){case"keyup":return tv.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hh(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Bn=!1;function rv(t,e){switch(t){case"compositionend":return Hh(e);case"keypress":return e.which!==32?null:(td=!0,ed);case"textInput":return t=e.data,t===ed&&td?null:t;default:return null}}function iv(t,e){if(Bn)return t==="compositionend"||!mu&&Uh(t,e)?(t=jh(),gs=fu=Ut=null,Bn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return zh&&e.locale!=="ko"?null:e.data;default:return null}}var sv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function nd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!sv[t.type]:e==="textarea"}function $h(t,e,n,r){vh(r),e=As(e,"onChange"),0<e.length&&(n=new hu("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Yr=null,fi=null;function ov(t){Zh(t,0)}function vo(t){var e=Kn(t);if(fh(e))return t}function lv(t,e){if(t==="change")return e}var Wh=!1;if(kt){var ll;if(kt){var al="oninput"in document;if(!al){var rd=document.createElement("div");rd.setAttribute("oninput","return;"),al=typeof rd.oninput=="function"}ll=al}else ll=!1;Wh=ll&&(!document.documentMode||9<document.documentMode)}function id(){Yr&&(Yr.detachEvent("onpropertychange",Vh),fi=Yr=null)}function Vh(t){if(t.propertyName==="value"&&vo(fi)){var e=[];$h(e,fi,t,lu(t)),Sh(ov,e)}}function av(t,e,n){t==="focusin"?(id(),Yr=e,fi=n,Yr.attachEvent("onpropertychange",Vh)):t==="focusout"&&id()}function uv(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return vo(fi)}function cv(t,e){if(t==="click")return vo(e)}function dv(t,e){if(t==="input"||t==="change")return vo(e)}function fv(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var at=typeof Object.is=="function"?Object.is:fv;function hi(t,e){if(at(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Ul.call(e,i)||!at(t[i],e[i]))return!1}return!0}function sd(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function od(t,e){var n=sd(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=sd(n)}}function Bh(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Bh(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Gh(){for(var t=window,e=Ts();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ts(t.document)}return e}function gu(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function hv(t){var e=Gh(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Bh(n.ownerDocument.documentElement,n)){if(r!==null&&gu(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=od(n,s);var o=od(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var pv=kt&&"documentMode"in document&&11>=document.documentMode,Gn=null,sa=null,qr=null,oa=!1;function ld(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;oa||Gn==null||Gn!==Ts(r)||(r=Gn,"selectionStart"in r&&gu(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),qr&&hi(qr,r)||(qr=r,r=As(sa,"onSelect"),0<r.length&&(e=new hu("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Gn)))}function ts(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Qn={animationend:ts("Animation","AnimationEnd"),animationiteration:ts("Animation","AnimationIteration"),animationstart:ts("Animation","AnimationStart"),transitionend:ts("Transition","TransitionEnd")},ul={},Qh={};kt&&(Qh=document.createElement("div").style,"AnimationEvent"in window||(delete Qn.animationend.animation,delete Qn.animationiteration.animation,delete Qn.animationstart.animation),"TransitionEvent"in window||delete Qn.transitionend.transition);function wo(t){if(ul[t])return ul[t];if(!Qn[t])return t;var e=Qn[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Qh)return ul[t]=e[n];return t}var Kh=wo("animationend"),Yh=wo("animationiteration"),qh=wo("animationstart"),Xh=wo("transitionend"),Jh=new Map,ad="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ln(t,e){Jh.set(t,e),bn(e,[t])}for(var cl=0;cl<ad.length;cl++){var dl=ad[cl],mv=dl.toLowerCase(),gv=dl[0].toUpperCase()+dl.slice(1);ln(mv,"on"+gv)}ln(Kh,"onAnimationEnd");ln(Yh,"onAnimationIteration");ln(qh,"onAnimationStart");ln("dblclick","onDoubleClick");ln("focusin","onFocus");ln("focusout","onBlur");ln(Xh,"onTransitionEnd");dr("onMouseEnter",["mouseout","mouseover"]);dr("onMouseLeave",["mouseout","mouseover"]);dr("onPointerEnter",["pointerout","pointerover"]);dr("onPointerLeave",["pointerout","pointerover"]);bn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));bn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));bn("onBeforeInput",["compositionend","keypress","textInput","paste"]);bn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));bn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));bn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Br="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),yv=new Set("cancel close invalid load scroll toggle".split(" ").concat(Br));function ud(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,m_(r,e,void 0,t),t.currentTarget=null}function Zh(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],a=l.instance,u=l.currentTarget;if(l=l.listener,a!==s&&i.isPropagationStopped())break e;ud(i,l,u),s=a}else for(o=0;o<r.length;o++){if(l=r[o],a=l.instance,u=l.currentTarget,l=l.listener,a!==s&&i.isPropagationStopped())break e;ud(i,l,u),s=a}}}if(ks)throw t=ta,ks=!1,ta=null,t}function K(t,e){var n=e[da];n===void 0&&(n=e[da]=new Set);var r=t+"__bubble";n.has(r)||(ep(e,t,2,!1),n.add(r))}function fl(t,e,n){var r=0;e&&(r|=4),ep(n,t,r,e)}var ns="_reactListening"+Math.random().toString(36).slice(2);function pi(t){if(!t[ns]){t[ns]=!0,lh.forEach(function(n){n!=="selectionchange"&&(yv.has(n)||fl(n,!1,t),fl(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ns]||(e[ns]=!0,fl("selectionchange",!1,e))}}function ep(t,e,n,r){switch(bh(e)){case 1:var i=D_;break;case 4:i=A_;break;default:i=du}n=i.bind(null,e,n,t),i=void 0,!ea||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function hl(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var a=o.tag;if((a===3||a===4)&&(a=o.stateNode.containerInfo,a===i||a.nodeType===8&&a.parentNode===i))return;o=o.return}for(;l!==null;){if(o=yn(l),o===null)return;if(a=o.tag,a===5||a===6){r=s=o;continue e}l=l.parentNode}}r=r.return}Sh(function(){var u=s,d=lu(n),c=[];e:{var f=Jh.get(t);if(f!==void 0){var g=hu,y=t;switch(t){case"keypress":if(ys(n)===0)break e;case"keydown":case"keyup":g=Q_;break;case"focusin":y="focus",g=ol;break;case"focusout":y="blur",g=ol;break;case"beforeblur":case"afterblur":g=ol;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Xc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=M_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=q_;break;case Kh:case Yh:case qh:g=j_;break;case Xh:g=J_;break;case"scroll":g=O_;break;case"wheel":g=ev;break;case"copy":case"cut":case"paste":g=U_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Zc}var _=(e&4)!==0,S=!_&&t==="scroll",p=_?f!==null?f+"Capture":null:f;_=[];for(var h=u,m;h!==null;){m=h;var v=m.stateNode;if(m.tag===5&&v!==null&&(m=v,p!==null&&(v=ai(h,p),v!=null&&_.push(mi(h,v,m)))),S)break;h=h.return}0<_.length&&(f=new g(f,y,null,n,d),c.push({event:f,listeners:_}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",f&&n!==Jl&&(y=n.relatedTarget||n.fromElement)&&(yn(y)||y[Nt]))break e;if((g||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,g?(y=n.relatedTarget||n.toElement,g=u,y=y?yn(y):null,y!==null&&(S=jn(y),y!==S||y.tag!==5&&y.tag!==6)&&(y=null)):(g=null,y=u),g!==y)){if(_=Xc,v="onMouseLeave",p="onMouseEnter",h="mouse",(t==="pointerout"||t==="pointerover")&&(_=Zc,v="onPointerLeave",p="onPointerEnter",h="pointer"),S=g==null?f:Kn(g),m=y==null?f:Kn(y),f=new _(v,h+"leave",g,n,d),f.target=S,f.relatedTarget=m,v=null,yn(d)===u&&(_=new _(p,h+"enter",y,n,d),_.target=m,_.relatedTarget=S,v=_),S=v,g&&y)t:{for(_=g,p=y,h=0,m=_;m;m=Hn(m))h++;for(m=0,v=p;v;v=Hn(v))m++;for(;0<h-m;)_=Hn(_),h--;for(;0<m-h;)p=Hn(p),m--;for(;h--;){if(_===p||p!==null&&_===p.alternate)break t;_=Hn(_),p=Hn(p)}_=null}else _=null;g!==null&&cd(c,f,g,_,!1),y!==null&&S!==null&&cd(c,S,y,_,!0)}}e:{if(f=u?Kn(u):window,g=f.nodeName&&f.nodeName.toLowerCase(),g==="select"||g==="input"&&f.type==="file")var x=lv;else if(nd(f))if(Wh)x=dv;else{x=uv;var P=av}else(g=f.nodeName)&&g.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(x=cv);if(x&&(x=x(t,u))){$h(c,x,n,d);break e}P&&P(t,f,u),t==="focusout"&&(P=f._wrapperState)&&P.controlled&&f.type==="number"&&Ql(f,"number",f.value)}switch(P=u?Kn(u):window,t){case"focusin":(nd(P)||P.contentEditable==="true")&&(Gn=P,sa=u,qr=null);break;case"focusout":qr=sa=Gn=null;break;case"mousedown":oa=!0;break;case"contextmenu":case"mouseup":case"dragend":oa=!1,ld(c,n,d);break;case"selectionchange":if(pv)break;case"keydown":case"keyup":ld(c,n,d)}var E;if(mu)e:{switch(t){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else Bn?Uh(t,n)&&(R="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(R="onCompositionStart");R&&(zh&&n.locale!=="ko"&&(Bn||R!=="onCompositionStart"?R==="onCompositionEnd"&&Bn&&(E=jh()):(Ut=d,fu="value"in Ut?Ut.value:Ut.textContent,Bn=!0)),P=As(u,R),0<P.length&&(R=new Jc(R,t,null,n,d),c.push({event:R,listeners:P}),E?R.data=E:(E=Hh(n),E!==null&&(R.data=E)))),(E=nv?rv(t,n):iv(t,n))&&(u=As(u,"onBeforeInput"),0<u.length&&(d=new Jc("onBeforeInput","beforeinput",null,n,d),c.push({event:d,listeners:u}),d.data=E))}Zh(c,e)})}function mi(t,e,n){return{instance:t,listener:e,currentTarget:n}}function As(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=ai(t,n),s!=null&&r.unshift(mi(t,s,i)),s=ai(t,e),s!=null&&r.push(mi(t,s,i))),t=t.return}return r}function Hn(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function cd(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var l=n,a=l.alternate,u=l.stateNode;if(a!==null&&a===r)break;l.tag===5&&u!==null&&(l=u,i?(a=ai(n,s),a!=null&&o.unshift(mi(n,a,l))):i||(a=ai(n,s),a!=null&&o.push(mi(n,a,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var _v=/\r\n?/g,vv=/\u0000|\uFFFD/g;function dd(t){return(typeof t=="string"?t:""+t).replace(_v,`
`).replace(vv,"")}function rs(t,e,n){if(e=dd(e),dd(t)!==e&&n)throw Error(C(425))}function Os(){}var la=null,aa=null;function ua(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ca=typeof setTimeout=="function"?setTimeout:void 0,wv=typeof clearTimeout=="function"?clearTimeout:void 0,fd=typeof Promise=="function"?Promise:void 0,Cv=typeof queueMicrotask=="function"?queueMicrotask:typeof fd<"u"?function(t){return fd.resolve(null).then(t).catch(Ev)}:ca;function Ev(t){setTimeout(function(){throw t})}function pl(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),di(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);di(e)}function Bt(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function hd(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Tr=Math.random().toString(36).slice(2),ht="__reactFiber$"+Tr,gi="__reactProps$"+Tr,Nt="__reactContainer$"+Tr,da="__reactEvents$"+Tr,Sv="__reactListeners$"+Tr,Iv="__reactHandles$"+Tr;function yn(t){var e=t[ht];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Nt]||n[ht]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=hd(t);t!==null;){if(n=t[ht])return n;t=hd(t)}return e}t=n,n=t.parentNode}return null}function Fi(t){return t=t[ht]||t[Nt],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Kn(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(C(33))}function Co(t){return t[gi]||null}var fa=[],Yn=-1;function an(t){return{current:t}}function q(t){0>Yn||(t.current=fa[Yn],fa[Yn]=null,Yn--)}function Q(t,e){Yn++,fa[Yn]=t.current,t.current=e}var tn={},Se=an(tn),Ae=an(!1),xn=tn;function fr(t,e){var n=t.type.contextTypes;if(!n)return tn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Oe(t){return t=t.childContextTypes,t!=null}function Ls(){q(Ae),q(Se)}function pd(t,e,n){if(Se.current!==tn)throw Error(C(168));Q(Se,e),Q(Ae,n)}function tp(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(C(108,a_(t)||"Unknown",i));return ee({},n,r)}function Ms(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||tn,xn=Se.current,Q(Se,t),Q(Ae,Ae.current),!0}function md(t,e,n){var r=t.stateNode;if(!r)throw Error(C(169));n?(t=tp(t,e,xn),r.__reactInternalMemoizedMergedChildContext=t,q(Ae),q(Se),Q(Se,t)):q(Ae),Q(Ae,n)}var Ct=null,Eo=!1,ml=!1;function np(t){Ct===null?Ct=[t]:Ct.push(t)}function Tv(t){Eo=!0,np(t)}function un(){if(!ml&&Ct!==null){ml=!0;var t=0,e=H;try{var n=Ct;for(H=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ct=null,Eo=!1}catch(i){throw Ct!==null&&(Ct=Ct.slice(t+1)),kh(au,un),i}finally{H=e,ml=!1}}return null}var qn=[],Xn=0,Fs=null,bs=0,Ge=[],Qe=0,kn=null,Et=1,St="";function hn(t,e){qn[Xn++]=bs,qn[Xn++]=Fs,Fs=t,bs=e}function rp(t,e,n){Ge[Qe++]=Et,Ge[Qe++]=St,Ge[Qe++]=kn,kn=t;var r=Et;t=St;var i=32-st(r)-1;r&=~(1<<i),n+=1;var s=32-st(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Et=1<<32-st(e)+i|n<<i|r,St=s+t}else Et=1<<s|n<<i|r,St=t}function yu(t){t.return!==null&&(hn(t,1),rp(t,1,0))}function _u(t){for(;t===Fs;)Fs=qn[--Xn],qn[Xn]=null,bs=qn[--Xn],qn[Xn]=null;for(;t===kn;)kn=Ge[--Qe],Ge[Qe]=null,St=Ge[--Qe],Ge[Qe]=null,Et=Ge[--Qe],Ge[Qe]=null}var Ue=null,ze=null,X=!1,tt=null;function ip(t,e){var n=Ke(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function gd(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ue=t,ze=Bt(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ue=t,ze=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=kn!==null?{id:Et,overflow:St}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ke(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ue=t,ze=null,!0):!1;default:return!1}}function ha(t){return(t.mode&1)!==0&&(t.flags&128)===0}function pa(t){if(X){var e=ze;if(e){var n=e;if(!gd(t,e)){if(ha(t))throw Error(C(418));e=Bt(n.nextSibling);var r=Ue;e&&gd(t,e)?ip(r,n):(t.flags=t.flags&-4097|2,X=!1,Ue=t)}}else{if(ha(t))throw Error(C(418));t.flags=t.flags&-4097|2,X=!1,Ue=t}}}function yd(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ue=t}function is(t){if(t!==Ue)return!1;if(!X)return yd(t),X=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ua(t.type,t.memoizedProps)),e&&(e=ze)){if(ha(t))throw sp(),Error(C(418));for(;e;)ip(t,e),e=Bt(e.nextSibling)}if(yd(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(C(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){ze=Bt(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}ze=null}}else ze=Ue?Bt(t.stateNode.nextSibling):null;return!0}function sp(){for(var t=ze;t;)t=Bt(t.nextSibling)}function hr(){ze=Ue=null,X=!1}function vu(t){tt===null?tt=[t]:tt.push(t)}var xv=Ot.ReactCurrentBatchConfig;function Ze(t,e){if(t&&t.defaultProps){e=ee({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var js=an(null),zs=null,Jn=null,wu=null;function Cu(){wu=Jn=zs=null}function Eu(t){var e=js.current;q(js),t._currentValue=e}function ma(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function or(t,e){zs=t,wu=Jn=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Pe=!0),t.firstContext=null)}function qe(t){var e=t._currentValue;if(wu!==t)if(t={context:t,memoizedValue:e,next:null},Jn===null){if(zs===null)throw Error(C(308));Jn=t,zs.dependencies={lanes:0,firstContext:t}}else Jn=Jn.next=t;return e}var _n=null;function Su(t){_n===null?_n=[t]:_n.push(t)}function op(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Su(e)):(n.next=i.next,i.next=n),e.interleaved=n,Rt(t,r)}function Rt(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var bt=!1;function Iu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lp(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Tt(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Gt(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,z&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Rt(t,n)}return i=r.interleaved,i===null?(e.next=e,Su(r)):(e.next=i.next,i.next=e),r.interleaved=e,Rt(t,n)}function _s(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,uu(t,n)}}function _d(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Us(t,e,n,r){var i=t.updateQueue;bt=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var a=l,u=a.next;a.next=null,o===null?s=u:o.next=u,o=a;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=a))}if(s!==null){var c=i.baseState;o=0,d=u=a=null,l=s;do{var f=l.lane,g=l.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:g,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var y=t,_=l;switch(f=e,g=n,_.tag){case 1:if(y=_.payload,typeof y=="function"){c=y.call(g,c,f);break e}c=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=_.payload,f=typeof y=="function"?y.call(g,c,f):y,f==null)break e;c=ee({},c,f);break e;case 2:bt=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[l]:f.push(l))}else g={eventTime:g,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=g,a=c):d=d.next=g,o|=f;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;f=l,l=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(d===null&&(a=c),i.baseState=a,i.firstBaseUpdate=u,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Rn|=o,t.lanes=o,t.memoizedState=c}}function vd(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(C(191,i));i.call(r)}}}var ap=new oh.Component().refs;function ga(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ee({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var So={isMounted:function(t){return(t=t._reactInternals)?jn(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=xe(),i=Kt(t),s=Tt(r,i);s.payload=e,n!=null&&(s.callback=n),e=Gt(t,s,i),e!==null&&(ot(e,t,i,r),_s(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=xe(),i=Kt(t),s=Tt(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Gt(t,s,i),e!==null&&(ot(e,t,i,r),_s(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=xe(),r=Kt(t),i=Tt(n,r);i.tag=2,e!=null&&(i.callback=e),e=Gt(t,i,r),e!==null&&(ot(e,t,r,n),_s(e,t,r))}};function wd(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!hi(n,r)||!hi(i,s):!0}function up(t,e,n){var r=!1,i=tn,s=e.contextType;return typeof s=="object"&&s!==null?s=qe(s):(i=Oe(e)?xn:Se.current,r=e.contextTypes,s=(r=r!=null)?fr(t,i):tn),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=So,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Cd(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&So.enqueueReplaceState(e,e.state,null)}function ya(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=ap,Iu(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=qe(s):(s=Oe(e)?xn:Se.current,i.context=fr(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(ga(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&So.enqueueReplaceState(i,i.state,null),Us(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Mr(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(C(309));var r=n.stateNode}if(!r)throw Error(C(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=i.refs;l===ap&&(l=i.refs={}),o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(C(284));if(!n._owner)throw Error(C(290,t))}return t}function ss(t,e){throw t=Object.prototype.toString.call(e),Error(C(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Ed(t){var e=t._init;return e(t._payload)}function cp(t){function e(p,h){if(t){var m=p.deletions;m===null?(p.deletions=[h],p.flags|=16):m.push(h)}}function n(p,h){if(!t)return null;for(;h!==null;)e(p,h),h=h.sibling;return null}function r(p,h){for(p=new Map;h!==null;)h.key!==null?p.set(h.key,h):p.set(h.index,h),h=h.sibling;return p}function i(p,h){return p=Yt(p,h),p.index=0,p.sibling=null,p}function s(p,h,m){return p.index=m,t?(m=p.alternate,m!==null?(m=m.index,m<h?(p.flags|=2,h):m):(p.flags|=2,h)):(p.flags|=1048576,h)}function o(p){return t&&p.alternate===null&&(p.flags|=2),p}function l(p,h,m,v){return h===null||h.tag!==6?(h=El(m,p.mode,v),h.return=p,h):(h=i(h,m),h.return=p,h)}function a(p,h,m,v){var x=m.type;return x===Vn?d(p,h,m.props.children,v,m.key):h!==null&&(h.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===Ft&&Ed(x)===h.type)?(v=i(h,m.props),v.ref=Mr(p,h,m),v.return=p,v):(v=Is(m.type,m.key,m.props,null,p.mode,v),v.ref=Mr(p,h,m),v.return=p,v)}function u(p,h,m,v){return h===null||h.tag!==4||h.stateNode.containerInfo!==m.containerInfo||h.stateNode.implementation!==m.implementation?(h=Sl(m,p.mode,v),h.return=p,h):(h=i(h,m.children||[]),h.return=p,h)}function d(p,h,m,v,x){return h===null||h.tag!==7?(h=In(m,p.mode,v,x),h.return=p,h):(h=i(h,m),h.return=p,h)}function c(p,h,m){if(typeof h=="string"&&h!==""||typeof h=="number")return h=El(""+h,p.mode,m),h.return=p,h;if(typeof h=="object"&&h!==null){switch(h.$$typeof){case Ki:return m=Is(h.type,h.key,h.props,null,p.mode,m),m.ref=Mr(p,null,h),m.return=p,m;case Wn:return h=Sl(h,p.mode,m),h.return=p,h;case Ft:var v=h._init;return c(p,v(h._payload),m)}if(Wr(h)||Pr(h))return h=In(h,p.mode,m,null),h.return=p,h;ss(p,h)}return null}function f(p,h,m,v){var x=h!==null?h.key:null;if(typeof m=="string"&&m!==""||typeof m=="number")return x!==null?null:l(p,h,""+m,v);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Ki:return m.key===x?a(p,h,m,v):null;case Wn:return m.key===x?u(p,h,m,v):null;case Ft:return x=m._init,f(p,h,x(m._payload),v)}if(Wr(m)||Pr(m))return x!==null?null:d(p,h,m,v,null);ss(p,m)}return null}function g(p,h,m,v,x){if(typeof v=="string"&&v!==""||typeof v=="number")return p=p.get(m)||null,l(h,p,""+v,x);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Ki:return p=p.get(v.key===null?m:v.key)||null,a(h,p,v,x);case Wn:return p=p.get(v.key===null?m:v.key)||null,u(h,p,v,x);case Ft:var P=v._init;return g(p,h,m,P(v._payload),x)}if(Wr(v)||Pr(v))return p=p.get(m)||null,d(h,p,v,x,null);ss(h,v)}return null}function y(p,h,m,v){for(var x=null,P=null,E=h,R=h=0,W=null;E!==null&&R<m.length;R++){E.index>R?(W=E,E=null):W=E.sibling;var A=f(p,E,m[R],v);if(A===null){E===null&&(E=W);break}t&&E&&A.alternate===null&&e(p,E),h=s(A,h,R),P===null?x=A:P.sibling=A,P=A,E=W}if(R===m.length)return n(p,E),X&&hn(p,R),x;if(E===null){for(;R<m.length;R++)E=c(p,m[R],v),E!==null&&(h=s(E,h,R),P===null?x=E:P.sibling=E,P=E);return X&&hn(p,R),x}for(E=r(p,E);R<m.length;R++)W=g(E,p,R,m[R],v),W!==null&&(t&&W.alternate!==null&&E.delete(W.key===null?R:W.key),h=s(W,h,R),P===null?x=W:P.sibling=W,P=W);return t&&E.forEach(function(Be){return e(p,Be)}),X&&hn(p,R),x}function _(p,h,m,v){var x=Pr(m);if(typeof x!="function")throw Error(C(150));if(m=x.call(m),m==null)throw Error(C(151));for(var P=x=null,E=h,R=h=0,W=null,A=m.next();E!==null&&!A.done;R++,A=m.next()){E.index>R?(W=E,E=null):W=E.sibling;var Be=f(p,E,A.value,v);if(Be===null){E===null&&(E=W);break}t&&E&&Be.alternate===null&&e(p,E),h=s(Be,h,R),P===null?x=Be:P.sibling=Be,P=Be,E=W}if(A.done)return n(p,E),X&&hn(p,R),x;if(E===null){for(;!A.done;R++,A=m.next())A=c(p,A.value,v),A!==null&&(h=s(A,h,R),P===null?x=A:P.sibling=A,P=A);return X&&hn(p,R),x}for(E=r(p,E);!A.done;R++,A=m.next())A=g(E,p,R,A.value,v),A!==null&&(t&&A.alternate!==null&&E.delete(A.key===null?R:A.key),h=s(A,h,R),P===null?x=A:P.sibling=A,P=A);return t&&E.forEach(function(vt){return e(p,vt)}),X&&hn(p,R),x}function S(p,h,m,v){if(typeof m=="object"&&m!==null&&m.type===Vn&&m.key===null&&(m=m.props.children),typeof m=="object"&&m!==null){switch(m.$$typeof){case Ki:e:{for(var x=m.key,P=h;P!==null;){if(P.key===x){if(x=m.type,x===Vn){if(P.tag===7){n(p,P.sibling),h=i(P,m.props.children),h.return=p,p=h;break e}}else if(P.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===Ft&&Ed(x)===P.type){n(p,P.sibling),h=i(P,m.props),h.ref=Mr(p,P,m),h.return=p,p=h;break e}n(p,P);break}else e(p,P);P=P.sibling}m.type===Vn?(h=In(m.props.children,p.mode,v,m.key),h.return=p,p=h):(v=Is(m.type,m.key,m.props,null,p.mode,v),v.ref=Mr(p,h,m),v.return=p,p=v)}return o(p);case Wn:e:{for(P=m.key;h!==null;){if(h.key===P)if(h.tag===4&&h.stateNode.containerInfo===m.containerInfo&&h.stateNode.implementation===m.implementation){n(p,h.sibling),h=i(h,m.children||[]),h.return=p,p=h;break e}else{n(p,h);break}else e(p,h);h=h.sibling}h=Sl(m,p.mode,v),h.return=p,p=h}return o(p);case Ft:return P=m._init,S(p,h,P(m._payload),v)}if(Wr(m))return y(p,h,m,v);if(Pr(m))return _(p,h,m,v);ss(p,m)}return typeof m=="string"&&m!==""||typeof m=="number"?(m=""+m,h!==null&&h.tag===6?(n(p,h.sibling),h=i(h,m),h.return=p,p=h):(n(p,h),h=El(m,p.mode,v),h.return=p,p=h),o(p)):n(p,h)}return S}var pr=cp(!0),dp=cp(!1),bi={},mt=an(bi),yi=an(bi),_i=an(bi);function vn(t){if(t===bi)throw Error(C(174));return t}function Tu(t,e){switch(Q(_i,e),Q(yi,t),Q(mt,bi),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Yl(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Yl(e,t)}q(mt),Q(mt,e)}function mr(){q(mt),q(yi),q(_i)}function fp(t){vn(_i.current);var e=vn(mt.current),n=Yl(e,t.type);e!==n&&(Q(yi,t),Q(mt,n))}function xu(t){yi.current===t&&(q(mt),q(yi))}var J=an(0);function Hs(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var gl=[];function ku(){for(var t=0;t<gl.length;t++)gl[t]._workInProgressVersionPrimary=null;gl.length=0}var vs=Ot.ReactCurrentDispatcher,yl=Ot.ReactCurrentBatchConfig,Nn=0,Z=null,oe=null,fe=null,$s=!1,Xr=!1,vi=0,kv=0;function ve(){throw Error(C(321))}function Nu(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!at(t[n],e[n]))return!1;return!0}function Ru(t,e,n,r,i,s){if(Nn=s,Z=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,vs.current=t===null||t.memoizedState===null?Dv:Av,t=n(r,i),Xr){s=0;do{if(Xr=!1,vi=0,25<=s)throw Error(C(301));s+=1,fe=oe=null,e.updateQueue=null,vs.current=Ov,t=n(r,i)}while(Xr)}if(vs.current=Ws,e=oe!==null&&oe.next!==null,Nn=0,fe=oe=Z=null,$s=!1,e)throw Error(C(300));return t}function Pu(){var t=vi!==0;return vi=0,t}function dt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fe===null?Z.memoizedState=fe=t:fe=fe.next=t,fe}function Xe(){if(oe===null){var t=Z.alternate;t=t!==null?t.memoizedState:null}else t=oe.next;var e=fe===null?Z.memoizedState:fe.next;if(e!==null)fe=e,oe=t;else{if(t===null)throw Error(C(310));oe=t,t={memoizedState:oe.memoizedState,baseState:oe.baseState,baseQueue:oe.baseQueue,queue:oe.queue,next:null},fe===null?Z.memoizedState=fe=t:fe=fe.next=t}return fe}function wi(t,e){return typeof e=="function"?e(t):e}function _l(t){var e=Xe(),n=e.queue;if(n===null)throw Error(C(311));n.lastRenderedReducer=t;var r=oe,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=o=null,a=null,u=s;do{var d=u.lane;if((Nn&d)===d)a!==null&&(a=a.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var c={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};a===null?(l=a=c,o=r):a=a.next=c,Z.lanes|=d,Rn|=d}u=u.next}while(u!==null&&u!==s);a===null?o=r:a.next=l,at(r,e.memoizedState)||(Pe=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=a,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Z.lanes|=s,Rn|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function vl(t){var e=Xe(),n=e.queue;if(n===null)throw Error(C(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);at(s,e.memoizedState)||(Pe=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function hp(){}function pp(t,e){var n=Z,r=Xe(),i=e(),s=!at(r.memoizedState,i);if(s&&(r.memoizedState=i,Pe=!0),r=r.queue,Du(yp.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||fe!==null&&fe.memoizedState.tag&1){if(n.flags|=2048,Ci(9,gp.bind(null,n,r,i,e),void 0,null),me===null)throw Error(C(349));Nn&30||mp(n,e,i)}return i}function mp(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Z.updateQueue,e===null?(e={lastEffect:null,stores:null},Z.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function gp(t,e,n,r){e.value=n,e.getSnapshot=r,_p(e)&&vp(t)}function yp(t,e,n){return n(function(){_p(e)&&vp(t)})}function _p(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!at(t,n)}catch{return!0}}function vp(t){var e=Rt(t,1);e!==null&&ot(e,t,1,-1)}function Sd(t){var e=dt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wi,lastRenderedState:t},e.queue=t,t=t.dispatch=Pv.bind(null,Z,t),[e.memoizedState,t]}function Ci(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Z.updateQueue,e===null?(e={lastEffect:null,stores:null},Z.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function wp(){return Xe().memoizedState}function ws(t,e,n,r){var i=dt();Z.flags|=t,i.memoizedState=Ci(1|e,n,void 0,r===void 0?null:r)}function Io(t,e,n,r){var i=Xe();r=r===void 0?null:r;var s=void 0;if(oe!==null){var o=oe.memoizedState;if(s=o.destroy,r!==null&&Nu(r,o.deps)){i.memoizedState=Ci(e,n,s,r);return}}Z.flags|=t,i.memoizedState=Ci(1|e,n,s,r)}function Id(t,e){return ws(8390656,8,t,e)}function Du(t,e){return Io(2048,8,t,e)}function Cp(t,e){return Io(4,2,t,e)}function Ep(t,e){return Io(4,4,t,e)}function Sp(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Ip(t,e,n){return n=n!=null?n.concat([t]):null,Io(4,4,Sp.bind(null,e,t),n)}function Au(){}function Tp(t,e){var n=Xe();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Nu(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function xp(t,e){var n=Xe();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Nu(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function kp(t,e,n){return Nn&21?(at(n,e)||(n=Ph(),Z.lanes|=n,Rn|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Pe=!0),t.memoizedState=n)}function Nv(t,e){var n=H;H=n!==0&&4>n?n:4,t(!0);var r=yl.transition;yl.transition={};try{t(!1),e()}finally{H=n,yl.transition=r}}function Np(){return Xe().memoizedState}function Rv(t,e,n){var r=Kt(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Rp(t))Pp(e,n);else if(n=op(t,e,n,r),n!==null){var i=xe();ot(n,t,r,i),Dp(n,e,r)}}function Pv(t,e,n){var r=Kt(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Rp(t))Pp(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,n);if(i.hasEagerState=!0,i.eagerState=l,at(l,o)){var a=e.interleaved;a===null?(i.next=i,Su(e)):(i.next=a.next,a.next=i),e.interleaved=i;return}}catch{}finally{}n=op(t,e,i,r),n!==null&&(i=xe(),ot(n,t,r,i),Dp(n,e,r))}}function Rp(t){var e=t.alternate;return t===Z||e!==null&&e===Z}function Pp(t,e){Xr=$s=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Dp(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,uu(t,n)}}var Ws={readContext:qe,useCallback:ve,useContext:ve,useEffect:ve,useImperativeHandle:ve,useInsertionEffect:ve,useLayoutEffect:ve,useMemo:ve,useReducer:ve,useRef:ve,useState:ve,useDebugValue:ve,useDeferredValue:ve,useTransition:ve,useMutableSource:ve,useSyncExternalStore:ve,useId:ve,unstable_isNewReconciler:!1},Dv={readContext:qe,useCallback:function(t,e){return dt().memoizedState=[t,e===void 0?null:e],t},useContext:qe,useEffect:Id,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ws(4194308,4,Sp.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ws(4194308,4,t,e)},useInsertionEffect:function(t,e){return ws(4,2,t,e)},useMemo:function(t,e){var n=dt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=dt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Rv.bind(null,Z,t),[r.memoizedState,t]},useRef:function(t){var e=dt();return t={current:t},e.memoizedState=t},useState:Sd,useDebugValue:Au,useDeferredValue:function(t){return dt().memoizedState=t},useTransition:function(){var t=Sd(!1),e=t[0];return t=Nv.bind(null,t[1]),dt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Z,i=dt();if(X){if(n===void 0)throw Error(C(407));n=n()}else{if(n=e(),me===null)throw Error(C(349));Nn&30||mp(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Id(yp.bind(null,r,s,t),[t]),r.flags|=2048,Ci(9,gp.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=dt(),e=me.identifierPrefix;if(X){var n=St,r=Et;n=(r&~(1<<32-st(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=vi++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=kv++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Av={readContext:qe,useCallback:Tp,useContext:qe,useEffect:Du,useImperativeHandle:Ip,useInsertionEffect:Cp,useLayoutEffect:Ep,useMemo:xp,useReducer:_l,useRef:wp,useState:function(){return _l(wi)},useDebugValue:Au,useDeferredValue:function(t){var e=Xe();return kp(e,oe.memoizedState,t)},useTransition:function(){var t=_l(wi)[0],e=Xe().memoizedState;return[t,e]},useMutableSource:hp,useSyncExternalStore:pp,useId:Np,unstable_isNewReconciler:!1},Ov={readContext:qe,useCallback:Tp,useContext:qe,useEffect:Du,useImperativeHandle:Ip,useInsertionEffect:Cp,useLayoutEffect:Ep,useMemo:xp,useReducer:vl,useRef:wp,useState:function(){return vl(wi)},useDebugValue:Au,useDeferredValue:function(t){var e=Xe();return oe===null?e.memoizedState=t:kp(e,oe.memoizedState,t)},useTransition:function(){var t=vl(wi)[0],e=Xe().memoizedState;return[t,e]},useMutableSource:hp,useSyncExternalStore:pp,useId:Np,unstable_isNewReconciler:!1};function gr(t,e){try{var n="",r=e;do n+=l_(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function wl(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function _a(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Lv=typeof WeakMap=="function"?WeakMap:Map;function Ap(t,e,n){n=Tt(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Bs||(Bs=!0,Na=r),_a(t,e)},n}function Op(t,e,n){n=Tt(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){_a(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){_a(t,e),typeof r!="function"&&(Qt===null?Qt=new Set([this]):Qt.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Td(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Lv;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Kv.bind(null,t,e,n),e.then(t,t))}function xd(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function kd(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Tt(-1,1),e.tag=2,Gt(n,e,1))),n.lanes|=1),t)}var Mv=Ot.ReactCurrentOwner,Pe=!1;function Ie(t,e,n,r){e.child=t===null?dp(e,null,n,r):pr(e,t.child,n,r)}function Nd(t,e,n,r,i){n=n.render;var s=e.ref;return or(e,i),r=Ru(t,e,n,r,s,i),n=Pu(),t!==null&&!Pe?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Pt(t,e,i)):(X&&n&&yu(e),e.flags|=1,Ie(t,e,r,i),e.child)}function Rd(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Uu(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Lp(t,e,s,r,i)):(t=Is(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:hi,n(o,r)&&t.ref===e.ref)return Pt(t,e,i)}return e.flags|=1,t=Yt(s,r),t.ref=e.ref,t.return=e,e.child=t}function Lp(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(hi(s,r)&&t.ref===e.ref)if(Pe=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Pe=!0);else return e.lanes=t.lanes,Pt(t,e,i)}return va(t,e,n,r,i)}function Mp(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Q(er,je),je|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Q(er,je),je|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Q(er,je),je|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Q(er,je),je|=r;return Ie(t,e,i,n),e.child}function Fp(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function va(t,e,n,r,i){var s=Oe(n)?xn:Se.current;return s=fr(e,s),or(e,i),n=Ru(t,e,n,r,s,i),r=Pu(),t!==null&&!Pe?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Pt(t,e,i)):(X&&r&&yu(e),e.flags|=1,Ie(t,e,n,i),e.child)}function Pd(t,e,n,r,i){if(Oe(n)){var s=!0;Ms(e)}else s=!1;if(or(e,i),e.stateNode===null)Cs(t,e),up(e,n,r),ya(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var a=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=qe(u):(u=Oe(n)?xn:Se.current,u=fr(e,u));var d=n.getDerivedStateFromProps,c=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";c||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||a!==u)&&Cd(e,o,r,u),bt=!1;var f=e.memoizedState;o.state=f,Us(e,r,o,i),a=e.memoizedState,l!==r||f!==a||Ae.current||bt?(typeof d=="function"&&(ga(e,n,d,r),a=e.memoizedState),(l=bt||wd(e,n,l,r,f,a,u))?(c||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=a),o.props=r,o.state=a,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,lp(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:Ze(e.type,l),o.props=u,c=e.pendingProps,f=o.context,a=n.contextType,typeof a=="object"&&a!==null?a=qe(a):(a=Oe(n)?xn:Se.current,a=fr(e,a));var g=n.getDerivedStateFromProps;(d=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==c||f!==a)&&Cd(e,o,r,a),bt=!1,f=e.memoizedState,o.state=f,Us(e,r,o,i);var y=e.memoizedState;l!==c||f!==y||Ae.current||bt?(typeof g=="function"&&(ga(e,n,g,r),y=e.memoizedState),(u=bt||wd(e,n,u,r,f,y,a)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,y,a),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,y,a)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),o.props=r,o.state=y,o.context=a,r=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return wa(t,e,n,r,s,i)}function wa(t,e,n,r,i,s){Fp(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&md(e,n,!1),Pt(t,e,s);r=e.stateNode,Mv.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=pr(e,t.child,null,s),e.child=pr(e,null,l,s)):Ie(t,e,l,s),e.memoizedState=r.state,i&&md(e,n,!0),e.child}function bp(t){var e=t.stateNode;e.pendingContext?pd(t,e.pendingContext,e.pendingContext!==e.context):e.context&&pd(t,e.context,!1),Tu(t,e.containerInfo)}function Dd(t,e,n,r,i){return hr(),vu(i),e.flags|=256,Ie(t,e,n,r),e.child}var Ca={dehydrated:null,treeContext:null,retryLane:0};function Ea(t){return{baseLanes:t,cachePool:null,transitions:null}}function jp(t,e,n){var r=e.pendingProps,i=J.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Q(J,i&1),t===null)return pa(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=ko(o,r,0,null),t=In(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Ea(n),e.memoizedState=Ca,t):Ou(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return Fv(t,e,o,r,l,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,l=i.sibling;var a={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=a,e.deletions=null):(r=Yt(i,a),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=Yt(l,s):(s=In(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Ea(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Ca,r}return s=t.child,t=s.sibling,r=Yt(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Ou(t,e){return e=ko({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function os(t,e,n,r){return r!==null&&vu(r),pr(e,t.child,null,n),t=Ou(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Fv(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=wl(Error(C(422))),os(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=ko({mode:"visible",children:r.children},i,0,null),s=In(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&pr(e,t.child,null,o),e.child.memoizedState=Ea(o),e.memoizedState=Ca,s);if(!(e.mode&1))return os(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(C(419)),r=wl(s,r,void 0),os(t,e,o,r)}if(l=(o&t.childLanes)!==0,Pe||l){if(r=me,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Rt(t,i),ot(r,t,i,-1))}return zu(),r=wl(Error(C(421))),os(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Yv.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,ze=Bt(i.nextSibling),Ue=e,X=!0,tt=null,t!==null&&(Ge[Qe++]=Et,Ge[Qe++]=St,Ge[Qe++]=kn,Et=t.id,St=t.overflow,kn=e),e=Ou(e,r.children),e.flags|=4096,e)}function Ad(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),ma(t.return,e,n)}function Cl(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function zp(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Ie(t,e,r.children,n),r=J.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ad(t,n,e);else if(t.tag===19)Ad(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Q(J,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Hs(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Cl(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Hs(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Cl(e,!0,n,null,s);break;case"together":Cl(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Cs(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Pt(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Rn|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(C(153));if(e.child!==null){for(t=e.child,n=Yt(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Yt(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function bv(t,e,n){switch(e.tag){case 3:bp(e),hr();break;case 5:fp(e);break;case 1:Oe(e.type)&&Ms(e);break;case 4:Tu(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Q(js,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Q(J,J.current&1),e.flags|=128,null):n&e.child.childLanes?jp(t,e,n):(Q(J,J.current&1),t=Pt(t,e,n),t!==null?t.sibling:null);Q(J,J.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return zp(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Q(J,J.current),r)break;return null;case 22:case 23:return e.lanes=0,Mp(t,e,n)}return Pt(t,e,n)}var Up,Sa,Hp,$p;Up=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Sa=function(){};Hp=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,vn(mt.current);var s=null;switch(n){case"input":i=Bl(t,i),r=Bl(t,r),s=[];break;case"select":i=ee({},i,{value:void 0}),r=ee({},r,{value:void 0}),s=[];break;case"textarea":i=Kl(t,i),r=Kl(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Os)}ql(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(oi.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var a=r[u];if(l=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&a!==l&&(a!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||a&&a.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in a)a.hasOwnProperty(o)&&l[o]!==a[o]&&(n||(n={}),n[o]=a[o])}else n||(s||(s=[]),s.push(u,n)),n=a;else u==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(s=s||[]).push(u,a)):u==="children"?typeof a!="string"&&typeof a!="number"||(s=s||[]).push(u,""+a):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(oi.hasOwnProperty(u)?(a!=null&&u==="onScroll"&&K("scroll",t),s||l===a||(s=[])):(s=s||[]).push(u,a))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};$p=function(t,e,n,r){n!==r&&(e.flags|=4)};function Fr(t,e){if(!X)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function we(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function jv(t,e,n){var r=e.pendingProps;switch(_u(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return we(e),null;case 1:return Oe(e.type)&&Ls(),we(e),null;case 3:return r=e.stateNode,mr(),q(Ae),q(Se),ku(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(is(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,tt!==null&&(Da(tt),tt=null))),Sa(t,e),we(e),null;case 5:xu(e);var i=vn(_i.current);if(n=e.type,t!==null&&e.stateNode!=null)Hp(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(C(166));return we(e),null}if(t=vn(mt.current),is(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[ht]=e,r[gi]=s,t=(e.mode&1)!==0,n){case"dialog":K("cancel",r),K("close",r);break;case"iframe":case"object":case"embed":K("load",r);break;case"video":case"audio":for(i=0;i<Br.length;i++)K(Br[i],r);break;case"source":K("error",r);break;case"img":case"image":case"link":K("error",r),K("load",r);break;case"details":K("toggle",r);break;case"input":Hc(r,s),K("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},K("invalid",r);break;case"textarea":Wc(r,s),K("invalid",r)}ql(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&rs(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&rs(r.textContent,l,t),i=["children",""+l]):oi.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&K("scroll",r)}switch(n){case"input":Yi(r),$c(r,s,!0);break;case"textarea":Yi(r),Vc(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Os)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=mh(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[ht]=e,t[gi]=r,Up(t,e,!1,!1),e.stateNode=t;e:{switch(o=Xl(n,r),n){case"dialog":K("cancel",t),K("close",t),i=r;break;case"iframe":case"object":case"embed":K("load",t),i=r;break;case"video":case"audio":for(i=0;i<Br.length;i++)K(Br[i],t);i=r;break;case"source":K("error",t),i=r;break;case"img":case"image":case"link":K("error",t),K("load",t),i=r;break;case"details":K("toggle",t),i=r;break;case"input":Hc(t,r),i=Bl(t,r),K("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=ee({},r,{value:void 0}),K("invalid",t);break;case"textarea":Wc(t,r),i=Kl(t,r),K("invalid",t);break;default:i=r}ql(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var a=l[s];s==="style"?_h(t,a):s==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&gh(t,a)):s==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&li(t,a):typeof a=="number"&&li(t,""+a):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(oi.hasOwnProperty(s)?a!=null&&s==="onScroll"&&K("scroll",t):a!=null&&ru(t,s,a,o))}switch(n){case"input":Yi(t),$c(t,r,!1);break;case"textarea":Yi(t),Vc(t);break;case"option":r.value!=null&&t.setAttribute("value",""+en(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?nr(t,!!r.multiple,s,!1):r.defaultValue!=null&&nr(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Os)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return we(e),null;case 6:if(t&&e.stateNode!=null)$p(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(C(166));if(n=vn(_i.current),vn(mt.current),is(e)){if(r=e.stateNode,n=e.memoizedProps,r[ht]=e,(s=r.nodeValue!==n)&&(t=Ue,t!==null))switch(t.tag){case 3:rs(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&rs(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ht]=e,e.stateNode=r}return we(e),null;case 13:if(q(J),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(X&&ze!==null&&e.mode&1&&!(e.flags&128))sp(),hr(),e.flags|=98560,s=!1;else if(s=is(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(C(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(C(317));s[ht]=e}else hr(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;we(e),s=!1}else tt!==null&&(Da(tt),tt=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||J.current&1?ue===0&&(ue=3):zu())),e.updateQueue!==null&&(e.flags|=4),we(e),null);case 4:return mr(),Sa(t,e),t===null&&pi(e.stateNode.containerInfo),we(e),null;case 10:return Eu(e.type._context),we(e),null;case 17:return Oe(e.type)&&Ls(),we(e),null;case 19:if(q(J),s=e.memoizedState,s===null)return we(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Fr(s,!1);else{if(ue!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Hs(t),o!==null){for(e.flags|=128,Fr(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Q(J,J.current&1|2),e.child}t=t.sibling}s.tail!==null&&ie()>yr&&(e.flags|=128,r=!0,Fr(s,!1),e.lanes=4194304)}else{if(!r)if(t=Hs(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Fr(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!X)return we(e),null}else 2*ie()-s.renderingStartTime>yr&&n!==1073741824&&(e.flags|=128,r=!0,Fr(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=ie(),e.sibling=null,n=J.current,Q(J,r?n&1|2:n&1),e):(we(e),null);case 22:case 23:return ju(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?je&1073741824&&(we(e),e.subtreeFlags&6&&(e.flags|=8192)):we(e),null;case 24:return null;case 25:return null}throw Error(C(156,e.tag))}function zv(t,e){switch(_u(e),e.tag){case 1:return Oe(e.type)&&Ls(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return mr(),q(Ae),q(Se),ku(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return xu(e),null;case 13:if(q(J),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(C(340));hr()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return q(J),null;case 4:return mr(),null;case 10:return Eu(e.type._context),null;case 22:case 23:return ju(),null;case 24:return null;default:return null}}var ls=!1,Ce=!1,Uv=typeof WeakSet=="function"?WeakSet:Set,k=null;function Zn(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){te(t,e,r)}else n.current=null}function Ia(t,e,n){try{n()}catch(r){te(t,e,r)}}var Od=!1;function Hv(t,e){if(la=Ps,t=Gh(),gu(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,a=-1,u=0,d=0,c=t,f=null;t:for(;;){for(var g;c!==n||i!==0&&c.nodeType!==3||(l=o+i),c!==s||r!==0&&c.nodeType!==3||(a=o+r),c.nodeType===3&&(o+=c.nodeValue.length),(g=c.firstChild)!==null;)f=c,c=g;for(;;){if(c===t)break t;if(f===n&&++u===i&&(l=o),f===s&&++d===r&&(a=o),(g=c.nextSibling)!==null)break;c=f,f=c.parentNode}c=g}n=l===-1||a===-1?null:{start:l,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(aa={focusedElem:t,selectionRange:n},Ps=!1,k=e;k!==null;)if(e=k,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,k=t;else for(;k!==null;){e=k;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var _=y.memoizedProps,S=y.memoizedState,p=e.stateNode,h=p.getSnapshotBeforeUpdate(e.elementType===e.type?_:Ze(e.type,_),S);p.__reactInternalSnapshotBeforeUpdate=h}break;case 3:var m=e.stateNode.containerInfo;m.nodeType===1?m.textContent="":m.nodeType===9&&m.documentElement&&m.removeChild(m.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(C(163))}}catch(v){te(e,e.return,v)}if(t=e.sibling,t!==null){t.return=e.return,k=t;break}k=e.return}return y=Od,Od=!1,y}function Jr(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Ia(e,n,s)}i=i.next}while(i!==r)}}function To(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Ta(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Wp(t){var e=t.alternate;e!==null&&(t.alternate=null,Wp(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ht],delete e[gi],delete e[da],delete e[Sv],delete e[Iv])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Vp(t){return t.tag===5||t.tag===3||t.tag===4}function Ld(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Vp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function xa(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Os));else if(r!==4&&(t=t.child,t!==null))for(xa(t,e,n),t=t.sibling;t!==null;)xa(t,e,n),t=t.sibling}function ka(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(ka(t,e,n),t=t.sibling;t!==null;)ka(t,e,n),t=t.sibling}var ge=null,et=!1;function Mt(t,e,n){for(n=n.child;n!==null;)Bp(t,e,n),n=n.sibling}function Bp(t,e,n){if(pt&&typeof pt.onCommitFiberUnmount=="function")try{pt.onCommitFiberUnmount(yo,n)}catch{}switch(n.tag){case 5:Ce||Zn(n,e);case 6:var r=ge,i=et;ge=null,Mt(t,e,n),ge=r,et=i,ge!==null&&(et?(t=ge,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ge.removeChild(n.stateNode));break;case 18:ge!==null&&(et?(t=ge,n=n.stateNode,t.nodeType===8?pl(t.parentNode,n):t.nodeType===1&&pl(t,n),di(t)):pl(ge,n.stateNode));break;case 4:r=ge,i=et,ge=n.stateNode.containerInfo,et=!0,Mt(t,e,n),ge=r,et=i;break;case 0:case 11:case 14:case 15:if(!Ce&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Ia(n,e,o),i=i.next}while(i!==r)}Mt(t,e,n);break;case 1:if(!Ce&&(Zn(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){te(n,e,l)}Mt(t,e,n);break;case 21:Mt(t,e,n);break;case 22:n.mode&1?(Ce=(r=Ce)||n.memoizedState!==null,Mt(t,e,n),Ce=r):Mt(t,e,n);break;default:Mt(t,e,n)}}function Md(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Uv),e.forEach(function(r){var i=qv.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Je(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:ge=l.stateNode,et=!1;break e;case 3:ge=l.stateNode.containerInfo,et=!0;break e;case 4:ge=l.stateNode.containerInfo,et=!0;break e}l=l.return}if(ge===null)throw Error(C(160));Bp(s,o,i),ge=null,et=!1;var a=i.alternate;a!==null&&(a.return=null),i.return=null}catch(u){te(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Gp(e,t),e=e.sibling}function Gp(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Je(e,t),ct(t),r&4){try{Jr(3,t,t.return),To(3,t)}catch(_){te(t,t.return,_)}try{Jr(5,t,t.return)}catch(_){te(t,t.return,_)}}break;case 1:Je(e,t),ct(t),r&512&&n!==null&&Zn(n,n.return);break;case 5:if(Je(e,t),ct(t),r&512&&n!==null&&Zn(n,n.return),t.flags&32){var i=t.stateNode;try{li(i,"")}catch(_){te(t,t.return,_)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,l=t.type,a=t.updateQueue;if(t.updateQueue=null,a!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&hh(i,s),Xl(l,o);var u=Xl(l,s);for(o=0;o<a.length;o+=2){var d=a[o],c=a[o+1];d==="style"?_h(i,c):d==="dangerouslySetInnerHTML"?gh(i,c):d==="children"?li(i,c):ru(i,d,c,u)}switch(l){case"input":Gl(i,s);break;case"textarea":ph(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?nr(i,!!s.multiple,g,!1):f!==!!s.multiple&&(s.defaultValue!=null?nr(i,!!s.multiple,s.defaultValue,!0):nr(i,!!s.multiple,s.multiple?[]:"",!1))}i[gi]=s}catch(_){te(t,t.return,_)}}break;case 6:if(Je(e,t),ct(t),r&4){if(t.stateNode===null)throw Error(C(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(_){te(t,t.return,_)}}break;case 3:if(Je(e,t),ct(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{di(e.containerInfo)}catch(_){te(t,t.return,_)}break;case 4:Je(e,t),ct(t);break;case 13:Je(e,t),ct(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Fu=ie())),r&4&&Md(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Ce=(u=Ce)||d,Je(e,t),Ce=u):Je(e,t),ct(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(k=t,d=t.child;d!==null;){for(c=k=d;k!==null;){switch(f=k,g=f.child,f.tag){case 0:case 11:case 14:case 15:Jr(4,f,f.return);break;case 1:Zn(f,f.return);var y=f.stateNode;if(typeof y.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(_){te(r,n,_)}}break;case 5:Zn(f,f.return);break;case 22:if(f.memoizedState!==null){bd(c);continue}}g!==null?(g.return=f,k=g):bd(c)}d=d.sibling}e:for(d=null,c=t;;){if(c.tag===5){if(d===null){d=c;try{i=c.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=c.stateNode,a=c.memoizedProps.style,o=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=yh("display",o))}catch(_){te(t,t.return,_)}}}else if(c.tag===6){if(d===null)try{c.stateNode.nodeValue=u?"":c.memoizedProps}catch(_){te(t,t.return,_)}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===t)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===t)break e;for(;c.sibling===null;){if(c.return===null||c.return===t)break e;d===c&&(d=null),c=c.return}d===c&&(d=null),c.sibling.return=c.return,c=c.sibling}}break;case 19:Je(e,t),ct(t),r&4&&Md(t);break;case 21:break;default:Je(e,t),ct(t)}}function ct(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Vp(n)){var r=n;break e}n=n.return}throw Error(C(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(li(i,""),r.flags&=-33);var s=Ld(t);ka(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Ld(t);xa(t,l,o);break;default:throw Error(C(161))}}catch(a){te(t,t.return,a)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function $v(t,e,n){k=t,Qp(t)}function Qp(t,e,n){for(var r=(t.mode&1)!==0;k!==null;){var i=k,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||ls;if(!o){var l=i.alternate,a=l!==null&&l.memoizedState!==null||Ce;l=ls;var u=Ce;if(ls=o,(Ce=a)&&!u)for(k=i;k!==null;)o=k,a=o.child,o.tag===22&&o.memoizedState!==null?jd(i):a!==null?(a.return=o,k=a):jd(i);for(;s!==null;)k=s,Qp(s),s=s.sibling;k=i,ls=l,Ce=u}Fd(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,k=s):Fd(t)}}function Fd(t){for(;k!==null;){var e=k;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ce||To(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ce)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Ze(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&vd(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}vd(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var a=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var c=d.dehydrated;c!==null&&di(c)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(C(163))}Ce||e.flags&512&&Ta(e)}catch(f){te(e,e.return,f)}}if(e===t){k=null;break}if(n=e.sibling,n!==null){n.return=e.return,k=n;break}k=e.return}}function bd(t){for(;k!==null;){var e=k;if(e===t){k=null;break}var n=e.sibling;if(n!==null){n.return=e.return,k=n;break}k=e.return}}function jd(t){for(;k!==null;){var e=k;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{To(4,e)}catch(a){te(e,n,a)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(a){te(e,i,a)}}var s=e.return;try{Ta(e)}catch(a){te(e,s,a)}break;case 5:var o=e.return;try{Ta(e)}catch(a){te(e,o,a)}}}catch(a){te(e,e.return,a)}if(e===t){k=null;break}var l=e.sibling;if(l!==null){l.return=e.return,k=l;break}k=e.return}}var Wv=Math.ceil,Vs=Ot.ReactCurrentDispatcher,Lu=Ot.ReactCurrentOwner,Ye=Ot.ReactCurrentBatchConfig,z=0,me=null,se=null,ye=0,je=0,er=an(0),ue=0,Ei=null,Rn=0,xo=0,Mu=0,Zr=null,Re=null,Fu=0,yr=1/0,wt=null,Bs=!1,Na=null,Qt=null,as=!1,Ht=null,Gs=0,ei=0,Ra=null,Es=-1,Ss=0;function xe(){return z&6?ie():Es!==-1?Es:Es=ie()}function Kt(t){return t.mode&1?z&2&&ye!==0?ye&-ye:xv.transition!==null?(Ss===0&&(Ss=Ph()),Ss):(t=H,t!==0||(t=window.event,t=t===void 0?16:bh(t.type)),t):1}function ot(t,e,n,r){if(50<ei)throw ei=0,Ra=null,Error(C(185));Li(t,n,r),(!(z&2)||t!==me)&&(t===me&&(!(z&2)&&(xo|=n),ue===4&&zt(t,ye)),Le(t,r),n===1&&z===0&&!(e.mode&1)&&(yr=ie()+500,Eo&&un()))}function Le(t,e){var n=t.callbackNode;x_(t,e);var r=Rs(t,t===me?ye:0);if(r===0)n!==null&&Qc(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Qc(n),e===1)t.tag===0?Tv(zd.bind(null,t)):np(zd.bind(null,t)),Cv(function(){!(z&6)&&un()}),n=null;else{switch(Dh(r)){case 1:n=au;break;case 4:n=Nh;break;case 16:n=Ns;break;case 536870912:n=Rh;break;default:n=Ns}n=tm(n,Kp.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Kp(t,e){if(Es=-1,Ss=0,z&6)throw Error(C(327));var n=t.callbackNode;if(lr()&&t.callbackNode!==n)return null;var r=Rs(t,t===me?ye:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Qs(t,r);else{e=r;var i=z;z|=2;var s=qp();(me!==t||ye!==e)&&(wt=null,yr=ie()+500,Sn(t,e));do try{Gv();break}catch(l){Yp(t,l)}while(!0);Cu(),Vs.current=s,z=i,se!==null?e=0:(me=null,ye=0,e=ue)}if(e!==0){if(e===2&&(i=na(t),i!==0&&(r=i,e=Pa(t,i))),e===1)throw n=Ei,Sn(t,0),zt(t,r),Le(t,ie()),n;if(e===6)zt(t,r);else{if(i=t.current.alternate,!(r&30)&&!Vv(i)&&(e=Qs(t,r),e===2&&(s=na(t),s!==0&&(r=s,e=Pa(t,s))),e===1))throw n=Ei,Sn(t,0),zt(t,r),Le(t,ie()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(C(345));case 2:pn(t,Re,wt);break;case 3:if(zt(t,r),(r&130023424)===r&&(e=Fu+500-ie(),10<e)){if(Rs(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){xe(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=ca(pn.bind(null,t,Re,wt),e);break}pn(t,Re,wt);break;case 4:if(zt(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-st(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=ie()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Wv(r/1960))-r,10<r){t.timeoutHandle=ca(pn.bind(null,t,Re,wt),r);break}pn(t,Re,wt);break;case 5:pn(t,Re,wt);break;default:throw Error(C(329))}}}return Le(t,ie()),t.callbackNode===n?Kp.bind(null,t):null}function Pa(t,e){var n=Zr;return t.current.memoizedState.isDehydrated&&(Sn(t,e).flags|=256),t=Qs(t,e),t!==2&&(e=Re,Re=n,e!==null&&Da(e)),t}function Da(t){Re===null?Re=t:Re.push.apply(Re,t)}function Vv(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!at(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function zt(t,e){for(e&=~Mu,e&=~xo,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-st(e),r=1<<n;t[n]=-1,e&=~r}}function zd(t){if(z&6)throw Error(C(327));lr();var e=Rs(t,0);if(!(e&1))return Le(t,ie()),null;var n=Qs(t,e);if(t.tag!==0&&n===2){var r=na(t);r!==0&&(e=r,n=Pa(t,r))}if(n===1)throw n=Ei,Sn(t,0),zt(t,e),Le(t,ie()),n;if(n===6)throw Error(C(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,pn(t,Re,wt),Le(t,ie()),null}function bu(t,e){var n=z;z|=1;try{return t(e)}finally{z=n,z===0&&(yr=ie()+500,Eo&&un())}}function Pn(t){Ht!==null&&Ht.tag===0&&!(z&6)&&lr();var e=z;z|=1;var n=Ye.transition,r=H;try{if(Ye.transition=null,H=1,t)return t()}finally{H=r,Ye.transition=n,z=e,!(z&6)&&un()}}function ju(){je=er.current,q(er)}function Sn(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,wv(n)),se!==null)for(n=se.return;n!==null;){var r=n;switch(_u(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ls();break;case 3:mr(),q(Ae),q(Se),ku();break;case 5:xu(r);break;case 4:mr();break;case 13:q(J);break;case 19:q(J);break;case 10:Eu(r.type._context);break;case 22:case 23:ju()}n=n.return}if(me=t,se=t=Yt(t.current,null),ye=je=e,ue=0,Ei=null,Mu=xo=Rn=0,Re=Zr=null,_n!==null){for(e=0;e<_n.length;e++)if(n=_n[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}_n=null}return t}function Yp(t,e){do{var n=se;try{if(Cu(),vs.current=Ws,$s){for(var r=Z.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}$s=!1}if(Nn=0,fe=oe=Z=null,Xr=!1,vi=0,Lu.current=null,n===null||n.return===null){ue=1,Ei=e,se=null;break}e:{var s=t,o=n.return,l=n,a=e;if(e=ye,l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var u=a,d=l,c=d.tag;if(!(d.mode&1)&&(c===0||c===11||c===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var g=xd(o);if(g!==null){g.flags&=-257,kd(g,o,l,s,e),g.mode&1&&Td(s,u,e),e=g,a=u;var y=e.updateQueue;if(y===null){var _=new Set;_.add(a),e.updateQueue=_}else y.add(a);break e}else{if(!(e&1)){Td(s,u,e),zu();break e}a=Error(C(426))}}else if(X&&l.mode&1){var S=xd(o);if(S!==null){!(S.flags&65536)&&(S.flags|=256),kd(S,o,l,s,e),vu(gr(a,l));break e}}s=a=gr(a,l),ue!==4&&(ue=2),Zr===null?Zr=[s]:Zr.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var p=Ap(s,a,e);_d(s,p);break e;case 1:l=a;var h=s.type,m=s.stateNode;if(!(s.flags&128)&&(typeof h.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Qt===null||!Qt.has(m)))){s.flags|=65536,e&=-e,s.lanes|=e;var v=Op(s,l,e);_d(s,v);break e}}s=s.return}while(s!==null)}Jp(n)}catch(x){e=x,se===n&&n!==null&&(se=n=n.return);continue}break}while(!0)}function qp(){var t=Vs.current;return Vs.current=Ws,t===null?Ws:t}function zu(){(ue===0||ue===3||ue===2)&&(ue=4),me===null||!(Rn&268435455)&&!(xo&268435455)||zt(me,ye)}function Qs(t,e){var n=z;z|=2;var r=qp();(me!==t||ye!==e)&&(wt=null,Sn(t,e));do try{Bv();break}catch(i){Yp(t,i)}while(!0);if(Cu(),z=n,Vs.current=r,se!==null)throw Error(C(261));return me=null,ye=0,ue}function Bv(){for(;se!==null;)Xp(se)}function Gv(){for(;se!==null&&!y_();)Xp(se)}function Xp(t){var e=em(t.alternate,t,je);t.memoizedProps=t.pendingProps,e===null?Jp(t):se=e,Lu.current=null}function Jp(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=zv(n,e),n!==null){n.flags&=32767,se=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ue=6,se=null;return}}else if(n=jv(n,e,je),n!==null){se=n;return}if(e=e.sibling,e!==null){se=e;return}se=e=t}while(e!==null);ue===0&&(ue=5)}function pn(t,e,n){var r=H,i=Ye.transition;try{Ye.transition=null,H=1,Qv(t,e,n,r)}finally{Ye.transition=i,H=r}return null}function Qv(t,e,n,r){do lr();while(Ht!==null);if(z&6)throw Error(C(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(C(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(k_(t,s),t===me&&(se=me=null,ye=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||as||(as=!0,tm(Ns,function(){return lr(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Ye.transition,Ye.transition=null;var o=H;H=1;var l=z;z|=4,Lu.current=null,Hv(t,n),Gp(n,t),hv(aa),Ps=!!la,aa=la=null,t.current=n,$v(n),__(),z=l,H=o,Ye.transition=s}else t.current=n;if(as&&(as=!1,Ht=t,Gs=i),s=t.pendingLanes,s===0&&(Qt=null),C_(n.stateNode),Le(t,ie()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Bs)throw Bs=!1,t=Na,Na=null,t;return Gs&1&&t.tag!==0&&lr(),s=t.pendingLanes,s&1?t===Ra?ei++:(ei=0,Ra=t):ei=0,un(),null}function lr(){if(Ht!==null){var t=Dh(Gs),e=Ye.transition,n=H;try{if(Ye.transition=null,H=16>t?16:t,Ht===null)var r=!1;else{if(t=Ht,Ht=null,Gs=0,z&6)throw Error(C(331));var i=z;for(z|=4,k=t.current;k!==null;){var s=k,o=s.child;if(k.flags&16){var l=s.deletions;if(l!==null){for(var a=0;a<l.length;a++){var u=l[a];for(k=u;k!==null;){var d=k;switch(d.tag){case 0:case 11:case 15:Jr(8,d,s)}var c=d.child;if(c!==null)c.return=d,k=c;else for(;k!==null;){d=k;var f=d.sibling,g=d.return;if(Wp(d),d===u){k=null;break}if(f!==null){f.return=g,k=f;break}k=g}}}var y=s.alternate;if(y!==null){var _=y.child;if(_!==null){y.child=null;do{var S=_.sibling;_.sibling=null,_=S}while(_!==null)}}k=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,k=o;else e:for(;k!==null;){if(s=k,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Jr(9,s,s.return)}var p=s.sibling;if(p!==null){p.return=s.return,k=p;break e}k=s.return}}var h=t.current;for(k=h;k!==null;){o=k;var m=o.child;if(o.subtreeFlags&2064&&m!==null)m.return=o,k=m;else e:for(o=h;k!==null;){if(l=k,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:To(9,l)}}catch(x){te(l,l.return,x)}if(l===o){k=null;break e}var v=l.sibling;if(v!==null){v.return=l.return,k=v;break e}k=l.return}}if(z=i,un(),pt&&typeof pt.onPostCommitFiberRoot=="function")try{pt.onPostCommitFiberRoot(yo,t)}catch{}r=!0}return r}finally{H=n,Ye.transition=e}}return!1}function Ud(t,e,n){e=gr(n,e),e=Ap(t,e,1),t=Gt(t,e,1),e=xe(),t!==null&&(Li(t,1,e),Le(t,e))}function te(t,e,n){if(t.tag===3)Ud(t,t,n);else for(;e!==null;){if(e.tag===3){Ud(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Qt===null||!Qt.has(r))){t=gr(n,t),t=Op(e,t,1),e=Gt(e,t,1),t=xe(),e!==null&&(Li(e,1,t),Le(e,t));break}}e=e.return}}function Kv(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=xe(),t.pingedLanes|=t.suspendedLanes&n,me===t&&(ye&n)===n&&(ue===4||ue===3&&(ye&130023424)===ye&&500>ie()-Fu?Sn(t,0):Mu|=n),Le(t,e)}function Zp(t,e){e===0&&(t.mode&1?(e=Ji,Ji<<=1,!(Ji&130023424)&&(Ji=4194304)):e=1);var n=xe();t=Rt(t,e),t!==null&&(Li(t,e,n),Le(t,n))}function Yv(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Zp(t,n)}function qv(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(C(314))}r!==null&&r.delete(e),Zp(t,n)}var em;em=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ae.current)Pe=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Pe=!1,bv(t,e,n);Pe=!!(t.flags&131072)}else Pe=!1,X&&e.flags&1048576&&rp(e,bs,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Cs(t,e),t=e.pendingProps;var i=fr(e,Se.current);or(e,n),i=Ru(null,e,r,t,i,n);var s=Pu();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Oe(r)?(s=!0,Ms(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Iu(e),i.updater=So,e.stateNode=i,i._reactInternals=e,ya(e,r,t,n),e=wa(null,e,r,!0,s,n)):(e.tag=0,X&&s&&yu(e),Ie(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Cs(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Jv(r),t=Ze(r,t),i){case 0:e=va(null,e,r,t,n);break e;case 1:e=Pd(null,e,r,t,n);break e;case 11:e=Nd(null,e,r,t,n);break e;case 14:e=Rd(null,e,r,Ze(r.type,t),n);break e}throw Error(C(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ze(r,i),va(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ze(r,i),Pd(t,e,r,i,n);case 3:e:{if(bp(e),t===null)throw Error(C(387));r=e.pendingProps,s=e.memoizedState,i=s.element,lp(t,e),Us(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=gr(Error(C(423)),e),e=Dd(t,e,r,n,i);break e}else if(r!==i){i=gr(Error(C(424)),e),e=Dd(t,e,r,n,i);break e}else for(ze=Bt(e.stateNode.containerInfo.firstChild),Ue=e,X=!0,tt=null,n=dp(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(hr(),r===i){e=Pt(t,e,n);break e}Ie(t,e,r,n)}e=e.child}return e;case 5:return fp(e),t===null&&pa(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,ua(r,i)?o=null:s!==null&&ua(r,s)&&(e.flags|=32),Fp(t,e),Ie(t,e,o,n),e.child;case 6:return t===null&&pa(e),null;case 13:return jp(t,e,n);case 4:return Tu(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=pr(e,null,r,n):Ie(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ze(r,i),Nd(t,e,r,i,n);case 7:return Ie(t,e,e.pendingProps,n),e.child;case 8:return Ie(t,e,e.pendingProps.children,n),e.child;case 12:return Ie(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Q(js,r._currentValue),r._currentValue=o,s!==null)if(at(s.value,o)){if(s.children===i.children&&!Ae.current){e=Pt(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var a=l.firstContext;a!==null;){if(a.context===r){if(s.tag===1){a=Tt(-1,n&-n),a.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?a.next=a:(a.next=d.next,d.next=a),u.pending=a}}s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),ma(s.return,n,e),l.lanes|=n;break}a=a.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(C(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),ma(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Ie(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,or(e,n),i=qe(i),r=r(i),e.flags|=1,Ie(t,e,r,n),e.child;case 14:return r=e.type,i=Ze(r,e.pendingProps),i=Ze(r.type,i),Rd(t,e,r,i,n);case 15:return Lp(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ze(r,i),Cs(t,e),e.tag=1,Oe(r)?(t=!0,Ms(e)):t=!1,or(e,n),up(e,r,i),ya(e,r,i,n),wa(null,e,r,!0,t,n);case 19:return zp(t,e,n);case 22:return Mp(t,e,n)}throw Error(C(156,e.tag))};function tm(t,e){return kh(t,e)}function Xv(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ke(t,e,n,r){return new Xv(t,e,n,r)}function Uu(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Jv(t){if(typeof t=="function")return Uu(t)?1:0;if(t!=null){if(t=t.$$typeof,t===su)return 11;if(t===ou)return 14}return 2}function Yt(t,e){var n=t.alternate;return n===null?(n=Ke(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Is(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Uu(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Vn:return In(n.children,i,s,e);case iu:o=8,i|=8;break;case Hl:return t=Ke(12,n,e,i|2),t.elementType=Hl,t.lanes=s,t;case $l:return t=Ke(13,n,e,i),t.elementType=$l,t.lanes=s,t;case Wl:return t=Ke(19,n,e,i),t.elementType=Wl,t.lanes=s,t;case ch:return ko(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ah:o=10;break e;case uh:o=9;break e;case su:o=11;break e;case ou:o=14;break e;case Ft:o=16,r=null;break e}throw Error(C(130,t==null?t:typeof t,""))}return e=Ke(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function In(t,e,n,r){return t=Ke(7,t,r,e),t.lanes=n,t}function ko(t,e,n,r){return t=Ke(22,t,r,e),t.elementType=ch,t.lanes=n,t.stateNode={isHidden:!1},t}function El(t,e,n){return t=Ke(6,t,null,e),t.lanes=n,t}function Sl(t,e,n){return e=Ke(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Zv(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=rl(0),this.expirationTimes=rl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=rl(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Hu(t,e,n,r,i,s,o,l,a){return t=new Zv(t,e,n,l,a),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Ke(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Iu(s),t}function e0(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Wn,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function nm(t){if(!t)return tn;t=t._reactInternals;e:{if(jn(t)!==t||t.tag!==1)throw Error(C(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Oe(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(C(171))}if(t.tag===1){var n=t.type;if(Oe(n))return tp(t,n,e)}return e}function rm(t,e,n,r,i,s,o,l,a){return t=Hu(n,r,!0,t,i,s,o,l,a),t.context=nm(null),n=t.current,r=xe(),i=Kt(n),s=Tt(r,i),s.callback=e??null,Gt(n,s,i),t.current.lanes=i,Li(t,i,r),Le(t,r),t}function No(t,e,n,r){var i=e.current,s=xe(),o=Kt(i);return n=nm(n),e.context===null?e.context=n:e.pendingContext=n,e=Tt(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Gt(i,e,o),t!==null&&(ot(t,i,o,s),_s(t,i,o)),o}function Ks(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Hd(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function $u(t,e){Hd(t,e),(t=t.alternate)&&Hd(t,e)}function t0(){return null}var im=typeof reportError=="function"?reportError:function(t){console.error(t)};function Wu(t){this._internalRoot=t}Ro.prototype.render=Wu.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(C(409));No(t,e,null,null)};Ro.prototype.unmount=Wu.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Pn(function(){No(null,t,null,null)}),e[Nt]=null}};function Ro(t){this._internalRoot=t}Ro.prototype.unstable_scheduleHydration=function(t){if(t){var e=Lh();t={blockedOn:null,target:t,priority:e};for(var n=0;n<jt.length&&e!==0&&e<jt[n].priority;n++);jt.splice(n,0,t),n===0&&Fh(t)}};function Vu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Po(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function $d(){}function n0(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=Ks(o);s.call(u)}}var o=rm(e,r,t,0,null,!1,!1,"",$d);return t._reactRootContainer=o,t[Nt]=o.current,pi(t.nodeType===8?t.parentNode:t),Pn(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var u=Ks(a);l.call(u)}}var a=Hu(t,0,!1,null,null,!1,!1,"",$d);return t._reactRootContainer=a,t[Nt]=a.current,pi(t.nodeType===8?t.parentNode:t),Pn(function(){No(e,a,n,r)}),a}function Do(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var a=Ks(o);l.call(a)}}No(e,o,t,i)}else o=n0(n,e,t,i,r);return Ks(o)}Ah=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Vr(e.pendingLanes);n!==0&&(uu(e,n|1),Le(e,ie()),!(z&6)&&(yr=ie()+500,un()))}break;case 13:Pn(function(){var r=Rt(t,1);if(r!==null){var i=xe();ot(r,t,1,i)}}),$u(t,1)}};cu=function(t){if(t.tag===13){var e=Rt(t,134217728);if(e!==null){var n=xe();ot(e,t,134217728,n)}$u(t,134217728)}};Oh=function(t){if(t.tag===13){var e=Kt(t),n=Rt(t,e);if(n!==null){var r=xe();ot(n,t,e,r)}$u(t,e)}};Lh=function(){return H};Mh=function(t,e){var n=H;try{return H=t,e()}finally{H=n}};Zl=function(t,e,n){switch(e){case"input":if(Gl(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Co(r);if(!i)throw Error(C(90));fh(r),Gl(r,i)}}}break;case"textarea":ph(t,n);break;case"select":e=n.value,e!=null&&nr(t,!!n.multiple,e,!1)}};Ch=bu;Eh=Pn;var r0={usingClientEntryPoint:!1,Events:[Fi,Kn,Co,vh,wh,bu]},br={findFiberByHostInstance:yn,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},i0={bundleType:br.bundleType,version:br.version,rendererPackageName:br.rendererPackageName,rendererConfig:br.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ot.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Th(t),t===null?null:t.stateNode},findFiberByHostInstance:br.findFiberByHostInstance||t0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var us=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!us.isDisabled&&us.supportsFiber)try{yo=us.inject(i0),pt=us}catch{}}We.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=r0;We.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Vu(e))throw Error(C(200));return e0(t,e,null,n)};We.createRoot=function(t,e){if(!Vu(t))throw Error(C(299));var n=!1,r="",i=im;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Hu(t,1,!1,null,null,n,!1,r,i),t[Nt]=e.current,pi(t.nodeType===8?t.parentNode:t),new Wu(e)};We.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(C(188)):(t=Object.keys(t).join(","),Error(C(268,t)));return t=Th(e),t=t===null?null:t.stateNode,t};We.flushSync=function(t){return Pn(t)};We.hydrate=function(t,e,n){if(!Po(e))throw Error(C(200));return Do(null,t,e,!0,n)};We.hydrateRoot=function(t,e,n){if(!Vu(t))throw Error(C(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=im;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=rm(e,null,t,1,n??null,i,!1,s,o),t[Nt]=e.current,pi(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Ro(e)};We.render=function(t,e,n){if(!Po(e))throw Error(C(200));return Do(null,t,e,!1,n)};We.unmountComponentAtNode=function(t){if(!Po(t))throw Error(C(40));return t._reactRootContainer?(Pn(function(){Do(null,null,t,!1,function(){t._reactRootContainer=null,t[Nt]=null})}),!0):!1};We.unstable_batchedUpdates=bu;We.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Po(n))throw Error(C(200));if(t==null||t._reactInternals===void 0)throw Error(C(38));return Do(t,e,n,!1,r)};We.version="18.2.0-next-9e3b772b8-20220608";function sm(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(sm)}catch(t){console.error(t)}}sm(),rh.exports=We;var s0=rh.exports,Wd=s0;zl.createRoot=Wd.createRoot,zl.hydrateRoot=Wd.hydrateRoot;function T(t){return`${t.x},${t.y}`}function ft(t){const e=t.split(",");return{x:Number(e[0]),y:Number(e[1])}}const Bu=3;function o0(t){const e=[[5,5,5],[4,4,4],[3,3,3],[2,2,2],[1,1,1],[0,0,0]];for(const s of e)for(let o=0;o<t.hands.length;o++)for(let l=0;l<t.hands[o].length;l++)if(s===t.hands[o][l].numbers)return[o,l];let n=-1,r=-1,i=-1;for(let s=0;s<t.hands.length;s++){const o=t.hands[s];for(let l=0;l<o.length;l++){const u=o[l].numbers.reduce((d,c)=>d+c,0);u>n&&(n=u,r=s,i=l)}}return[r,i]}function om(t,e,n){return um(t).filter(s=>{let o=!1;if((e.x+e.y)%2===0&&s.orientation==="up"){const l=n.get(T({x:e.x-1,y:e.y})),a=n.get(T({x:e.x+1,y:e.y})),u=n.get(T({x:e.x,y:e.y-1})),d=n.get(T({x:e.x-1,y:e.y+1})),c=n.get(T({x:e.x,y:e.y+1})),f=n.get(T({x:e.x+1,y:e.y+1})),g=n.get(T({x:e.x-2,y:e.y})),y=n.get(T({x:e.x-2,y:e.y-1})),_=n.get(T({x:e.x-1,y:e.y-1})),S=n.get(T({x:e.x+2,y:e.y})),p=n.get(T({x:e.x+2,y:e.y-1})),h=n.get(T({x:e.x+1,y:e.y-1}));o=(l===void 0||s.bottomLeft===l.bottomCenter&&s.topCenter===l.topRight)&&(a===void 0||s.bottomRight===a.bottomCenter&&s.topCenter===a.topLeft)&&(u===void 0||s.bottomLeft===u.topLeft&&s.bottomRight===u.topRight)&&(d===void 0||s.topCenter===d.bottomRight)&&(c===void 0||s.topCenter===c.bottomCenter)&&(f===void 0||s.topCenter===f.bottomLeft)&&(g===void 0||s.bottomLeft===g.bottomRight)&&(y===void 0||s.bottomLeft===y.topRight)&&(_==null||s.bottomLeft===_.topCenter)&&(S===void 0||s.bottomRight===S.bottomLeft)&&(p===void 0||s.bottomRight===p.topLeft)&&(h===void 0||s.bottomRight===h.topCenter)}else if(Math.abs(e.x+e.y)%2===1&&s.orientation==="down"){const l=n.get(T({x:e.x-1,y:e.y})),a=n.get(T({x:e.x+1,y:e.y})),u=n.get(T({x:e.x,y:e.y+1})),d=n.get(T({x:e.x-1,y:e.y-1})),c=n.get(T({x:e.x,y:e.y-1})),f=n.get(T({x:e.x+1,y:e.y-1})),g=n.get(T({x:e.x-2,y:e.y})),y=n.get(T({x:e.x-2,y:e.y+1})),_=n.get(T({x:e.x-1,y:e.y+1})),S=n.get(T({x:e.x+1,y:e.y+1})),p=n.get(T({x:e.x+2,y:e.y+1})),h=n.get(T({x:e.x+2,y:e.y}));o=(l===void 0||s.topLeft===l.topCenter&&s.bottomCenter===l.bottomRight)&&(a===void 0||s.bottomCenter===a.bottomLeft&&s.topRight===a.topCenter)&&(u===void 0||s.topLeft===u.bottomLeft&&s.topRight===u.bottomRight)&&(d===void 0||s.bottomCenter===d.topRight)&&(c===void 0||s.bottomCenter===c.topCenter)&&(f===void 0||s.bottomCenter===f.topLeft)&&(g===void 0||s.topLeft===g.topRight)&&(y===void 0||s.topLeft===y.bottomRight)&&(_==null||s.topLeft===_.bottomCenter)&&(S===void 0||s.topRight===S.bottomCenter)&&(p===void 0||s.topRight===p.bottomLeft)&&(h===void 0||s.topRight===h.topLeft)}return o})[0]}function lm(t){const e=new Set;return t.forEach((n,r)=>{const i=ft(r),s=[];n.orientation==="up"?s.push({x:i.x-1,y:i.y},{x:i.x+1,y:i.y},{x:i.x,y:i.y-1}):s.push({x:i.x-1,y:i.y},{x:i.x+1,y:i.y},{x:i.x,y:i.y+1}),s.forEach(o=>{const l=T(o);t.has(l)||e.add(l)})}),Array.from(e.keys()).map(ft)}function l0(t,e){const n=[],r=lm(e);return t.forEach(i=>{r.forEach(s=>{const o=om(i,s,e);o&&n.push({coord:s,newTile:i,placedTile:o})})}),n}function Il(t,e){const n=[];return lm(e).forEach(i=>{const s=om(t,i,e);s&&n.push({coord:i,newTile:t,placedTile:s})}),n}function am(t,e){let n=t.hands[e],r=l0(n,t.gameBoard);return r.length>0?{actionType:"play",playerIndex:e,tilePlayed:r[0].placedTile,coord:r[0].coord}:t.consecutivePasses===t.playerNames.length?{actionType:"end"}:t.drawPile.length>0&&t.tilesDrawnThisTurn<Bu?{actionType:"draw",playerIndex:e}:{actionType:"pass",playerIndex:e}}function a0(t,e,n){let r=t.newTileID.split(",").map(Number).reduce((i,s)=>i+s,0);if(t.orientation==="up"){const i=n.has(T({x:e.x-1,y:e.y}))&&n.has(T({x:e.x+1,y:e.y}))&&n.has(T({x:e.x-1,y:e.y+1}))&&n.has(T({x:e.x,y:e.y+1}))&&n.has(T({x:e.x+1,y:e.y+1})),s=n.has(T({x:e.x-2,y:e.y}))&&n.has(T({x:e.x-1,y:e.y}))&&n.has(T({x:e.x-2,y:e.y-1}))&&n.has(T({x:e.x-1,y:e.y-1}))&&n.has(T({x:e.x,y:e.y-1})),o=n.has(T({x:e.x+1,y:e.y}))&&n.has(T({x:e.x+2,y:e.y}))&&n.has(T({x:e.x,y:e.y-1}))&&n.has(T({x:e.x+1,y:e.y-1}))&&n.has(T({x:e.x-1,y:e.y+1}));i&&(r+=50),s&&(r+=50),o&&(r+=50)}else{const i=n.has(T({x:e.x-1,y:e.y}))&&n.has(T({x:e.x+1,y:e.y}))&&n.has(T({x:e.x-1,y:e.y-1}))&&n.has(T({x:e.x,y:e.y-1}))&&n.has(T({x:e.x+1,y:e.y-1})),s=n.has(T({x:e.x-2,y:e.y}))&&n.has(T({x:e.x-1,y:e.y}))&&n.has(T({x:e.x-2,y:e.y+1}))&&n.has(T({x:e.x-1,y:e.y+1}))&&n.has(T({x:e.x,y:e.y+1})),o=n.has(T({x:e.x+1,y:e.y}))&&n.has(T({x:e.x+2,y:e.y}))&&n.has(T({x:e.x,y:e.y+1}))&&n.has(T({x:e.x+1,y:e.y+1}))&&n.has(T({x:e.x+2,y:e.y+1}));i&&(r+=50),s&&(r+=50),o&&(r+=50)}if(t.orientation==="up"){const i=n.has(T({x:e.x,y:e.y-1}))&&n.has(T({x:e.x,y:e.y+1})),s=n.has(T({x:e.x+1,y:e.y}))&&n.has(T({x:e.x-2,y:e.y-1})),o=n.has(T({x:e.x-1,y:e.y}))&&n.has(T({x:e.x+2,y:e.y-1}));i&&(r+=40),s&&(r+=40),o&&(r+=40)}else{const i=n.has(T({x:e.x,y:e.y+1}))&&n.has(T({x:e.x,y:e.y-1})),s=n.has(T({x:e.x+1,y:e.y}))&&n.has(T({x:e.x-2,y:e.y+1})),o=n.has(T({x:e.x-1,y:e.y}))&&n.has(T({x:e.x+2,y:e.y+1}));i&&(r+=40),s&&(r+=40),o&&(r+=40)}return r}function Si(t){const i={gameBoard:new Map,playerNames:[],hands:[[]],scores:[0],drawPile:[...t.startingDeck],gameLog:[],activePlayer:0,tilesDrawnThisTurn:0,consecutivePasses:0,lastPlay:{x:0,y:0}};let s=!1;return t.actions.forEach(o=>{if(o.actionType==="add-player")i.playerNames.push(o.playerName);else if(o.actionType==="play"){i.gameBoard.set(T(o.coord),o.tilePlayed);const l=i.hands[o.playerIndex].findIndex(u=>u.id===o.tilePlayed.newTileID);i.hands[o.playerIndex].splice(l,1);const a=a0(o.tilePlayed,o.coord,i.gameBoard);i.scores[o.playerIndex]+=a,i.lastPlay=o.coord,i.gameLog.push(`${i.playerNames[o.playerIndex]} plays [${o.tilePlayed.newTileID}] for ${a} points.`),i.activePlayer=(o.playerIndex+1)%i.hands.length,i.tilesDrawnThisTurn=0,i.consecutivePasses=0}else if(o.actionType==="draw")s?i.drawPile.length>0?(i.hands[o.playerIndex].push(i.drawPile.pop()),i.tilesDrawnThisTurn+=1,i.scores[o.playerIndex]-=5,i.gameLog.push(`${i.playerNames[o.playerIndex]} draws a tile and loses 5 points.`)):console.log("Can't draw, deck is empty."):(i.hands[o.playerIndex]||(i.hands[o.playerIndex]=[],i.scores[o.playerIndex]=0),i.hands[o.playerIndex].push(i.drawPile.pop()));else if(o.actionType==="pass")i.scores[o.playerIndex]-=10,i.gameLog.push(`${i.playerNames[o.playerIndex]} can not play and loses 10 points.`),i.activePlayer=(i.activePlayer+1)%i.hands.length,i.tilesDrawnThisTurn=0,i.consecutivePasses++;else if(o.actionType==="init"){const l=o0(i),a=l[0],u=l[1],d=i.hands[a][u];i.gameBoard.set("0,0",um(d)[0]),i.hands[a].splice(u,1);let c=d.numbers.reduce((f,g)=>f+g,0);c===0?c+=30:d.numbers[0]===d.numbers[1]&&d.numbers[1]===d.numbers[2]&&(c+=10),i.scores[a]||(i.scores[a]=0),i.scores[a]=c,i.lastPlay={x:0,y:0},i.gameLog.push("All players draw starting tiles."),i.gameLog.push(`${i.playerNames[a]} plays [${d.id}] for ${c} points.`),i.activePlayer=(a+1)%i.hands.length,s=!0}else if(o.actionType==="end"){let l=[],a=-1;for(let d=0;d<i.hands.length;d++){let c=0;for(const f of i.hands[d])c+=f.numbers.reduce((g,y)=>g+y,0);l.push(c),i.hands[d].length===0&&(a=d)}if(a!=-1){const d=25+l.reduce((c,f)=>c+f,0);i.scores[a]+=d,i.gameLog.push(`${i.playerNames[a]} went out and gains ${d} bonus points.`)}else{const d=Math.min(...l);for(let c=0;c<i.scores.length;c++)for(let f=0;f<i.scores.length;f++)i.scores[c]+=Math.max(0,l[f]-d)}const u=i.scores.indexOf(Math.max(...i.scores));i.gameLog.push(`Game over. ${i.playerNames[u]} wins!`),i.activePlayer=-1}else console.log("Not a valid action.")}),i}function u0(t){return{id:t.join(","),numbers:t}}function c0(){const t=[];for(let e=0;e<=5;e++)for(let n=e;n<=5;n++)for(let r=n;r<=5;r++)t.push(u0([e,n,r]));for(let e=0;e<t.length;e++){let n=Math.floor(Math.random()*t.length);[t[e],t[n]]=[t[n],t[e]]}return t}function um(t){return[{orientation:"up",newTileID:t.id,topCenter:t.numbers[0],bottomRight:t.numbers[1],bottomLeft:t.numbers[2]},{orientation:"up",newTileID:t.id,topCenter:t.numbers[1],bottomRight:t.numbers[2],bottomLeft:t.numbers[0]},{orientation:"up",newTileID:t.id,topCenter:t.numbers[2],bottomRight:t.numbers[0],bottomLeft:t.numbers[1]},{orientation:"down",newTileID:t.id,bottomCenter:t.numbers[0],topLeft:t.numbers[1],topRight:t.numbers[2]},{orientation:"down",newTileID:t.id,bottomCenter:t.numbers[1],topLeft:t.numbers[2],topRight:t.numbers[0]},{orientation:"down",newTileID:t.id,bottomCenter:t.numbers[2],topLeft:t.numbers[0],topRight:t.numbers[1]}]}function cm(t,e){const n={startingDeck:c0(),actions:[]};for(let i=0;i<t;i++)i<e.length?n.actions.push({actionType:"add-player",playerName:e[i]}):n.actions.push({actionType:"add-player",playerName:`Computer ${i+1-e.length}`});const r={1:9,2:9,3:7,4:7,5:6,6:6}[t];for(let i=0;i<t;i++)for(let s=0;s<r;s++)n.actions.push({actionType:"draw",playerIndex:i});return n.actions.push({actionType:"init"}),n}function dm(t){const e=t.actions.findIndex(n=>n.actionType==="init");return{startingDeck:t.startingDeck,actions:[...t.actions].slice(0,e+1)}}function fm(t){const e={startingDeck:t.startingDeck,actions:[...t.actions]};let n=Si(e),r=!1;for(let i=0;i<n.hands.length;i++)n.hands[i].length===0&&(r=!0);return t.actions[t.actions.length-1].actionType!="end"&&(r||n.consecutivePasses===n.playerNames.length&&n.drawPile.length===0?e.actions.push({actionType:"end"}):n.playerNames[n.activePlayer].startsWith("Computer")?e.actions.push(am(n,n.activePlayer)):n.tilesDrawnThisTurn<Bu&&n.drawPile.length>0?e.actions.push({actionType:"draw",playerIndex:n.activePlayer}):e.actions.push({actionType:"pass",playerIndex:n.activePlayer})),e}function hm(t){const e={startingDeck:t.startingDeck,actions:[...t.actions]};let n=Si(e),r=e.actions[e.actions.length-1].actionType==="end";for(;!r;)e.actions.push(am(n,n.activePlayer)),n=Si(e),r=n.hands.some(i=>i.length===0)||n.consecutivePasses===n.playerNames.length&&n.drawPile.length===0||e.actions.length>500,r&&e.actions.push({actionType:"end"});return e}var Vd={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pm={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I=function(t,e){if(!t)throw xr(e)},xr=function(t){return new Error("Firebase Database ("+pm.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mm=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},d0=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],l=t[n++],a=((i&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(a&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Gu={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,l=o?t[i+1]:0,a=i+2<t.length,u=a?t[i+2]:0,d=s>>2,c=(s&3)<<4|l>>4;let f=(l&15)<<2|u>>6,g=u&63;a||(g=64,o||(f=64)),r.push(n[d],n[c],n[f],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(mm(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):d0(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const c=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||u==null||c==null)throw new f0;const f=s<<2|l>>4;if(r.push(f),u!==64){const g=l<<4&240|u>>2;if(r.push(g),c!==64){const y=u<<6&192|c;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class f0 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const gm=function(t){const e=mm(t);return Gu.encodeByteArray(e,!0)},Ys=function(t){return gm(t).replace(/\./g,"")},Aa=function(t){try{return Gu.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h0(t){return ym(void 0,t)}function ym(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!p0(n)||(t[n]=ym(t[n],e[n]));return t}function p0(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m0(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g0=()=>m0().__FIREBASE_DEFAULTS__,y0=()=>{if(typeof process>"u"||typeof Vd>"u")return;const t=Vd.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},_0=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Aa(t[1]);return e&&JSON.parse(e)},_m=()=>{try{return g0()||y0()||_0()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},v0=t=>{var e,n;return(n=(e=_m())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},w0=t=>{const e=v0(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},vm=()=>{var t;return(t=_m())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C0(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ys(JSON.stringify(n)),Ys(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E0(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function wm(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(E0())}function S0(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function I0(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Cm(){return pm.NODE_ADMIN===!0}function Em(){try{return typeof indexedDB=="object"}catch{return!1}}function Sm(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}function T0(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x0="FirebaseError";class zn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=x0,Object.setPrototypeOf(this,zn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Oo.prototype.create)}}class Oo{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?k0(s,r):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new zn(i,l,r)}}function k0(t,e){return t.replace(N0,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const N0=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ii(t){return JSON.parse(t)}function le(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Im=function(t){let e={},n={},r={},i="";try{const s=t.split(".");e=Ii(Aa(s[0])||""),n=Ii(Aa(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}},R0=function(t){const e=Im(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},P0=function(t){const e=Im(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lt(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function _r(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Bd(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function qs(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function Xs(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(Gd(s)&&Gd(o)){if(!Xs(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Gd(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D0(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let c=0;c<16;c++)r[c]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let c=0;c<16;c++)r[c]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let c=16;c<80;c++){const f=r[c-3]^r[c-8]^r[c-14]^r[c-16];r[c]=(f<<1|f>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],l=this.chain_[3],a=this.chain_[4],u,d;for(let c=0;c<80;c++){c<40?c<20?(u=l^s&(o^l),d=1518500249):(u=s^o^l,d=1859775393):c<60?(u=s&o|l&(s|o),d=2400959708):(u=s^o^l,d=3395469782);const f=(i<<5|i>>>27)+u+a+d+r[c]&4294967295;a=l,l=o,o=(s<<30|s>>>2)&4294967295,s=i,i=f}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+a&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}function Qu(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O0=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,I(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Lo=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L0=1e3,M0=2,F0=4*60*60*1e3,b0=.5;function Qd(t,e=L0,n=M0){const r=e*Math.pow(n,t),i=Math.round(b0*r*(Math.random()-.5)*2);return Math.min(F0,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cn(t){return t&&t._delegate?t._delegate:t}class Dt{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mn="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j0{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Ao;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(U0(e))try{this.getOrInitializeService({instanceIdentifier:mn})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=mn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=mn){return this.instances.has(e)}getOptions(e=mn){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:z0(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=mn){return this.component?this.component.multipleInstances?e:mn:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function z0(t){return t===mn?void 0:t}function U0(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H0{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new j0(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var B;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(B||(B={}));const $0={debug:B.DEBUG,verbose:B.VERBOSE,info:B.INFO,warn:B.WARN,error:B.ERROR,silent:B.SILENT},W0=B.INFO,V0={[B.DEBUG]:"log",[B.VERBOSE]:"log",[B.INFO]:"info",[B.WARN]:"warn",[B.ERROR]:"error"},B0=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=V0[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ku{constructor(e){this.name=e,this._logLevel=W0,this._logHandler=B0,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in B))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?$0[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,B.DEBUG,...e),this._logHandler(this,B.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,B.VERBOSE,...e),this._logHandler(this,B.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,B.INFO,...e),this._logHandler(this,B.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,B.WARN,...e),this._logHandler(this,B.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,B.ERROR,...e),this._logHandler(this,B.ERROR,...e)}}const G0=(t,e)=>e.some(n=>t instanceof n);let Kd,Yd;function Q0(){return Kd||(Kd=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function K0(){return Yd||(Yd=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Tm=new WeakMap,Oa=new WeakMap,xm=new WeakMap,Tl=new WeakMap,Yu=new WeakMap;function Y0(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(qt(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Tm.set(n,t)}).catch(()=>{}),Yu.set(e,t),e}function q0(t){if(Oa.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Oa.set(t,e)}let La={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Oa.get(t);if(e==="objectStoreNames")return t.objectStoreNames||xm.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return qt(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function X0(t){La=t(La)}function J0(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(xl(this),e,...n);return xm.set(r,e.sort?e.sort():[e]),qt(r)}:K0().includes(t)?function(...e){return t.apply(xl(this),e),qt(Tm.get(this))}:function(...e){return qt(t.apply(xl(this),e))}}function Z0(t){return typeof t=="function"?J0(t):(t instanceof IDBTransaction&&q0(t),G0(t,Q0())?new Proxy(t,La):t)}function qt(t){if(t instanceof IDBRequest)return Y0(t);if(Tl.has(t))return Tl.get(t);const e=Z0(t);return e!==t&&(Tl.set(t,e),Yu.set(e,t)),e}const xl=t=>Yu.get(t);function km(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),l=qt(o);return r&&o.addEventListener("upgradeneeded",a=>{r(qt(o.result),a.oldVersion,a.newVersion,qt(o.transaction),a)}),n&&o.addEventListener("blocked",a=>n(a.oldVersion,a.newVersion,a)),l.then(a=>{s&&a.addEventListener("close",()=>s()),i&&a.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const ew=["get","getKey","getAll","getAllKeys","count"],tw=["put","add","delete","clear"],kl=new Map;function qd(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(kl.get(e))return kl.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=tw.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||ew.includes(n)))return;const s=async function(o,...l){const a=this.transaction(o,i?"readwrite":"readonly");let u=a.store;return r&&(u=u.index(l.shift())),(await Promise.all([u[n](...l),i&&a.done]))[0]};return kl.set(e,s),s}X0(t=>({...t,get:(e,n,r)=>qd(e,n)||t.get(e,n,r),has:(e,n)=>!!qd(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nw{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(rw(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function rw(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ma="@firebase/app",Xd="0.10.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dn=new Ku("@firebase/app"),iw="@firebase/app-compat",sw="@firebase/analytics-compat",ow="@firebase/analytics",lw="@firebase/app-check-compat",aw="@firebase/app-check",uw="@firebase/auth",cw="@firebase/auth-compat",dw="@firebase/database",fw="@firebase/database-compat",hw="@firebase/functions",pw="@firebase/functions-compat",mw="@firebase/installations",gw="@firebase/installations-compat",yw="@firebase/messaging",_w="@firebase/messaging-compat",vw="@firebase/performance",ww="@firebase/performance-compat",Cw="@firebase/remote-config",Ew="@firebase/remote-config-compat",Sw="@firebase/storage",Iw="@firebase/storage-compat",Tw="@firebase/firestore",xw="@firebase/vertexai-preview",kw="@firebase/firestore-compat",Nw="firebase",Rw="10.12.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fa="[DEFAULT]",Pw={[Ma]:"fire-core",[iw]:"fire-core-compat",[ow]:"fire-analytics",[sw]:"fire-analytics-compat",[aw]:"fire-app-check",[lw]:"fire-app-check-compat",[uw]:"fire-auth",[cw]:"fire-auth-compat",[dw]:"fire-rtdb",[fw]:"fire-rtdb-compat",[hw]:"fire-fn",[pw]:"fire-fn-compat",[mw]:"fire-iid",[gw]:"fire-iid-compat",[yw]:"fire-fcm",[_w]:"fire-fcm-compat",[vw]:"fire-perf",[ww]:"fire-perf-compat",[Cw]:"fire-rc",[Ew]:"fire-rc-compat",[Sw]:"fire-gcs",[Iw]:"fire-gcs-compat",[Tw]:"fire-fst",[kw]:"fire-fst-compat",[xw]:"fire-vertex","fire-js":"fire-js",[Nw]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Js=new Map,Dw=new Map,ba=new Map;function Jd(t,e){try{t.container.addComponent(e)}catch(n){Dn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function nn(t){const e=t.name;if(ba.has(e))return Dn.debug(`There were multiple attempts to register component ${e}.`),!1;ba.set(e,t);for(const n of Js.values())Jd(n,t);for(const n of Dw.values())Jd(n,t);return!0}function ji(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aw={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Xt=new Oo("app","Firebase",Aw);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Dt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Xt.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lw=Rw;function Nm(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Fa,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Xt.create("bad-app-name",{appName:String(i)});if(n||(n=vm()),!n)throw Xt.create("no-options");const s=Js.get(i);if(s){if(Xs(n,s.options)&&Xs(r,s.config))return s;throw Xt.create("duplicate-app",{appName:i})}const o=new H0(i);for(const a of ba.values())o.addComponent(a);const l=new Ow(n,r,o);return Js.set(i,l),l}function Rm(t=Fa){const e=Js.get(t);if(!e&&t===Fa&&vm())return Nm();if(!e)throw Xt.create("no-app",{appName:t});return e}function gt(t,e,n){var r;let i=(r=Pw[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Dn.warn(l.join(" "));return}nn(new Dt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mw="firebase-heartbeat-database",Fw=1,Ti="firebase-heartbeat-store";let Nl=null;function Pm(){return Nl||(Nl=km(Mw,Fw,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ti)}catch(n){console.warn(n)}}}}).catch(t=>{throw Xt.create("idb-open",{originalErrorMessage:t.message})})),Nl}async function bw(t){try{const n=(await Pm()).transaction(Ti),r=await n.objectStore(Ti).get(Dm(t));return await n.done,r}catch(e){if(e instanceof zn)Dn.warn(e.message);else{const n=Xt.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Dn.warn(n.message)}}}async function Zd(t,e){try{const r=(await Pm()).transaction(Ti,"readwrite");await r.objectStore(Ti).put(e,Dm(t)),await r.done}catch(n){if(n instanceof zn)Dn.warn(n.message);else{const r=Xt.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Dn.warn(r.message)}}}function Dm(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jw=1024,zw=30*24*60*60*1e3;class Uw{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new $w(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=ef();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=zw}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=ef(),{heartbeatsToSend:r,unsentEntries:i}=Hw(this._heartbeatsCache.heartbeats),s=Ys(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function ef(){return new Date().toISOString().substring(0,10)}function Hw(t,e=jw){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),tf(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),tf(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class $w{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Em()?Sm().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await bw(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Zd(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Zd(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function tf(t){return Ys(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ww(t){nn(new Dt("platform-logger",e=>new nw(e),"PRIVATE")),nn(new Dt("heartbeat",e=>new Uw(e),"PRIVATE")),gt(Ma,Xd,t),gt(Ma,Xd,"esm2017"),gt("fire-js","")}Ww("");var nf={};const rf="@firebase/database",sf="1.0.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Am="";function Vw(t){Am=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),le(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Ii(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Lt(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Om=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Bw(e)}}catch{}return new Gw},wn=Om("localStorage"),ja=Om("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ar=new Ku("@firebase/database"),Qw=function(){let t=1;return function(){return t++}}(),Lm=function(t){const e=O0(t),n=new A0;n.update(e);const r=n.digest();return Gu.encodeByteArray(r)},zi=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=zi.apply(null,r):typeof r=="object"?e+=le(r):e+=r,e+=" "}return e};let Tn=null,of=!0;const Kw=function(t,e){I(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(ar.logLevel=B.VERBOSE,Tn=ar.log.bind(ar),e&&ja.set("logging_enabled",!0)):typeof t=="function"?Tn=t:(Tn=null,ja.remove("logging_enabled"))},Ee=function(...t){if(of===!0&&(of=!1,Tn===null&&ja.get("logging_enabled")===!0&&Kw(!0)),Tn){const e=zi.apply(null,t);Tn(e)}},Ui=function(t){return function(...e){Ee(t,...e)}},za=function(...t){const e="FIREBASE INTERNAL ERROR: "+zi(...t);ar.error(e)},At=function(...t){const e=`FIREBASE FATAL ERROR: ${zi(...t)}`;throw ar.error(e),new Error(e)},Me=function(...t){const e="FIREBASE WARNING: "+zi(...t);ar.warn(e)},Yw=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Me("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Mm=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},qw=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},vr="[MIN_NAME]",An="[MAX_NAME]",kr=function(t,e){if(t===e)return 0;if(t===vr||e===An)return-1;if(e===vr||t===An)return 1;{const n=lf(t),r=lf(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},Xw=function(t,e){return t===e?0:t<e?-1:1},jr=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+le(e))},qu=function(t){if(typeof t!="object"||t===null)return le(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=le(e[r]),n+=":",n+=qu(t[e[r]]);return n+="}",n},Fm=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function be(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const bm=function(t){I(!Mm(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let i,s,o,l,a;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(l=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=l+r,o=Math.round(t*Math.pow(2,n-l)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));const u=[];for(a=n;a;a-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(a=e;a;a-=1)u.push(s%2?1:0),s=Math.floor(s/2);u.push(i?1:0),u.reverse();const d=u.join("");let c="";for(a=0;a<64;a+=8){let f=parseInt(d.substr(a,8),2).toString(16);f.length===1&&(f="0"+f),c=c+f}return c.toLowerCase()},Jw=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},Zw=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function e1(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const t1=new RegExp("^-?(0*)\\d{1,10}$"),n1=-2147483648,r1=2147483647,lf=function(t){if(t1.test(t)){const e=Number(t);if(e>=n1&&e<=r1)return e}return null},Nr=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw Me("Exception was thrown by user callback.",n),e},Math.floor(0))}},i1=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},ti=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Me(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Ee("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Me(e)}}class ur{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}ur.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xu="5",jm="v",zm="s",Um="r",Hm="f",$m=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Wm="ls",Vm="p",Ua="ac",Bm="websocket",Gm="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{constructor(e,n,r,i,s=!1,o="",l=!1,a=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=l,this.isUsingEmulator=a,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=wn.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&wn.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function l1(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function Km(t,e,n){I(typeof e=="string","typeof type must == string"),I(typeof n=="object","typeof params must == object");let r;if(e===Bm)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===Gm)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);l1(t)&&(n.ns=t.namespace);const i=[];return be(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a1{constructor(){this.counters_={}}incrementCounter(e,n=1){Lt(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return h0(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rl={},Pl={};function Ju(t){const e=t.toString();return Rl[e]||(Rl[e]=new a1),Rl[e]}function u1(t,e){const n=t.toString();return Pl[n]||(Pl[n]=e()),Pl[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c1{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Nr(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const af="start",d1="close",f1="pLPCommand",h1="pRTLPCB",Ym="id",qm="pw",Xm="ser",p1="cb",m1="seg",g1="ts",y1="d",_1="dframe",Jm=1870,Zm=30,v1=Jm-Zm,w1=25e3,C1=3e4;class tr{constructor(e,n,r,i,s,o,l){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=l,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Ui(e),this.stats_=Ju(n),this.urlFn=a=>(this.appCheckToken&&(a[Ua]=this.appCheckToken),Km(n,Gm,a))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new c1(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(C1)),qw(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Zu((...s)=>{const[o,l,a,u,d]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===af)this.id=l,this.password=a;else if(o===d1)l?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(l,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,l]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,l)},()=>{this.onClosed_()},this.urlFn);const r={};r[af]="t",r[Xm]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[p1]=this.scriptTagHolder.uniqueCallbackIdentifier),r[jm]=Xu,this.transportSessionId&&(r[zm]=this.transportSessionId),this.lastSessionId&&(r[Wm]=this.lastSessionId),this.applicationId&&(r[Vm]=this.applicationId),this.appCheckToken&&(r[Ua]=this.appCheckToken),typeof location<"u"&&location.hostname&&$m.test(location.hostname)&&(r[Um]=Hm);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){tr.forceAllow_=!0}static forceDisallow(){tr.forceDisallow_=!0}static isAvailable(){return tr.forceAllow_?!0:!tr.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!Jw()&&!Zw()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=le(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=gm(n),i=Fm(r,v1);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[_1]="t",r[Ym]=e,r[qm]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=le(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Zu{constructor(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=Qw(),window[f1+this.uniqueCallbackIdentifier]=e,window[h1+this.uniqueCallbackIdentifier]=n,this.myIFrame=Zu.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(l){Ee("frame writing exception"),l.stack&&Ee(l.stack),Ee(l)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Ee("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[Ym]=this.myID,e[qm]=this.myPW,e[Xm]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+Zm+r.length<=Jm;){const o=this.pendingSegs.shift();r=r+"&"+m1+i+"="+o.seg+"&"+g1+i+"="+o.ts+"&"+y1+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(w1)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Ee("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E1=16384,S1=45e3;let Zs=null;typeof MozWebSocket<"u"?Zs=MozWebSocket:typeof WebSocket<"u"&&(Zs=WebSocket);class nt{constructor(e,n,r,i,s,o,l){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Ui(this.connId),this.stats_=Ju(n),this.connURL=nt.connectionURL_(n,o,l,i,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,i,s){const o={};return o[jm]=Xu,typeof location<"u"&&location.hostname&&$m.test(location.hostname)&&(o[Um]=Hm),n&&(o[zm]=n),r&&(o[Wm]=r),i&&(o[Ua]=i),s&&(o[Vm]=s),Km(e,Bm,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,wn.set("previous_websocket_failure",!0);try{let r;Cm(),this.mySock=new Zs(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){nt.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&Zs!==null&&!nt.forceDisallow_}static previouslyFailed(){return wn.isInMemoryStorage||wn.get("previous_websocket_failure")===!0}markConnectionHealthy(){wn.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=Ii(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(I(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=le(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=Fm(n,E1);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(S1))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}nt.responsesRequiredToBeHealthy=2;nt.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[tr,nt]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=nt&&nt.isAvailable();let r=n&&!nt.previouslyFailed();if(e.webSocketOnly&&(n||Me("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[nt];else{const i=this.transports_=[];for(const s of xi.ALL_TRANSPORTS)s&&s.isAvailable()&&i.push(s);xi.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}xi.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I1=6e4,T1=5e3,x1=10*1024,k1=100*1024,Dl="t",uf="d",N1="s",cf="r",R1="e",df="o",ff="a",hf="n",pf="p",P1="h";class D1{constructor(e,n,r,i,s,o,l,a,u,d){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=l,this.onDisconnect_=a,this.onKill_=u,this.lastSessionId=d,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Ui("c:"+this.id+":"),this.transportManager_=new xi(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=ti(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>k1?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>x1?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Dl in e){const n=e[Dl];n===ff?this.upgradeIfSecondaryHealthy_():n===cf?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===df&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=jr("t",e),r=jr("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:pf,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:ff,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:hf,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=jr("t",e),r=jr("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=jr(Dl,e);if(uf in e){const r=e[uf];if(n===P1){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===hf){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===N1?this.onConnectionShutdown_(r):n===cf?this.onReset_(r):n===R1?za("Server Error: "+r):n===df?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):za("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Xu!==r&&Me("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),ti(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(I1))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ti(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(T1))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:pf,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(wn.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eg{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg{constructor(e){this.allowedEvents_=e,this.listeners_={},I(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){I(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo extends tg{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!wm()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new eo}getInitialEvent(e){return I(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mf=32,gf=768;class V{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function U(){return new V("")}function M(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function rn(t){return t.pieces_.length-t.pieceNum_}function G(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new V(t.pieces_,e)}function ng(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function A1(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function rg(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function ig(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new V(e,0)}function ae(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof V)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new V(n,0)}function b(t){return t.pieceNum_>=t.pieces_.length}function Te(t,e){const n=M(t),r=M(e);if(n===null)return e;if(n===r)return Te(G(t),G(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function ec(t,e){if(rn(t)!==rn(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function rt(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(rn(t)>rn(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class O1{constructor(e,n){this.errorPrefix_=n,this.parts_=rg(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Lo(this.parts_[r]);sg(this)}}function L1(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Lo(e),sg(t)}function M1(t){const e=t.parts_.pop();t.byteLength_-=Lo(e),t.parts_.length>0&&(t.byteLength_-=1)}function sg(t){if(t.byteLength_>gf)throw new Error(t.errorPrefix_+"has a key path longer than "+gf+" bytes ("+t.byteLength_+").");if(t.parts_.length>mf)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+mf+") or object contains a cycle "+gn(t))}function gn(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc extends tg{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new tc}getInitialEvent(e){return I(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zr=1e3,F1=60*5*1e3,yf=30*1e3,b1=1.3,j1=3e4,z1="server_kill",_f=3;class xt extends eg{constructor(e,n,r,i,s,o,l,a){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=l,this.authOverride_=a,this.id=xt.nextPersistentConnectionId_++,this.log_=Ui("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=zr,this.maxReconnectDelay_=F1,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,a&&!Cm())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");tc.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&eo.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const i=++this.requestNumber_,s={r:i,a:e,b:n};this.log_(le(s)),I(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[i]=r)}get(e){this.initConnection_();const n=new Ao,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const l=o.d;o.s==="ok"?n.resolve(l):n.reject(l)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(e,n,r,i){this.initConnection_();const s=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),I(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),I(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const l={onComplete:i,hashFn:n,query:e,tag:r};this.listens.get(o).set(s,l),this.connected_&&this.sendListen_(l)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);const s={p:r},o="q";e.tag&&(s.q=n._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(o,s,l=>{const a=l.d,u=l.s;xt.warnOnListenWarnings_(a,n),(this.listens.get(r)&&this.listens.get(r).get(i))===e&&(this.log_("listen response",l),u!=="ok"&&this.removeListen_(r,i),e.onComplete&&e.onComplete(u,a))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Lt(e,"w")){const r=_r(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();Me(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||P0(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=yf)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=R0(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,i=>{const s=i.s,o=i.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),I(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,e._queryObject,n)}sendUnlisten_(e,n,r,i){this.log_("Unlisten on "+e+" for "+n);const s={p:e},o="n";i&&(s.q=r,s.t=i),this.sendRequest(o,s)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,i){const s={p:n,d:r};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,o=>{i&&setTimeout(()=>{i(o.s,o.d)},Math.floor(0))})}put(e,n,r,i){this.putInternal("p",e,n,r,i)}merge(e,n,r,i){this.putInternal("m",e,n,r,i)}putInternal(e,n,r,i,s){this.initConnection_();const o={p:n,d:r};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:e,request:o,onComplete:i}),this.outstandingPutCount_++;const l=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(l):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(s.s,s.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+le(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):za("Unrecognized action received from server: "+le(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){I(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=zr,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=zr,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>j1&&(this.reconnectDelay_=zr),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*b1)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+xt.nextConnectionId_++,s=this.lastSessionId;let o=!1,l=null;const a=function(){l?l.close():(o=!0,r())},u=function(c){I(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(c)};this.realtime_={close:a,sendRequest:u};const d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[c,f]=await Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);o?Ee("getToken() completed but was canceled"):(Ee("getToken() completed. Creating connection."),this.authToken_=c&&c.accessToken,this.appCheckToken_=f&&f.token,l=new D1(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,g=>{Me(g+" ("+this.repoInfo_.toString()+")"),this.interrupt(z1)},s))}catch(c){this.log_("Failed to get token: "+c),o||(this.repoInfo_.nodeAdmin&&Me(c),a())}}}interrupt(e){Ee("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Ee("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Bd(this.interruptReasons_)&&(this.reconnectDelay_=zr,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(s=>qu(s)).join("$"):r="default";const i=this.removeListen_(e,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,n){const r=new V(e).toString();let i;if(this.listens.has(r)){const s=this.listens.get(r);i=s.get(n),s.delete(n),s.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(e,n){Ee("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=_f&&(this.reconnectDelay_=yf,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Ee("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=_f&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+Am.replace(/\./g,"-")]=1,wm()?e["framework.cordova"]=1:I0()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=eo.getInstance().currentlyOnline();return Bd(this.interruptReasons_)&&e}}xt.nextPersistentConnectionId_=0;xt.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new F(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new F(vr,e),i=new F(vr,n);return this.compare(r,i)!==0}minPost(){return F.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cs;class og extends Mo{static get __EMPTY_NODE(){return cs}static set __EMPTY_NODE(e){cs=e}compare(e,n){return kr(e.name,n.name)}isDefinedOn(e){throw xr("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return F.MIN}maxPost(){return new F(An,cs)}makePost(e,n){return I(typeof e=="string","KeyIndex indexValue must always be a string."),new F(e,cs)}toString(){return".key"}}const cr=new og;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class he{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??he.RED,this.left=i??De.EMPTY_NODE,this.right=s??De.EMPTY_NODE}copy(e,n,r,i,s){return new he(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return De.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,i;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return De.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,he.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,he.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}he.RED=!0;he.BLACK=!1;class U1{copy(e,n,r,i,s){return this}insert(e,n,r){return new he(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class De{constructor(e,n=De.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new De(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,he.BLACK,null,null))}remove(e){return new De(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,he.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new ds(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new ds(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new ds(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new ds(this.root_,null,this.comparator_,!0,e)}}De.EMPTY_NODE=new U1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H1(t,e){return kr(t.name,e.name)}function nc(t,e){return kr(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ha;function $1(t){Ha=t}const lg=function(t){return typeof t=="number"?"number:"+bm(t):"string:"+t},ag=function(t){if(t.isLeafNode()){const e=t.val();I(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Lt(e,".sv"),"Priority must be a string or number.")}else I(t===Ha||t.isEmpty(),"priority of unexpected type.");I(t===Ha||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vf;class de{constructor(e,n=de.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,I(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),ag(this.priorityNode_)}static set __childrenNodeConstructor(e){vf=e}static get __childrenNodeConstructor(){return vf}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new de(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:de.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return b(e)?this:M(e)===".priority"?this.priorityNode_:de.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:de.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=M(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(I(r!==".priority"||rn(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,de.__childrenNodeConstructor.EMPTY_NODE.updateChild(G(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+lg(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=bm(this.value_):e+=this.value_,this.lazyHash_=Lm(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===de.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof de.__childrenNodeConstructor?-1:(I(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,i=de.VALUE_TYPE_ORDER.indexOf(n),s=de.VALUE_TYPE_ORDER.indexOf(r);return I(i>=0,"Unknown leaf type: "+n),I(s>=0,"Unknown leaf type: "+r),i===s?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}de.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ug,cg;function W1(t){ug=t}function V1(t){cg=t}class B1 extends Mo{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?kr(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return F.MIN}maxPost(){return new F(An,new de("[PRIORITY-POST]",cg))}makePost(e,n){const r=ug(e);return new F(n,new de("[PRIORITY-POST]",r))}toString(){return".priority"}}const ne=new B1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G1=Math.log(2);class Q1{constructor(e){const n=s=>parseInt(Math.log(s)/G1,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const to=function(t,e,n,r){t.sort(e);const i=function(a,u){const d=u-a;let c,f;if(d===0)return null;if(d===1)return c=t[a],f=n?n(c):c,new he(f,c.node,he.BLACK,null,null);{const g=parseInt(d/2,10)+a,y=i(a,g),_=i(g+1,u);return c=t[g],f=n?n(c):c,new he(f,c.node,he.BLACK,y,_)}},s=function(a){let u=null,d=null,c=t.length;const f=function(y,_){const S=c-y,p=c;c-=y;const h=i(S+1,p),m=t[S],v=n?n(m):m;g(new he(v,m.node,_,null,h))},g=function(y){u?(u.left=y,u=y):(d=y,u=y)};for(let y=0;y<a.count;++y){const _=a.nextBitIsOne(),S=Math.pow(2,a.count-(y+1));_?f(S,he.BLACK):(f(S,he.BLACK),f(S,he.RED))}return d},o=new Q1(t.length),l=s(o);return new De(r||e,l)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Al;const $n={};class It{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return I($n&&ne,"ChildrenNode.ts has not been loaded"),Al=Al||new It({".priority":$n},{".priority":ne}),Al}get(e){const n=_r(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof De?n:null}hasIndex(e){return Lt(this.indexSet_,e.toString())}addIndex(e,n){I(e!==cr,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=n.getIterator(F.Wrap);let o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let l;i?l=to(r,e.getCompare()):l=$n;const a=e.toString(),u=Object.assign({},this.indexSet_);u[a]=e;const d=Object.assign({},this.indexes_);return d[a]=l,new It(d,u)}addToIndexes(e,n){const r=qs(this.indexes_,(i,s)=>{const o=_r(this.indexSet_,s);if(I(o,"Missing index implementation for "+s),i===$n)if(o.isDefinedOn(e.node)){const l=[],a=n.getIterator(F.Wrap);let u=a.getNext();for(;u;)u.name!==e.name&&l.push(u),u=a.getNext();return l.push(e),to(l,o.getCompare())}else return $n;else{const l=n.get(e.name);let a=i;return l&&(a=a.remove(new F(e.name,l))),a.insert(e,e.node)}});return new It(r,this.indexSet_)}removeFromIndexes(e,n){const r=qs(this.indexes_,i=>{if(i===$n)return i;{const s=n.get(e.name);return s?i.remove(new F(e.name,s)):i}});return new It(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ur;class D{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&ag(this.priorityNode_),this.children_.isEmpty()&&I(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Ur||(Ur=new D(new De(nc),null,It.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ur}updatePriority(e){return this.children_.isEmpty()?this:new D(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Ur:n}}getChild(e){const n=M(e);return n===null?this:this.getImmediateChild(n).getChild(G(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(I(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new F(e,n);let i,s;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));const o=i.isEmpty()?Ur:this.priorityNode_;return new D(i,o,s)}}updateChild(e,n){const r=M(e);if(r===null)return n;{I(M(e)!==".priority"||rn(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(G(e),n);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,i=0,s=!0;if(this.forEachChild(ne,(o,l)=>{n[o]=l.val(e),r++,s&&D.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):s=!1}),!e&&s&&i<2*r){const o=[];for(const l in n)o[l]=n[l];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+lg(this.getPriority().val())+":"),this.forEachChild(ne,(n,r)=>{const i=r.hash();i!==""&&(e+=":"+n+":"+i)}),this.lazyHash_=e===""?"":Lm(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const i=this.resolveIndex_(r);if(i){const s=i.getPredecessorKey(new F(e,n));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new F(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new F(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,F.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)<0;)i.getNext(),s=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,F.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)>0;)i.getNext(),s=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Hi?-1:0}withIndex(e){if(e===cr||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new D(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===cr||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(ne),i=n.getIterator(ne);let s=r.getNext(),o=i.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=r.getNext(),o=i.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===cr?null:this.indexMap_.get(e.toString())}}D.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class K1 extends D{constructor(){super(new De(nc),D.EMPTY_NODE,It.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return D.EMPTY_NODE}isEmpty(){return!1}}const Hi=new K1;Object.defineProperties(F,{MIN:{value:new F(vr,D.EMPTY_NODE)},MAX:{value:new F(An,Hi)}});og.__EMPTY_NODE=D.EMPTY_NODE;de.__childrenNodeConstructor=D;$1(Hi);V1(Hi);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y1=!0;function pe(t,e=null){if(t===null)return D.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),I(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new de(n,pe(e))}if(!(t instanceof Array)&&Y1){const n=[];let r=!1;if(be(t,(o,l)=>{if(o.substring(0,1)!=="."){const a=pe(l);a.isEmpty()||(r=r||!a.getPriority().isEmpty(),n.push(new F(o,a)))}}),n.length===0)return D.EMPTY_NODE;const s=to(n,H1,o=>o.name,nc);if(r){const o=to(n,ne.getCompare());return new D(s,pe(e),new It({".priority":o},{".priority":ne}))}else return new D(s,pe(e),It.Default)}else{let n=D.EMPTY_NODE;return be(t,(r,i)=>{if(Lt(t,r)&&r.substring(0,1)!=="."){const s=pe(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(pe(e))}}W1(pe);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q1 extends Mo{constructor(e){super(),this.indexPath_=e,I(!b(e)&&M(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?kr(e.name,n.name):s}makePost(e,n){const r=pe(e),i=D.EMPTY_NODE.updateChild(this.indexPath_,r);return new F(n,i)}maxPost(){const e=D.EMPTY_NODE.updateChild(this.indexPath_,Hi);return new F(An,e)}toString(){return rg(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1 extends Mo{compare(e,n){const r=e.node.compareTo(n.node);return r===0?kr(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return F.MIN}maxPost(){return F.MAX}makePost(e,n){const r=pe(e);return new F(n,r)}toString(){return".value"}}const J1=new X1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dg(t){return{type:"value",snapshotNode:t}}function wr(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function ki(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Ni(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function Z1(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(e){this.index_=e}updateChild(e,n,r,i,s,o){I(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const l=e.getImmediateChild(n);return l.getChild(i).equals(r.getChild(i))&&l.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(ki(n,l)):I(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):l.isEmpty()?o.trackChildChange(wr(n,r)):o.trackChildChange(Ni(n,r,l))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(ne,(i,s)=>{n.hasChild(i)||r.trackChildChange(ki(i,s))}),n.isLeafNode()||n.forEachChild(ne,(i,s)=>{if(e.hasChild(i)){const o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(Ni(i,s,o))}else r.trackChildChange(wr(i,s))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?D.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(e){this.indexedFilter_=new rc(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Ri.getStartPost_(e),this.endPost_=Ri.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,i,s,o){return this.matches(new F(n,r))||(r=D.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,s,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=D.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(D.EMPTY_NODE);const s=this;return n.forEachChild(ne,(o,l)=>{s.matches(new F(o,l))||(i=i.updateImmediateChild(o,D.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Ri(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,i,s,o){return this.rangedFilter_.matches(new F(n,r))||(r=D.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,s,o):this.fullLimitUpdateChild_(e,n,r,s,o)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=D.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=D.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const l=s.getNext();if(this.withinDirectionalStart(l))if(this.withinDirectionalEnd(l))i=i.updateImmediateChild(l.name,l.node),o++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(D.EMPTY_NODE);let s;this.reverse_?s=i.getReverseIterator(this.index_):s=i.getIterator(this.index_);let o=0;for(;s.hasNext();){const l=s.getNext();o<this.limit_&&this.withinDirectionalStart(l)&&this.withinDirectionalEnd(l)?o++:i=i.updateImmediateChild(l.name,D.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,s){let o;if(this.reverse_){const c=this.index_.getCompare();o=(f,g)=>c(g,f)}else o=this.index_.getCompare();const l=e;I(l.numChildren()===this.limit_,"");const a=new F(n,r),u=this.reverse_?l.getFirstChild(this.index_):l.getLastChild(this.index_),d=this.rangedFilter_.matches(a);if(l.hasChild(n)){const c=l.getImmediateChild(n);let f=i.getChildAfterChild(this.index_,u,this.reverse_);for(;f!=null&&(f.name===n||l.hasChild(f.name));)f=i.getChildAfterChild(this.index_,f,this.reverse_);const g=f==null?1:o(f,a);if(d&&!r.isEmpty()&&g>=0)return s!=null&&s.trackChildChange(Ni(n,r,c)),l.updateImmediateChild(n,r);{s!=null&&s.trackChildChange(ki(n,c));const _=l.updateImmediateChild(n,D.EMPTY_NODE);return f!=null&&this.rangedFilter_.matches(f)?(s!=null&&s.trackChildChange(wr(f.name,f.node)),_.updateImmediateChild(f.name,f.node)):_}}else return r.isEmpty()?e:d&&o(u,a)>=0?(s!=null&&(s.trackChildChange(ki(u.name,u.node)),s.trackChildChange(wr(n,r))),l.updateImmediateChild(n,r).updateImmediateChild(u.name,D.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ne}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return I(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return I(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:vr}hasEnd(){return this.endSet_}getIndexEndValue(){return I(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return I(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:An}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return I(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ne}copy(){const e=new ic;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function tC(t){return t.loadsAllData()?new rc(t.getIndex()):t.hasLimit()?new eC(t):new Ri(t)}function wf(t){const e={};if(t.isDefault())return e;let n;if(t.index_===ne?n="$priority":t.index_===J1?n="$value":t.index_===cr?n="$key":(I(t.index_ instanceof q1,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=le(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=le(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+le(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=le(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+le(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function Cf(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==ne&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no extends eg{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Ui("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(I(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=no.getListenId_(e,r),l={};this.listens_[o]=l;const a=wf(e._queryParams);this.restRequest_(s+".json",a,(u,d)=>{let c=d;if(u===404&&(c=null,u=null),u===null&&this.onDataUpdate_(s,c,!1,r),_r(this.listens_,o)===l){let f;u?u===401?f="permission_denied":f="rest_error:"+u:f="ok",i(f,null)}})}unlisten(e,n){const r=no.getListenId_(e,n);delete this.listens_[r]}get(e){const n=wf(e._queryParams),r=e._path.toString(),i=new Ao;return this.restRequest_(r+".json",n,(s,o)=>{let l=o;s===404&&(l=null,s=null),s===null?(this.onDataUpdate_(r,l,!1,null),i.resolve(l)):i.reject(new Error(l))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+D0(n);this.log_("Sending REST request for "+o);const l=new XMLHttpRequest;l.onreadystatechange=()=>{if(r&&l.readyState===4){this.log_("REST Response for "+o+" received. status:",l.status,"response:",l.responseText);let a=null;if(l.status>=200&&l.status<300){try{a=Ii(l.responseText)}catch{Me("Failed to parse JSON response for "+o+": "+l.responseText)}r(null,a)}else l.status!==401&&l.status!==404&&Me("Got unsuccessful REST response for "+o+" Status: "+l.status),r(l.status);r=null}},l.open("GET",o,!0),l.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(){this.rootNode_=D.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ro(){return{value:null,children:new Map}}function fg(t,e,n){if(b(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=M(e);t.children.has(r)||t.children.set(r,ro());const i=t.children.get(r);e=G(e),fg(i,e,n)}}function $a(t,e,n){t.value!==null?n(e,t.value):rC(t,(r,i)=>{const s=new V(e.toString()+"/"+r);$a(i,s,n)})}function rC(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&be(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ef=10*1e3,sC=30*1e3,oC=5*60*1e3;class lC{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new iC(e);const r=Ef+(sC-Ef)*Math.random();ti(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;be(e,(i,s)=>{s>0&&Lt(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),ti(this.reportStats_.bind(this),Math.floor(Math.random()*2*oC))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var it;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(it||(it={}));function hg(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function sc(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function oc(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=it.ACK_USER_WRITE,this.source=hg()}operationForChild(e){if(b(this.path)){if(this.affectedTree.value!=null)return I(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new V(e));return new io(U(),n,this.revert)}}else return I(M(this.path)===e,"operationForChild called for unrelated child."),new io(G(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(e,n){this.source=e,this.path=n,this.type=it.LISTEN_COMPLETE}operationForChild(e){return b(this.path)?new Pi(this.source,U()):new Pi(this.source,G(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=it.OVERWRITE}operationForChild(e){return b(this.path)?new On(this.source,U(),this.snap.getImmediateChild(e)):new On(this.source,G(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=it.MERGE}operationForChild(e){if(b(this.path)){const n=this.children.subtree(new V(e));return n.isEmpty()?null:n.value?new On(this.source,U(),n.value):new Di(this.source,U(),n)}else return I(M(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Di(this.source,G(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(b(e))return this.isFullyInitialized()&&!this.filtered_;const n=M(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function uC(t,e,n,r){const i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(Z1(o.childName,o.snapshotNode))}),Hr(t,i,"child_removed",e,r,n),Hr(t,i,"child_added",e,r,n),Hr(t,i,"child_moved",s,r,n),Hr(t,i,"child_changed",e,r,n),Hr(t,i,"value",e,r,n),i}function Hr(t,e,n,r,i,s){const o=r.filter(l=>l.type===n);o.sort((l,a)=>dC(t,l,a)),o.forEach(l=>{const a=cC(t,l,s);i.forEach(u=>{u.respondsTo(l.type)&&e.push(u.createEvent(a,t.query_))})})}function cC(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function dC(t,e,n){if(e.childName==null||n.childName==null)throw xr("Should only compare child_ events.");const r=new F(e.childName,e.snapshotNode),i=new F(n.childName,n.snapshotNode);return t.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fo(t,e){return{eventCache:t,serverCache:e}}function ni(t,e,n,r){return Fo(new sn(e,n,r),t.serverCache)}function pg(t,e,n,r){return Fo(t.eventCache,new sn(e,n,r))}function so(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Ln(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ol;const fC=()=>(Ol||(Ol=new De(Xw)),Ol);class Y{constructor(e,n=fC()){this.value=e,this.children=n}static fromObject(e){let n=new Y(null);return be(e,(r,i)=>{n=n.set(new V(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:U(),value:this.value};if(b(e))return null;{const r=M(e),i=this.children.get(r);if(i!==null){const s=i.findRootMostMatchingPathAndValue(G(e),n);return s!=null?{path:ae(new V(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(b(e))return this;{const n=M(e),r=this.children.get(n);return r!==null?r.subtree(G(e)):new Y(null)}}set(e,n){if(b(e))return new Y(n,this.children);{const r=M(e),s=(this.children.get(r)||new Y(null)).set(G(e),n),o=this.children.insert(r,s);return new Y(this.value,o)}}remove(e){if(b(e))return this.children.isEmpty()?new Y(null):new Y(null,this.children);{const n=M(e),r=this.children.get(n);if(r){const i=r.remove(G(e));let s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new Y(null):new Y(this.value,s)}else return this}}get(e){if(b(e))return this.value;{const n=M(e),r=this.children.get(n);return r?r.get(G(e)):null}}setTree(e,n){if(b(e))return n;{const r=M(e),s=(this.children.get(r)||new Y(null)).setTree(G(e),n);let o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new Y(this.value,o)}}fold(e){return this.fold_(U(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(ae(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,U(),n)}findOnPath_(e,n,r){const i=this.value?r(n,this.value):!1;if(i)return i;if(b(e))return null;{const s=M(e),o=this.children.get(s);return o?o.findOnPath_(G(e),ae(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,U(),n)}foreachOnPath_(e,n,r){if(b(e))return this;{this.value&&r(n,this.value);const i=M(e),s=this.children.get(i);return s?s.foreachOnPath_(G(e),ae(n,i),r):new Y(null)}}foreach(e){this.foreach_(U(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(ae(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e){this.writeTree_=e}static empty(){return new lt(new Y(null))}}function ri(t,e,n){if(b(e))return new lt(new Y(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const i=r.path;let s=r.value;const o=Te(i,e);return s=s.updateChild(o,n),new lt(t.writeTree_.set(i,s))}else{const i=new Y(n),s=t.writeTree_.setTree(e,i);return new lt(s)}}}function Sf(t,e,n){let r=t;return be(n,(i,s)=>{r=ri(r,ae(e,i),s)}),r}function If(t,e){if(b(e))return lt.empty();{const n=t.writeTree_.setTree(e,new Y(null));return new lt(n)}}function Wa(t,e){return Un(t,e)!=null}function Un(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Te(n.path,e)):null}function Tf(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(ne,(r,i)=>{e.push(new F(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new F(r,i.value))}),e}function Jt(t,e){if(b(e))return t;{const n=Un(t,e);return n!=null?new lt(new Y(n)):new lt(t.writeTree_.subtree(e))}}function Va(t){return t.writeTree_.isEmpty()}function Cr(t,e){return mg(U(),t.writeTree_,e)}function mg(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(I(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=mg(ae(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(ae(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bo(t,e){return vg(e,t)}function hC(t,e,n,r,i){I(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=ri(t.visibleWrites,e,n)),t.lastWriteId=r}function pC(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function mC(t,e){const n=t.allWrites.findIndex(l=>l.writeId===e);I(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){const l=t.allWrites[o];l.visible&&(o>=n&&gC(l,r.path)?i=!1:rt(r.path,l.path)&&(s=!0)),o--}if(i){if(s)return yC(t),!0;if(r.snap)t.visibleWrites=If(t.visibleWrites,r.path);else{const l=r.children;be(l,a=>{t.visibleWrites=If(t.visibleWrites,ae(r.path,a))})}return!0}else return!1}function gC(t,e){if(t.snap)return rt(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&rt(ae(t.path,n),e))return!0;return!1}function yC(t){t.visibleWrites=gg(t.allWrites,_C,U()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function _C(t){return t.visible}function gg(t,e,n){let r=lt.empty();for(let i=0;i<t.length;++i){const s=t[i];if(e(s)){const o=s.path;let l;if(s.snap)rt(n,o)?(l=Te(n,o),r=ri(r,l,s.snap)):rt(o,n)&&(l=Te(o,n),r=ri(r,U(),s.snap.getChild(l)));else if(s.children){if(rt(n,o))l=Te(n,o),r=Sf(r,l,s.children);else if(rt(o,n))if(l=Te(o,n),b(l))r=Sf(r,U(),s.children);else{const a=_r(s.children,M(l));if(a){const u=a.getChild(G(l));r=ri(r,U(),u)}}}else throw xr("WriteRecord should have .snap or .children")}}return r}function yg(t,e,n,r,i){if(!r&&!i){const s=Un(t.visibleWrites,e);if(s!=null)return s;{const o=Jt(t.visibleWrites,e);if(Va(o))return n;if(n==null&&!Wa(o,U()))return null;{const l=n||D.EMPTY_NODE;return Cr(o,l)}}}else{const s=Jt(t.visibleWrites,e);if(!i&&Va(s))return n;if(!i&&n==null&&!Wa(s,U()))return null;{const o=function(u){return(u.visible||i)&&(!r||!~r.indexOf(u.writeId))&&(rt(u.path,e)||rt(e,u.path))},l=gg(t.allWrites,o,e),a=n||D.EMPTY_NODE;return Cr(l,a)}}}function vC(t,e,n){let r=D.EMPTY_NODE;const i=Un(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(ne,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){const s=Jt(t.visibleWrites,e);return n.forEachChild(ne,(o,l)=>{const a=Cr(Jt(s,new V(o)),l);r=r.updateImmediateChild(o,a)}),Tf(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const s=Jt(t.visibleWrites,e);return Tf(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function wC(t,e,n,r,i){I(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=ae(e,n);if(Wa(t.visibleWrites,s))return null;{const o=Jt(t.visibleWrites,s);return Va(o)?i.getChild(n):Cr(o,i.getChild(n))}}function CC(t,e,n,r){const i=ae(e,n),s=Un(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){const o=Jt(t.visibleWrites,i);return Cr(o,r.getNode().getImmediateChild(n))}else return null}function EC(t,e){return Un(t.visibleWrites,e)}function SC(t,e,n,r,i,s,o){let l;const a=Jt(t.visibleWrites,e),u=Un(a,U());if(u!=null)l=u;else if(n!=null)l=Cr(a,n);else return[];if(l=l.withIndex(o),!l.isEmpty()&&!l.isLeafNode()){const d=[],c=o.getCompare(),f=s?l.getReverseIteratorFrom(r,o):l.getIteratorFrom(r,o);let g=f.getNext();for(;g&&d.length<i;)c(g,r)!==0&&d.push(g),g=f.getNext();return d}else return[]}function IC(){return{visibleWrites:lt.empty(),allWrites:[],lastWriteId:-1}}function oo(t,e,n,r){return yg(t.writeTree,t.treePath,e,n,r)}function lc(t,e){return vC(t.writeTree,t.treePath,e)}function xf(t,e,n,r){return wC(t.writeTree,t.treePath,e,n,r)}function lo(t,e){return EC(t.writeTree,ae(t.treePath,e))}function TC(t,e,n,r,i,s){return SC(t.writeTree,t.treePath,e,n,r,i,s)}function ac(t,e,n){return CC(t.writeTree,t.treePath,e,n)}function _g(t,e){return vg(ae(t.treePath,e),t.writeTree)}function vg(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;I(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),I(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,Ni(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,ki(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,wr(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,Ni(r,e.snapshotNode,i.oldSnap));else throw xr("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const wg=new kC;class uc{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new sn(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return ac(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Ln(this.viewCache_),s=TC(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NC(t){return{filter:t}}function RC(t,e){I(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),I(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function PC(t,e,n,r,i){const s=new xC;let o,l;if(n.type===it.OVERWRITE){const u=n;u.source.fromUser?o=Ba(t,e,u.path,u.snap,r,i,s):(I(u.source.fromServer,"Unknown source."),l=u.source.tagged||e.serverCache.isFiltered()&&!b(u.path),o=ao(t,e,u.path,u.snap,r,i,l,s))}else if(n.type===it.MERGE){const u=n;u.source.fromUser?o=AC(t,e,u.path,u.children,r,i,s):(I(u.source.fromServer,"Unknown source."),l=u.source.tagged||e.serverCache.isFiltered(),o=Ga(t,e,u.path,u.children,r,i,l,s))}else if(n.type===it.ACK_USER_WRITE){const u=n;u.revert?o=MC(t,e,u.path,r,i,s):o=OC(t,e,u.path,u.affectedTree,r,i,s)}else if(n.type===it.LISTEN_COMPLETE)o=LC(t,e,n.path,r,s);else throw xr("Unknown operation type: "+n.type);const a=s.getChanges();return DC(e,o,a),{viewCache:o,changes:a}}function DC(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=so(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(dg(so(e)))}}function Cg(t,e,n,r,i,s){const o=e.eventCache;if(lo(r,n)!=null)return e;{let l,a;if(b(n))if(I(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const u=Ln(e),d=u instanceof D?u:D.EMPTY_NODE,c=lc(r,d);l=t.filter.updateFullNode(e.eventCache.getNode(),c,s)}else{const u=oo(r,Ln(e));l=t.filter.updateFullNode(e.eventCache.getNode(),u,s)}else{const u=M(n);if(u===".priority"){I(rn(n)===1,"Can't have a priority with additional path components");const d=o.getNode();a=e.serverCache.getNode();const c=xf(r,n,d,a);c!=null?l=t.filter.updatePriority(d,c):l=o.getNode()}else{const d=G(n);let c;if(o.isCompleteForChild(u)){a=e.serverCache.getNode();const f=xf(r,n,o.getNode(),a);f!=null?c=o.getNode().getImmediateChild(u).updateChild(d,f):c=o.getNode().getImmediateChild(u)}else c=ac(r,u,e.serverCache);c!=null?l=t.filter.updateChild(o.getNode(),u,c,d,i,s):l=o.getNode()}}return ni(e,l,o.isFullyInitialized()||b(n),t.filter.filtersNodes())}}function ao(t,e,n,r,i,s,o,l){const a=e.serverCache;let u;const d=o?t.filter:t.filter.getIndexedFilter();if(b(n))u=d.updateFullNode(a.getNode(),r,null);else if(d.filtersNodes()&&!a.isFiltered()){const g=a.getNode().updateChild(n,r);u=d.updateFullNode(a.getNode(),g,null)}else{const g=M(n);if(!a.isCompleteForPath(n)&&rn(n)>1)return e;const y=G(n),S=a.getNode().getImmediateChild(g).updateChild(y,r);g===".priority"?u=d.updatePriority(a.getNode(),S):u=d.updateChild(a.getNode(),g,S,y,wg,null)}const c=pg(e,u,a.isFullyInitialized()||b(n),d.filtersNodes()),f=new uc(i,c,s);return Cg(t,c,n,i,f,l)}function Ba(t,e,n,r,i,s,o){const l=e.eventCache;let a,u;const d=new uc(i,e,s);if(b(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,o),a=ni(e,u,!0,t.filter.filtersNodes());else{const c=M(n);if(c===".priority")u=t.filter.updatePriority(e.eventCache.getNode(),r),a=ni(e,u,l.isFullyInitialized(),l.isFiltered());else{const f=G(n),g=l.getNode().getImmediateChild(c);let y;if(b(f))y=r;else{const _=d.getCompleteChild(c);_!=null?ng(f)===".priority"&&_.getChild(ig(f)).isEmpty()?y=_:y=_.updateChild(f,r):y=D.EMPTY_NODE}if(g.equals(y))a=e;else{const _=t.filter.updateChild(l.getNode(),c,y,f,d,o);a=ni(e,_,l.isFullyInitialized(),t.filter.filtersNodes())}}}return a}function kf(t,e){return t.eventCache.isCompleteForChild(e)}function AC(t,e,n,r,i,s,o){let l=e;return r.foreach((a,u)=>{const d=ae(n,a);kf(e,M(d))&&(l=Ba(t,l,d,u,i,s,o))}),r.foreach((a,u)=>{const d=ae(n,a);kf(e,M(d))||(l=Ba(t,l,d,u,i,s,o))}),l}function Nf(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function Ga(t,e,n,r,i,s,o,l){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let a=e,u;b(n)?u=r:u=new Y(null).setTree(n,r);const d=e.serverCache.getNode();return u.children.inorderTraversal((c,f)=>{if(d.hasChild(c)){const g=e.serverCache.getNode().getImmediateChild(c),y=Nf(t,g,f);a=ao(t,a,new V(c),y,i,s,o,l)}}),u.children.inorderTraversal((c,f)=>{const g=!e.serverCache.isCompleteForChild(c)&&f.value===null;if(!d.hasChild(c)&&!g){const y=e.serverCache.getNode().getImmediateChild(c),_=Nf(t,y,f);a=ao(t,a,new V(c),_,i,s,o,l)}}),a}function OC(t,e,n,r,i,s,o){if(lo(i,n)!=null)return e;const l=e.serverCache.isFiltered(),a=e.serverCache;if(r.value!=null){if(b(n)&&a.isFullyInitialized()||a.isCompleteForPath(n))return ao(t,e,n,a.getNode().getChild(n),i,s,l,o);if(b(n)){let u=new Y(null);return a.getNode().forEachChild(cr,(d,c)=>{u=u.set(new V(d),c)}),Ga(t,e,n,u,i,s,l,o)}else return e}else{let u=new Y(null);return r.foreach((d,c)=>{const f=ae(n,d);a.isCompleteForPath(f)&&(u=u.set(d,a.getNode().getChild(f)))}),Ga(t,e,n,u,i,s,l,o)}}function LC(t,e,n,r,i){const s=e.serverCache,o=pg(e,s.getNode(),s.isFullyInitialized()||b(n),s.isFiltered());return Cg(t,o,n,r,wg,i)}function MC(t,e,n,r,i,s){let o;if(lo(r,n)!=null)return e;{const l=new uc(r,e,i),a=e.eventCache.getNode();let u;if(b(n)||M(n)===".priority"){let d;if(e.serverCache.isFullyInitialized())d=oo(r,Ln(e));else{const c=e.serverCache.getNode();I(c instanceof D,"serverChildren would be complete if leaf node"),d=lc(r,c)}d=d,u=t.filter.updateFullNode(a,d,s)}else{const d=M(n);let c=ac(r,d,e.serverCache);c==null&&e.serverCache.isCompleteForChild(d)&&(c=a.getImmediateChild(d)),c!=null?u=t.filter.updateChild(a,d,c,G(n),l,s):e.eventCache.getNode().hasChild(d)?u=t.filter.updateChild(a,d,D.EMPTY_NODE,G(n),l,s):u=a,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=oo(r,Ln(e)),o.isLeafNode()&&(u=t.filter.updateFullNode(u,o,s)))}return o=e.serverCache.isFullyInitialized()||lo(r,U())!=null,ni(e,u,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new rc(r.getIndex()),s=tC(r);this.processor_=NC(s);const o=n.serverCache,l=n.eventCache,a=i.updateFullNode(D.EMPTY_NODE,o.getNode(),null),u=s.updateFullNode(D.EMPTY_NODE,l.getNode(),null),d=new sn(a,o.isFullyInitialized(),i.filtersNodes()),c=new sn(u,l.isFullyInitialized(),s.filtersNodes());this.viewCache_=Fo(c,d),this.eventGenerator_=new aC(this.query_)}get query(){return this.query_}}function bC(t){return t.viewCache_.serverCache.getNode()}function jC(t){return so(t.viewCache_)}function zC(t,e){const n=Ln(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!b(e)&&!n.getImmediateChild(M(e)).isEmpty())?n.getChild(e):null}function Rf(t){return t.eventRegistrations_.length===0}function UC(t,e){t.eventRegistrations_.push(e)}function Pf(t,e,n){const r=[];if(n){I(e==null,"A cancel should cancel all event registrations.");const i=t.query._path;t.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(n,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<t.eventRegistrations_.length;++s){const o=t.eventRegistrations_[s];if(!o.matches(e))i.push(o);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(s+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function Df(t,e,n,r){e.type===it.MERGE&&e.source.queryId!==null&&(I(Ln(t.viewCache_),"We should always have a full cache before handling merges"),I(so(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,s=PC(t.processor_,i,e,n,r);return RC(t.processor_,s.viewCache),I(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,Eg(t,s.changes,s.viewCache.eventCache.getNode(),null)}function HC(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(ne,(s,o)=>{r.push(wr(s,o))}),n.isFullyInitialized()&&r.push(dg(n.getNode())),Eg(t,r,n.getNode(),e)}function Eg(t,e,n,r){const i=r?[r]:t.eventRegistrations_;return uC(t.eventGenerator_,e,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uo;class Sg{constructor(){this.views=new Map}}function $C(t){I(!uo,"__referenceConstructor has already been defined"),uo=t}function WC(){return I(uo,"Reference.ts has not been loaded"),uo}function VC(t){return t.views.size===0}function cc(t,e,n,r){const i=e.source.queryId;if(i!==null){const s=t.views.get(i);return I(s!=null,"SyncTree gave us an op for an invalid query."),Df(s,e,n,r)}else{let s=[];for(const o of t.views.values())s=s.concat(Df(o,e,n,r));return s}}function Ig(t,e,n,r,i){const s=e._queryIdentifier,o=t.views.get(s);if(!o){let l=oo(n,i?r:null),a=!1;l?a=!0:r instanceof D?(l=lc(n,r),a=!1):(l=D.EMPTY_NODE,a=!1);const u=Fo(new sn(l,a,!1),new sn(r,i,!1));return new FC(e,u)}return o}function BC(t,e,n,r,i,s){const o=Ig(t,e,r,i,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),UC(o,n),HC(o,n)}function GC(t,e,n,r){const i=e._queryIdentifier,s=[];let o=[];const l=on(t);if(i==="default")for(const[a,u]of t.views.entries())o=o.concat(Pf(u,n,r)),Rf(u)&&(t.views.delete(a),u.query._queryParams.loadsAllData()||s.push(u.query));else{const a=t.views.get(i);a&&(o=o.concat(Pf(a,n,r)),Rf(a)&&(t.views.delete(i),a.query._queryParams.loadsAllData()||s.push(a.query)))}return l&&!on(t)&&s.push(new(WC())(e._repo,e._path)),{removed:s,events:o}}function Tg(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Zt(t,e){let n=null;for(const r of t.views.values())n=n||zC(r,e);return n}function xg(t,e){if(e._queryParams.loadsAllData())return jo(t);{const r=e._queryIdentifier;return t.views.get(r)}}function kg(t,e){return xg(t,e)!=null}function on(t){return jo(t)!=null}function jo(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let co;function QC(t){I(!co,"__referenceConstructor has already been defined"),co=t}function KC(){return I(co,"Reference.ts has not been loaded"),co}let YC=1;class Af{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Y(null),this.pendingWriteTree_=IC(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Ng(t,e,n,r,i){return hC(t.pendingWriteTree_,e,n,r,i),i?Wi(t,new On(hg(),e,n)):[]}function Cn(t,e,n=!1){const r=pC(t.pendingWriteTree_,e);if(mC(t.pendingWriteTree_,e)){let s=new Y(null);return r.snap!=null?s=s.set(U(),!0):be(r.children,o=>{s=s.set(new V(o),!0)}),Wi(t,new io(r.path,s,n))}else return[]}function $i(t,e,n){return Wi(t,new On(sc(),e,n))}function qC(t,e,n){const r=Y.fromObject(n);return Wi(t,new Di(sc(),e,r))}function XC(t,e){return Wi(t,new Pi(sc(),e))}function JC(t,e,n){const r=fc(t,n);if(r){const i=hc(r),s=i.path,o=i.queryId,l=Te(s,e),a=new Pi(oc(o),l);return pc(t,s,a)}else return[]}function fo(t,e,n,r,i=!1){const s=e._path,o=t.syncPointTree_.get(s);let l=[];if(o&&(e._queryIdentifier==="default"||kg(o,e))){const a=GC(o,e,n,r);VC(o)&&(t.syncPointTree_=t.syncPointTree_.remove(s));const u=a.removed;if(l=a.events,!i){const d=u.findIndex(f=>f._queryParams.loadsAllData())!==-1,c=t.syncPointTree_.findOnPath(s,(f,g)=>on(g));if(d&&!c){const f=t.syncPointTree_.subtree(s);if(!f.isEmpty()){const g=tE(f);for(let y=0;y<g.length;++y){const _=g[y],S=_.query,p=Ag(t,_);t.listenProvider_.startListening(ii(S),Ai(t,S),p.hashFn,p.onComplete)}}}!c&&u.length>0&&!r&&(d?t.listenProvider_.stopListening(ii(e),null):u.forEach(f=>{const g=t.queryToTagMap.get(zo(f));t.listenProvider_.stopListening(ii(f),g)}))}nE(t,u)}return l}function Rg(t,e,n,r){const i=fc(t,r);if(i!=null){const s=hc(i),o=s.path,l=s.queryId,a=Te(o,e),u=new On(oc(l),a,n);return pc(t,o,u)}else return[]}function ZC(t,e,n,r){const i=fc(t,r);if(i){const s=hc(i),o=s.path,l=s.queryId,a=Te(o,e),u=Y.fromObject(n),d=new Di(oc(l),a,u);return pc(t,o,d)}else return[]}function Qa(t,e,n,r=!1){const i=e._path;let s=null,o=!1;t.syncPointTree_.foreachOnPath(i,(f,g)=>{const y=Te(f,i);s=s||Zt(g,y),o=o||on(g)});let l=t.syncPointTree_.get(i);l?(o=o||on(l),s=s||Zt(l,U())):(l=new Sg,t.syncPointTree_=t.syncPointTree_.set(i,l));let a;s!=null?a=!0:(a=!1,s=D.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((g,y)=>{const _=Zt(y,U());_&&(s=s.updateImmediateChild(g,_))}));const u=kg(l,e);if(!u&&!e._queryParams.loadsAllData()){const f=zo(e);I(!t.queryToTagMap.has(f),"View does not exist, but we have a tag");const g=rE();t.queryToTagMap.set(f,g),t.tagToQueryMap.set(g,f)}const d=bo(t.pendingWriteTree_,i);let c=BC(l,e,n,d,s,a);if(!u&&!o&&!r){const f=xg(l,e);c=c.concat(iE(t,e,f))}return c}function dc(t,e,n){const i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,l)=>{const a=Te(o,e),u=Zt(l,a);if(u)return u});return yg(i,e,s,n,!0)}function eE(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(u,d)=>{const c=Te(u,n);r=r||Zt(d,c)});let i=t.syncPointTree_.get(n);i?r=r||Zt(i,U()):(i=new Sg,t.syncPointTree_=t.syncPointTree_.set(n,i));const s=r!=null,o=s?new sn(r,!0,!1):null,l=bo(t.pendingWriteTree_,e._path),a=Ig(i,e,l,s?o.getNode():D.EMPTY_NODE,s);return jC(a)}function Wi(t,e){return Pg(e,t.syncPointTree_,null,bo(t.pendingWriteTree_,U()))}function Pg(t,e,n,r){if(b(t.path))return Dg(t,e,n,r);{const i=e.get(U());n==null&&i!=null&&(n=Zt(i,U()));let s=[];const o=M(t.path),l=t.operationForChild(o),a=e.children.get(o);if(a&&l){const u=n?n.getImmediateChild(o):null,d=_g(r,o);s=s.concat(Pg(l,a,u,d))}return i&&(s=s.concat(cc(i,t,r,n))),s}}function Dg(t,e,n,r){const i=e.get(U());n==null&&i!=null&&(n=Zt(i,U()));let s=[];return e.children.inorderTraversal((o,l)=>{const a=n?n.getImmediateChild(o):null,u=_g(r,o),d=t.operationForChild(o);d&&(s=s.concat(Dg(d,l,a,u)))}),i&&(s=s.concat(cc(i,t,r,n))),s}function Ag(t,e){const n=e.query,r=Ai(t,n);return{hashFn:()=>(bC(e)||D.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?JC(t,n._path,r):XC(t,n._path);{const s=e1(i,n);return fo(t,n,null,s)}}}}function Ai(t,e){const n=zo(e);return t.queryToTagMap.get(n)}function zo(t){return t._path.toString()+"$"+t._queryIdentifier}function fc(t,e){return t.tagToQueryMap.get(e)}function hc(t){const e=t.indexOf("$");return I(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new V(t.substr(0,e))}}function pc(t,e,n){const r=t.syncPointTree_.get(e);I(r,"Missing sync point for query tag that we're tracking");const i=bo(t.pendingWriteTree_,e);return cc(r,n,i,null)}function tE(t){return t.fold((e,n,r)=>{if(n&&on(n))return[jo(n)];{let i=[];return n&&(i=Tg(n)),be(r,(s,o)=>{i=i.concat(o)}),i}})}function ii(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(KC())(t._repo,t._path):t}function nE(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const i=zo(r),s=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(s)}}}function rE(){return YC++}function iE(t,e,n){const r=e._path,i=Ai(t,e),s=Ag(t,n),o=t.listenProvider_.startListening(ii(e),i,s.hashFn,s.onComplete),l=t.syncPointTree_.subtree(r);if(i)I(!on(l.value),"If we're adding a query, it shouldn't be shadowed");else{const a=l.fold((u,d,c)=>{if(!b(u)&&d&&on(d))return[jo(d).query];{let f=[];return d&&(f=f.concat(Tg(d).map(g=>g.query))),be(c,(g,y)=>{f=f.concat(y)}),f}});for(let u=0;u<a.length;++u){const d=a[u];t.listenProvider_.stopListening(ii(d),Ai(t,d))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new mc(n)}node(){return this.node_}}class gc{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=ae(this.path_,e);return new gc(this.syncTree_,n)}node(){return dc(this.syncTree_,this.path_)}}const sE=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},Of=function(t,e,n){if(!t||typeof t!="object")return t;if(I(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return oE(t[".sv"],e,n);if(typeof t[".sv"]=="object")return lE(t[".sv"],e);I(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},oE=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:I(!1,"Unexpected server value: "+t)}},lE=function(t,e,n){t.hasOwnProperty("increment")||I(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&I(!1,"Unexpected increment value: "+r);const i=e.node();if(I(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return typeof o!="number"?r:o+r},aE=function(t,e,n,r){return yc(e,new gc(n,t),r)},Og=function(t,e,n){return yc(t,new mc(e),n)};function yc(t,e,n){const r=t.getPriority().val(),i=Of(r,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const o=t,l=Of(o.getValue(),e,n);return l!==o.getValue()||i!==o.getPriority().val()?new de(l,pe(i)):t}else{const o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new de(i))),o.forEachChild(ne,(l,a)=>{const u=yc(a,e.getImmediateChild(l),n);u!==a&&(s=s.updateImmediateChild(l,u))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function vc(t,e){let n=e instanceof V?e:new V(e),r=t,i=M(n);for(;i!==null;){const s=_r(r.node.children,i)||{children:{},childCount:0};r=new _c(i,r,s),n=G(n),i=M(n)}return r}function Rr(t){return t.node.value}function Lg(t,e){t.node.value=e,Ka(t)}function Mg(t){return t.node.childCount>0}function uE(t){return Rr(t)===void 0&&!Mg(t)}function Uo(t,e){be(t.node.children,(n,r)=>{e(new _c(n,t,r))})}function Fg(t,e,n,r){n&&!r&&e(t),Uo(t,i=>{Fg(i,e,!0,r)}),n&&r&&e(t)}function cE(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Vi(t){return new V(t.parent===null?t.name:Vi(t.parent)+"/"+t.name)}function Ka(t){t.parent!==null&&dE(t.parent,t.name,t)}function dE(t,e,n){const r=uE(n),i=Lt(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,Ka(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,Ka(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fE=/[\[\].#$\/\u0000-\u001F\u007F]/,hE=/[\[\].#$\u0000-\u001F\u007F]/,Ll=10*1024*1024,bg=function(t){return typeof t=="string"&&t.length!==0&&!fE.test(t)},jg=function(t){return typeof t=="string"&&t.length!==0&&!hE.test(t)},pE=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),jg(t)},mE=function(t,e,n,r){r&&e===void 0||wc(Qu(t,"value"),e,n)},wc=function(t,e,n){const r=n instanceof V?new O1(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+gn(r));if(typeof e=="function")throw new Error(t+"contains a function "+gn(r)+" with contents = "+e.toString());if(Mm(e))throw new Error(t+"contains "+e.toString()+" "+gn(r));if(typeof e=="string"&&e.length>Ll/3&&Lo(e)>Ll)throw new Error(t+"contains a string greater than "+Ll+" utf8 bytes "+gn(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(be(e,(o,l)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!bg(o)))throw new Error(t+" contains an invalid key ("+o+") "+gn(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);L1(r,o),wc(t,l,r),M1(r)}),i&&s)throw new Error(t+' contains ".value" child '+gn(r)+" in addition to actual children.")}},zg=function(t,e,n,r){if(!(r&&n===void 0)&&!jg(n))throw new Error(Qu(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},gE=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),zg(t,e,n,r)},yE=function(t,e){if(M(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},_E=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!bg(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!pE(n))throw new Error(Qu(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vE{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Cc(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();n!==null&&!ec(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function Ug(t,e,n){Cc(t,n),Hg(t,r=>ec(r,e))}function yt(t,e,n){Cc(t,n),Hg(t,r=>rt(r,e)||rt(e,r))}function Hg(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];if(i){const s=i.path;e(s)?(wE(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function wE(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();Tn&&Ee("event: "+n.toString()),Nr(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CE="repo_interrupt",EE=25;class SE{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new vE,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=ro(),this.transactionQueueTree_=new _c,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function IE(t,e,n){if(t.stats_=Ju(t.repoInfo_),t.forceRestClient_||i1())t.server_=new no(t.repoInfo_,(r,i,s,o)=>{Lf(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>Mf(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{le(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new xt(t.repoInfo_,e,(r,i,s,o)=>{Lf(t,r,i,s,o)},r=>{Mf(t,r)},r=>{xE(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=u1(t.repoInfo_,()=>new lC(t.stats_,t.server_)),t.infoData_=new nC,t.infoSyncTree_=new Af({startListening:(r,i,s,o)=>{let l=[];const a=t.infoData_.getNode(r._path);return a.isEmpty()||(l=$i(t.infoSyncTree_,r._path,a),setTimeout(()=>{o("ok")},0)),l},stopListening:()=>{}}),Sc(t,"connected",!1),t.serverSyncTree_=new Af({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(l,a)=>{const u=o(l,a);yt(t.eventQueue_,r._path,u)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function TE(t){const n=t.infoData_.getNode(new V(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function Ec(t){return sE({timestamp:TE(t)})}function Lf(t,e,n,r,i){t.dataUpdateCount++;const s=new V(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){const a=qs(n,u=>pe(u));o=ZC(t.serverSyncTree_,s,a,i)}else{const a=pe(n);o=Rg(t.serverSyncTree_,s,a,i)}else if(r){const a=qs(n,u=>pe(u));o=qC(t.serverSyncTree_,s,a)}else{const a=pe(n);o=$i(t.serverSyncTree_,s,a)}let l=s;o.length>0&&(l=$o(t,s)),yt(t.eventQueue_,l,o)}function Mf(t,e){Sc(t,"connected",e),e===!1&&RE(t)}function xE(t,e){be(e,(n,r)=>{Sc(t,n,r)})}function Sc(t,e,n){const r=new V("/.info/"+e),i=pe(n);t.infoData_.updateSnapshot(r,i);const s=$i(t.infoSyncTree_,r,i);yt(t.eventQueue_,r,s)}function $g(t){return t.nextWriteId_++}function kE(t,e,n){const r=eE(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(i=>{const s=pe(i).withIndex(e._queryParams.getIndex());Qa(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=$i(t.serverSyncTree_,e._path,s);else{const l=Ai(t.serverSyncTree_,e);o=Rg(t.serverSyncTree_,e._path,s,l)}return yt(t.eventQueue_,e._path,o),fo(t.serverSyncTree_,e,n,null,!0),s},i=>(Ho(t,"get for query "+le(e)+" failed: "+i),Promise.reject(new Error(i))))}function NE(t,e,n,r,i){Ho(t,"set",{path:e.toString(),value:n,priority:r});const s=Ec(t),o=pe(n,r),l=dc(t.serverSyncTree_,e),a=Og(o,l,s),u=$g(t),d=Ng(t.serverSyncTree_,e,a,u,!0);Cc(t.eventQueue_,d),t.server_.put(e.toString(),o.val(!0),(f,g)=>{const y=f==="ok";y||Me("set at "+e+" failed: "+f);const _=Cn(t.serverSyncTree_,u,!y);yt(t.eventQueue_,e,_),AE(t,i,f,g)});const c=Qg(t,e);$o(t,c),yt(t.eventQueue_,c,[])}function RE(t){Ho(t,"onDisconnectEvents");const e=Ec(t),n=ro();$a(t.onDisconnect_,U(),(i,s)=>{const o=aE(i,s,t.serverSyncTree_,e);fg(n,i,o)});let r=[];$a(n,U(),(i,s)=>{r=r.concat($i(t.serverSyncTree_,i,s));const o=Qg(t,i);$o(t,o)}),t.onDisconnect_=ro(),yt(t.eventQueue_,U(),r)}function PE(t,e,n){let r;M(e._path)===".info"?r=Qa(t.infoSyncTree_,e,n):r=Qa(t.serverSyncTree_,e,n),Ug(t.eventQueue_,e._path,r)}function Ff(t,e,n){let r;M(e._path)===".info"?r=fo(t.infoSyncTree_,e,n):r=fo(t.serverSyncTree_,e,n),Ug(t.eventQueue_,e._path,r)}function DE(t){t.persistentConnection_&&t.persistentConnection_.interrupt(CE)}function Ho(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Ee(n,...e)}function AE(t,e,n,r){e&&Nr(()=>{if(n==="ok")e(null);else{const i=(n||"error").toUpperCase();let s=i;r&&(s+=": "+r);const o=new Error(s);o.code=i,e(o)}})}function Wg(t,e,n){return dc(t.serverSyncTree_,e,n)||D.EMPTY_NODE}function Ic(t,e=t.transactionQueueTree_){if(e||Wo(t,e),Rr(e)){const n=Bg(t,e);I(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&OE(t,Vi(e),n)}else Mg(e)&&Uo(e,n=>{Ic(t,n)})}function OE(t,e,n){const r=n.map(u=>u.currentWriteId),i=Wg(t,e,r);let s=i;const o=i.hash();for(let u=0;u<n.length;u++){const d=n[u];I(d.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),d.status=1,d.retryCount++;const c=Te(e,d.path);s=s.updateChild(c,d.currentOutputSnapshotRaw)}const l=s.val(!0),a=e;t.server_.put(a.toString(),l,u=>{Ho(t,"transaction put response",{path:a.toString(),status:u});let d=[];if(u==="ok"){const c=[];for(let f=0;f<n.length;f++)n[f].status=2,d=d.concat(Cn(t.serverSyncTree_,n[f].currentWriteId)),n[f].onComplete&&c.push(()=>n[f].onComplete(null,!0,n[f].currentOutputSnapshotResolved)),n[f].unwatcher();Wo(t,vc(t.transactionQueueTree_,e)),Ic(t,t.transactionQueueTree_),yt(t.eventQueue_,e,d);for(let f=0;f<c.length;f++)Nr(c[f])}else{if(u==="datastale")for(let c=0;c<n.length;c++)n[c].status===3?n[c].status=4:n[c].status=0;else{Me("transaction at "+a.toString()+" failed: "+u);for(let c=0;c<n.length;c++)n[c].status=4,n[c].abortReason=u}$o(t,e)}},o)}function $o(t,e){const n=Vg(t,e),r=Vi(n),i=Bg(t,n);return LE(t,i,r),r}function LE(t,e,n){if(e.length===0)return;const r=[];let i=[];const o=e.filter(l=>l.status===0).map(l=>l.currentWriteId);for(let l=0;l<e.length;l++){const a=e[l],u=Te(n,a.path);let d=!1,c;if(I(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),a.status===4)d=!0,c=a.abortReason,i=i.concat(Cn(t.serverSyncTree_,a.currentWriteId,!0));else if(a.status===0)if(a.retryCount>=EE)d=!0,c="maxretry",i=i.concat(Cn(t.serverSyncTree_,a.currentWriteId,!0));else{const f=Wg(t,a.path,o);a.currentInputSnapshot=f;const g=e[l].update(f.val());if(g!==void 0){wc("transaction failed: Data returned ",g,a.path);let y=pe(g);typeof g=="object"&&g!=null&&Lt(g,".priority")||(y=y.updatePriority(f.getPriority()));const S=a.currentWriteId,p=Ec(t),h=Og(y,f,p);a.currentOutputSnapshotRaw=y,a.currentOutputSnapshotResolved=h,a.currentWriteId=$g(t),o.splice(o.indexOf(S),1),i=i.concat(Ng(t.serverSyncTree_,a.path,h,a.currentWriteId,a.applyLocally)),i=i.concat(Cn(t.serverSyncTree_,S,!0))}else d=!0,c="nodata",i=i.concat(Cn(t.serverSyncTree_,a.currentWriteId,!0))}yt(t.eventQueue_,n,i),i=[],d&&(e[l].status=2,function(f){setTimeout(f,Math.floor(0))}(e[l].unwatcher),e[l].onComplete&&(c==="nodata"?r.push(()=>e[l].onComplete(null,!1,e[l].currentInputSnapshot)):r.push(()=>e[l].onComplete(new Error(c),!1,null))))}Wo(t,t.transactionQueueTree_);for(let l=0;l<r.length;l++)Nr(r[l]);Ic(t,t.transactionQueueTree_)}function Vg(t,e){let n,r=t.transactionQueueTree_;for(n=M(e);n!==null&&Rr(r)===void 0;)r=vc(r,n),e=G(e),n=M(e);return r}function Bg(t,e){const n=[];return Gg(t,e,n),n.sort((r,i)=>r.order-i.order),n}function Gg(t,e,n){const r=Rr(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);Uo(e,i=>{Gg(t,i,n)})}function Wo(t,e){const n=Rr(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,Lg(e,n.length>0?n:void 0)}Uo(e,r=>{Wo(t,r)})}function Qg(t,e){const n=Vi(Vg(t,e)),r=vc(t.transactionQueueTree_,e);return cE(r,i=>{Ml(t,i)}),Ml(t,r),Fg(r,i=>{Ml(t,i)}),n}function Ml(t,e){const n=Rr(e);if(n){const r=[];let i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(I(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(I(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(Cn(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?Lg(e,void 0):n.length=s+1,yt(t.eventQueue_,Vi(e),i);for(let o=0;o<r.length;o++)Nr(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ME(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function FE(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Me(`Invalid query segment '${n}' in query '${t}'`)}return e}const bf=function(t,e){const n=bE(t),r=n.namespace;n.domain==="firebase.com"&&At(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&At("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||Yw();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Qm(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new V(n.pathString)}},bE=function(t){let e="",n="",r="",i="",s="",o=!0,l="https",a=443;if(typeof t=="string"){let u=t.indexOf("//");u>=0&&(l=t.substring(0,u-1),t=t.substring(u+2));let d=t.indexOf("/");d===-1&&(d=t.length);let c=t.indexOf("?");c===-1&&(c=t.length),e=t.substring(0,Math.min(d,c)),d<c&&(i=ME(t.substring(d,c)));const f=FE(t.substring(Math.min(t.length,c)));u=e.indexOf(":"),u>=0?(o=l==="https"||l==="wss",a=parseInt(e.substring(u+1),10)):u=e.length;const g=e.slice(0,u);if(g.toLowerCase()==="localhost")n="localhost";else if(g.split(".").length<=2)n=g;else{const y=e.indexOf(".");r=e.substring(0,y).toLowerCase(),n=e.substring(y+1),s=r}"ns"in f&&(s=f.ns)}return{host:e,port:a,domain:n,subdomain:r,secure:o,scheme:l,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kg{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+le(this.snapshot.exportVal())}}class Yg{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qg{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return I(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return b(this._path)?null:ng(this._path)}get ref(){return new _t(this._repo,this._path)}get _queryIdentifier(){const e=Cf(this._queryParams),n=qu(e);return n==="{}"?"default":n}get _queryObject(){return Cf(this._queryParams)}isEqual(e){if(e=cn(e),!(e instanceof Tc))return!1;const n=this._repo===e._repo,r=ec(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+A1(this._path)}}class _t extends Tc{constructor(e,n){super(e,n,new ic,!1)}get parent(){const e=ig(this._path);return e===null?null:new _t(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Er{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new V(e),r=ho(this.ref,e);return new Er(this._node.getChild(n),r,ne)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new Er(i,ho(this.ref,r),ne)))}hasChild(e){const n=new V(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function xc(t,e){return t=cn(t),t._checkNotDeleted("ref"),e!==void 0?ho(t._root,e):t._root}function ho(t,e){return t=cn(t),M(t._path)===null?gE("child","path",e,!1):zg("child","path",e,!1),new _t(t._repo,ae(t._path,e))}function Xg(t,e){t=cn(t),yE("set",t._path),mE("set",e,t._path,!1);const n=new Ao;return NE(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function Jg(t){t=cn(t);const e=new qg(()=>{}),n=new Vo(e);return kE(t._repo,t,n).then(r=>new Er(r,new _t(t._repo,t._path),t._queryParams.getIndex()))}class Vo{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new Kg("value",this,new Er(e.snapshotNode,new _t(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new Yg(this,e,n):null}matches(e){return e instanceof Vo?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class kc{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new Yg(this,e,n):null}createEvent(e,n){I(e.childName!=null,"Child events should have a childName.");const r=ho(new _t(n._repo,n._path),e.childName),i=n._queryParams.getIndex();return new Kg(e.type,this,new Er(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof kc?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function jE(t,e,n,r,i){let s;if(typeof r=="object"&&(s=void 0,i=r),typeof r=="function"&&(s=r),i&&i.onlyOnce){const a=n,u=(d,c)=>{Ff(t._repo,t,l),a(d,c)};u.userCallback=n.userCallback,u.context=n.context,n=u}const o=new qg(n,s||void 0),l=e==="value"?new Vo(o):new kc(e,o);return PE(t._repo,t,l),()=>Ff(t._repo,t,l)}function zE(t,e,n,r){return jE(t,"value",e,n,r)}$C(_t);QC(_t);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UE="FIREBASE_DATABASE_EMULATOR_HOST",Ya={};let HE=!1;function $E(t,e,n,r){t.repoInfo_=new Qm(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function WE(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||At("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ee("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=bf(s,i),l=o.repoInfo,a,u;typeof process<"u"&&nf&&(u=nf[UE]),u?(a=!0,s=`http://${u}?ns=${l.namespace}`,o=bf(s,i),l=o.repoInfo):a=!o.repoInfo.secure;const d=i&&a?new ur(ur.OWNER):new o1(t.name,t.options,e);_E("Invalid Firebase Database URL",o),b(o.path)||At("Database URL must point to the root of a Firebase Database (not including a child path).");const c=BE(l,t,d,new s1(t.name,n));return new GE(c,t)}function VE(t,e){const n=Ya[e];(!n||n[t.key]!==t)&&At(`Database ${e}(${t.repoInfo_}) has already been deleted.`),DE(t),delete n[t.key]}function BE(t,e,n,r){let i=Ya[e.name];i||(i={},Ya[e.name]=i);let s=i[t.toURLString()];return s&&At("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new SE(t,HE,n,r),i[t.toURLString()]=s,s}class GE{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(IE(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new _t(this._repo,U())),this._rootInternal}_delete(){return this._rootInternal!==null&&(VE(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&At("Cannot call "+e+" on a deleted database.")}}function Nc(t=Rm(),e){const n=ji(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=w0("database");r&&QE(n,...r)}return n}function QE(t,e,n,r={}){t=cn(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&At("Cannot call useEmulator() after instance has already been initialized.");const i=t._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&At('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new ur(ur.OWNER);else if(r.mockUserToken){const o=typeof r.mockUserToken=="string"?r.mockUserToken:C0(r.mockUserToken,t.app.options.projectId);s=new ur(o)}$E(i,e,n,s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KE(t){Vw(Lw),nn(new Dt("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return WE(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),gt(rf,sf,t),gt(rf,sf,"esm2017")}xt.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};xt.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};KE();var YE="firebase",qE="10.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gt(YE,qE,"app");const Zg="@firebase/installations",Rc="0.6.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ey=1e4,ty=`w:${Rc}`,ny="FIS_v2",XE="https://firebaseinstallations.googleapis.com/v1",JE=60*60*1e3,ZE="installations",eS="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tS={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Mn=new Oo(ZE,eS,tS);function ry(t){return t instanceof zn&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iy({projectId:t}){return`${XE}/projects/${t}/installations`}function sy(t){return{token:t.token,requestStatus:2,expiresIn:rS(t.expiresIn),creationTime:Date.now()}}async function oy(t,e){const r=(await e.json()).error;return Mn.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function ly({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function nS(t,{refreshToken:e}){const n=ly(t);return n.append("Authorization",iS(e)),n}async function ay(t){const e=await t();return e.status>=500&&e.status<600?t():e}function rS(t){return Number(t.replace("s","000"))}function iS(t){return`${ny} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sS({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=iy(t),i=ly(t),s=e.getImmediate({optional:!0});if(s){const u=await s.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const o={fid:n,authVersion:ny,appId:t.appId,sdkVersion:ty},l={method:"POST",headers:i,body:JSON.stringify(o)},a=await ay(()=>fetch(r,l));if(a.ok){const u=await a.json();return{fid:u.fid||n,registrationStatus:2,refreshToken:u.refreshToken,authToken:sy(u.authToken)}}else throw await oy("Create Installation",a)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uy(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oS(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lS=/^[cdef][\w-]{21}$/,qa="";function aS(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=uS(t);return lS.test(n)?n:qa}catch{return qa}}function uS(t){return oS(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bo(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cy=new Map;function dy(t,e){const n=Bo(t);fy(n,e),cS(n,e)}function fy(t,e){const n=cy.get(t);if(n)for(const r of n)r(e)}function cS(t,e){const n=dS();n&&n.postMessage({key:t,fid:e}),fS()}let En=null;function dS(){return!En&&"BroadcastChannel"in self&&(En=new BroadcastChannel("[Firebase] FID Change"),En.onmessage=t=>{fy(t.data.key,t.data.fid)}),En}function fS(){cy.size===0&&En&&(En.close(),En=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hS="firebase-installations-database",pS=1,Fn="firebase-installations-store";let Fl=null;function Pc(){return Fl||(Fl=km(hS,pS,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Fn)}}})),Fl}async function po(t,e){const n=Bo(t),i=(await Pc()).transaction(Fn,"readwrite"),s=i.objectStore(Fn),o=await s.get(n);return await s.put(e,n),await i.done,(!o||o.fid!==e.fid)&&dy(t,e.fid),e}async function hy(t){const e=Bo(t),r=(await Pc()).transaction(Fn,"readwrite");await r.objectStore(Fn).delete(e),await r.done}async function Go(t,e){const n=Bo(t),i=(await Pc()).transaction(Fn,"readwrite"),s=i.objectStore(Fn),o=await s.get(n),l=e(o);return l===void 0?await s.delete(n):await s.put(l,n),await i.done,l&&(!o||o.fid!==l.fid)&&dy(t,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dc(t){let e;const n=await Go(t.appConfig,r=>{const i=mS(r),s=gS(t,i);return e=s.registrationPromise,s.installationEntry});return n.fid===qa?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function mS(t){const e=t||{fid:aS(),registrationStatus:0};return py(e)}function gS(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(Mn.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=yS(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:_S(t)}:{installationEntry:e}}async function yS(t,e){try{const n=await sS(t,e);return po(t.appConfig,n)}catch(n){throw ry(n)&&n.customData.serverCode===409?await hy(t.appConfig):await po(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function _S(t){let e=await jf(t.appConfig);for(;e.registrationStatus===1;)await uy(100),e=await jf(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await Dc(t);return r||n}return e}function jf(t){return Go(t,e=>{if(!e)throw Mn.create("installation-not-found");return py(e)})}function py(t){return vS(t)?{fid:t.fid,registrationStatus:0}:t}function vS(t){return t.registrationStatus===1&&t.registrationTime+ey<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wS({appConfig:t,heartbeatServiceProvider:e},n){const r=CS(t,n),i=nS(t,n),s=e.getImmediate({optional:!0});if(s){const u=await s.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const o={installation:{sdkVersion:ty,appId:t.appId}},l={method:"POST",headers:i,body:JSON.stringify(o)},a=await ay(()=>fetch(r,l));if(a.ok){const u=await a.json();return sy(u)}else throw await oy("Generate Auth Token",a)}function CS(t,{fid:e}){return`${iy(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ac(t,e=!1){let n;const r=await Go(t.appConfig,s=>{if(!my(s))throw Mn.create("not-registered");const o=s.authToken;if(!e&&IS(o))return s;if(o.requestStatus===1)return n=ES(t,e),s;{if(!navigator.onLine)throw Mn.create("app-offline");const l=xS(s);return n=SS(t,l),l}});return n?await n:r.authToken}async function ES(t,e){let n=await zf(t.appConfig);for(;n.authToken.requestStatus===1;)await uy(100),n=await zf(t.appConfig);const r=n.authToken;return r.requestStatus===0?Ac(t,e):r}function zf(t){return Go(t,e=>{if(!my(e))throw Mn.create("not-registered");const n=e.authToken;return kS(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function SS(t,e){try{const n=await wS(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await po(t.appConfig,r),n}catch(n){if(ry(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await hy(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await po(t.appConfig,r)}throw n}}function my(t){return t!==void 0&&t.registrationStatus===2}function IS(t){return t.requestStatus===2&&!TS(t)}function TS(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+JE}function xS(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function kS(t){return t.requestStatus===1&&t.requestTime+ey<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NS(t){const e=t,{installationEntry:n,registrationPromise:r}=await Dc(e);return r?r.catch(console.error):Ac(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RS(t,e=!1){const n=t;return await PS(n),(await Ac(n,e)).token}async function PS(t){const{registrationPromise:e}=await Dc(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DS(t){if(!t||!t.options)throw bl("App Configuration");if(!t.name)throw bl("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw bl(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function bl(t){return Mn.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gy="installations",AS="installations-internal",OS=t=>{const e=t.getProvider("app").getImmediate(),n=DS(e),r=ji(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},LS=t=>{const e=t.getProvider("app").getImmediate(),n=ji(e,gy).getImmediate();return{getId:()=>NS(n),getToken:i=>RS(n,i)}};function MS(){nn(new Dt(gy,OS,"PUBLIC")),nn(new Dt(AS,LS,"PRIVATE"))}MS();gt(Zg,Rc);gt(Zg,Rc,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mo="analytics",FS="firebase_id",bS="origin",jS=60*1e3,zS="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Oc="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fe=new Ku("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const US={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},He=new Oo("analytics","Analytics",US);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HS(t){if(!t.startsWith(Oc)){const e=He.create("invalid-gtag-resource",{gtagURL:t});return Fe.warn(e.message),""}return t}function yy(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function $S(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function WS(t,e){const n=$S("firebase-js-sdk-policy",{createScriptURL:HS}),r=document.createElement("script"),i=`${Oc}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function VS(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function BS(t,e,n,r,i,s){const o=r[i];try{if(o)await e[o];else{const a=(await yy(n)).find(u=>u.measurementId===i);a&&await e[a.appId]}}catch(l){Fe.error(l)}t("config",i,s)}async function GS(t,e,n,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const l=await yy(n);for(const a of o){const u=l.find(c=>c.measurementId===a),d=u&&e[u.appId];if(d)s.push(d);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),t("event",r,i||{})}catch(s){Fe.error(s)}}function QS(t,e,n,r){async function i(s,...o){try{if(s==="event"){const[l,a]=o;await GS(t,e,n,l,a)}else if(s==="config"){const[l,a]=o;await BS(t,e,n,r,l,a)}else if(s==="consent"){const[l]=o;t("consent","update",l)}else if(s==="get"){const[l,a,u]=o;t("get",l,a,u)}else if(s==="set"){const[l]=o;t("set",l)}else t(s,...o)}catch(l){Fe.error(l)}}return i}function KS(t,e,n,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=QS(s,t,e,n),{gtagCore:s,wrappedGtag:window[i]}}function YS(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Oc)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qS=30,XS=1e3;class JS{constructor(e={},n=XS){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const _y=new JS;function ZS(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function eI(t){var e;const{appId:n,apiKey:r}=t,i={method:"GET",headers:ZS(r)},s=zS.replace("{app-id}",n),o=await fetch(s,i);if(o.status!==200&&o.status!==304){let l="";try{const a=await o.json();!((e=a.error)===null||e===void 0)&&e.message&&(l=a.error.message)}catch{}throw He.create("config-fetch-failed",{httpStatus:o.status,responseMessage:l})}return o.json()}async function tI(t,e=_y,n){const{appId:r,apiKey:i,measurementId:s}=t.options;if(!r)throw He.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw He.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new iI;return setTimeout(async()=>{l.abort()},n!==void 0?n:jS),vy({appId:r,apiKey:i,measurementId:s},o,l,e)}async function vy(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=_y){var s;const{appId:o,measurementId:l}=t;try{await nI(r,e)}catch(a){if(l)return Fe.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${a==null?void 0:a.message}]`),{appId:o,measurementId:l};throw a}try{const a=await eI(t);return i.deleteThrottleMetadata(o),a}catch(a){const u=a;if(!rI(u)){if(i.deleteThrottleMetadata(o),l)return Fe.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:o,measurementId:l};throw a}const d=Number((s=u==null?void 0:u.customData)===null||s===void 0?void 0:s.httpStatus)===503?Qd(n,i.intervalMillis,qS):Qd(n,i.intervalMillis),c={throttleEndTimeMillis:Date.now()+d,backoffCount:n+1};return i.setThrottleMetadata(o,c),Fe.debug(`Calling attemptFetch again in ${d} millis`),vy(t,c,r,i)}}function nI(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(He.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function rI(t){if(!(t instanceof zn)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class iI{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function sI(t,e,n,r,i){if(i&&i.global){t("event",n,r);return}else{const s=await e,o=Object.assign(Object.assign({},r),{send_to:s});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oI(){if(Em())try{await Sm()}catch(t){return Fe.warn(He.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Fe.warn(He.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function lI(t,e,n,r,i,s,o){var l;const a=tI(t);a.then(g=>{n[g.measurementId]=g.appId,t.options.measurementId&&g.measurementId!==t.options.measurementId&&Fe.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${g.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(g=>Fe.error(g)),e.push(a);const u=oI().then(g=>{if(g)return r.getId()}),[d,c]=await Promise.all([a,u]);YS(s)||WS(s,d.measurementId),i("js",new Date);const f=(l=o==null?void 0:o.config)!==null&&l!==void 0?l:{};return f[bS]="firebase",f.update=!0,c!=null&&(f[FS]=c),i("config",d.measurementId,f),d.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(e){this.app=e}_delete(){return delete si[this.app.options.appId],Promise.resolve()}}let si={},Uf=[];const Hf={};let jl="dataLayer",uI="gtag",$f,wy,Wf=!1;function cI(){const t=[];if(S0()&&t.push("This is a browser extension environment."),T0()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=He.create("invalid-analytics-context",{errorInfo:e});Fe.warn(n.message)}}function dI(t,e,n){cI();const r=t.options.appId;if(!r)throw He.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Fe.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw He.create("no-api-key");if(si[r]!=null)throw He.create("already-exists",{id:r});if(!Wf){VS(jl);const{wrappedGtag:s,gtagCore:o}=KS(si,Uf,Hf,jl,uI);wy=s,$f=o,Wf=!0}return si[r]=lI(t,Uf,Hf,e,$f,jl,n),new aI(t)}function fI(t=Rm()){t=cn(t);const e=ji(t,mo);return e.isInitialized()?e.getImmediate():hI(t)}function hI(t,e={}){const n=ji(t,mo);if(n.isInitialized()){const i=n.getImmediate();if(Xs(e,n.getOptions()))return i;throw He.create("already-initialized")}return n.initialize({options:e})}function pI(t,e,n,r){t=cn(t),sI(wy,si[t.app.options.appId],e,n,r).catch(i=>Fe.error(i))}const Vf="@firebase/analytics",Bf="0.10.3";function mI(){nn(new Dt(mo,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return dI(r,i,n)},"PUBLIC")),nn(new Dt("analytics-internal",t,"PRIVATE")),gt(Vf,Bf),gt(Vf,Bf,"esm2017");function t(e){try{const n=e.getProvider(mo).getImmediate();return{logEvent:(r,i,s)=>pI(n,r,i,s)}}catch(n){throw He.create("interop-component-reg-failed",{reason:n})}}}mI();const gI={apiKey:"AIzaSyBRqtCuq9ts7KqT-NS3_akHjZQoiiuf2X4",authDomain:"triominoes-7043f.firebaseapp.com",databaseURL:"https://triominoes-7043f-default-rtdb.firebaseio.com",projectId:"triominoes-7043f",storageBucket:"triominoes-7043f.appspot.com",messagingSenderId:"824630932052",appId:"1:824630932052:web:9cf65f50a6c9280f6b33c1",measurementId:"G-QDV767XXJE"},Qo=Nm(gI);fI(Qo);function Cy(t){var e,n;return{...t,gameHistory:{...t.gameHistory,startingDeck:((e=t.gameHistory)==null?void 0:e.startingDeck)??[],actions:((n=t.gameHistory)==null?void 0:n.actions)??[]},players:t.players??[]}}function Ko(t){const e=Nc(Qo),n=xc(e,`games/${t.gameID}`);Xg(n,t)}async function Ey(t){const e=Nc(Qo),n=xc(e,`games/${t}`),r=await Jg(n);return r.exists()?Cy(r.val()):null}async function Sy(t,e){const n=Nc(Qo),r=xc(n,`games/${t.gameID}`);(await Jg(r)).exists()||await Xg(r,t),zE(r,s=>{e(Cy(s.val()))})}function Iy(t){const e=[t.orientation==="up"?"tile-container":"tile-container-inverted",t.tileStyle?t.tileStyle:""];return w.jsx("div",{className:e.join(" "),style:t.style,onClick:t.onClick,draggable:t.draggable,onDragStart:t.onDragStart,onDragOver:t.onDragOver,onDrop:t.onDrop,children:t.orientation==="up"?w.jsxs(w.Fragment,{children:[w.jsx("span",{className:"number bottom-left",children:t.bottom[0]}),w.jsx("span",{className:"number bottom-right",children:t.bottom[1]}),w.jsx("span",{className:"number top-center",children:t.top[0]})]}):w.jsxs(w.Fragment,{children:[w.jsx("span",{className:"number top-left",children:t.top[0]}),w.jsx("span",{className:"number top-right",children:t.top[1]}),w.jsx("span",{className:"number bottom-center",children:t.bottom[0]})]})})}function yI(t){const e=[t.newTile.numbers[0]],n=[t.newTile.numbers[2],t.newTile.numbers[1]];function r(){t.onClick()}function i(s){s.dataTransfer.setData("text/plain",JSON.stringify(t.newTile)),t.setTileInHand(t.newTile)}return w.jsx(Iy,{top:e,bottom:n,orientation:"up",onClick:r,tileStyle:t.isSelected?"selected":"",draggable:!0,onDragStart:i})}function Ty(t){const e=t.gameState.hands[t.playerIndex];function n(r){var i;((i=t.tileInHand)==null?void 0:i.id)===r.id?t.setTileInHand(void 0):t.setTileInHand(r)}return w.jsx("div",{className:"player-hand",children:e.map(r=>{var i;return w.jsx(yI,{newTile:r,gameState:t.gameState,isSelected:r.id===((i=t.tileInHand)==null?void 0:i.id),onClick:()=>n(r),setTileInHand:t.setTileInHand},r.id)})})}function xy(t){const[e,n]=$.useState(!1),r=$.useRef(null),i=()=>{n(!e)};$.useEffect(()=>{s()},[t.gameState]);const s=()=>{r.current&&(r.current.scrollTop=r.current.scrollHeight)};return w.jsxs("div",{className:`game-log ${e?"collapsed":""}`,children:[w.jsxs("h3",{className:"game-log-header",onClick:i,children:["Game Log ",e?"+":"-"]}),!e&&w.jsx("ul",{className:"game-log-entries",ref:r,children:t.gameState.gameLog.map((o,l)=>w.jsx("li",{className:"game-log-entry",children:o},l))})]})}const ky=["player-color-red","player-color-blue","player-color-green","player-color-purple","player-color-brown","player-color-orange"];function Ny(t){return w.jsx("div",{className:"player-scores",children:t.gameState.scores.map((e,n)=>w.jsx("div",{className:`player-score-item ${t.gameState.activePlayer===n?"active":""}`,"data-tiles":t.gameState.hands[n].length,children:w.jsxs("div",{className:"player-score-details",children:[w.jsx("div",{className:"player-active-box",children:t.gameState.activePlayer===n&&w.jsx("img",{src:"./active-player.gif",alt:"Active Player",className:"active-player-gif"})}),w.jsx("div",{className:`player-name ${ky[n]}`,children:t.gameState.playerNames[n]}),w.jsxs("div",{className:"player-score",children:[e," points"]})]})},n))})}function Gf(t){const e=t.placedTile.orientation==="up"?[t.placedTile.topCenter]:[t.placedTile.topLeft,t.placedTile.topRight],n=t.placedTile.orientation==="up"?[t.placedTile.bottomLeft,t.placedTile.bottomRight]:[t.placedTile.bottomCenter];return w.jsx(Iy,{style:t.position,top:e,bottom:n,orientation:t.placedTile.orientation,tileStyle:t.tileStyle,onClick:t.onClick,onDragOver:t.onDragOver,onDrop:t.onDrop})}function Ry(t){const{gameState:e,tileInHand:n,pushAction:r,setTileInHand:i}=t,s=$.useRef(null),[o,l]=$.useState(0),[a,u]=$.useState(0);$.useEffect(()=>{const E=()=>{s.current&&(l(s.current.clientWidth),u(s.current.clientHeight))};return E(),window.addEventListener("resize",E),()=>{window.removeEventListener("resize",E)}},[]);const d=96,c=d*.88,f=Array.from(e.gameBoard.entries()),g=Math.min(...f.map(([E])=>ft(E).x)),y=Math.max(...f.map(([E])=>ft(E).x)),_=Math.min(...f.map(([E])=>ft(E).y)),S=Math.max(...f.map(([E])=>ft(E).y)),p=(y-g+1)*d*.5,h=(S-_+1)*c,m=(o-p)/2,v=(a-h)/2;function x(E){if(n){const W=Il(n,e.gameBoard).find(A=>A.coord.x===E.x&&A.coord.y===E.y);if(W){const A={actionType:"play",playerIndex:e.activePlayer,tilePlayed:W.placedTile,coord:W.coord};r(A),i(void 0)}}}function P(E,R){E.preventDefault();const W=E.dataTransfer.getData("text/plain"),A=JSON.parse(W),vt=Il(A,e.gameBoard).find(ut=>ut.coord.x===R.x&&ut.coord.y===R.y);if(vt){const ut={actionType:"play",playerIndex:e.activePlayer,tilePlayed:vt.placedTile,coord:vt.coord};r(ut),i(void 0)}}return w.jsxs("div",{className:"game-board",ref:s,children:[Array.from(e.gameBoard.entries()).map(([E,R])=>w.jsx(Gf,{coord:ft(E),placedTile:R,tileStyle:T(e.lastPlay)===E?"most-recent":"",onClick:()=>x(ft(E)),position:{left:`${(ft(E).x-g)*d*.5+m}px`,bottom:`${(ft(E).y-_)*c+v}px`}},E)),n?Il(n,e.gameBoard).map(E=>w.jsx(Gf,{coord:E.coord,placedTile:E.placedTile,tileStyle:"playable",onClick:()=>x(E.coord),onDragOver:R=>R.preventDefault(),onDrop:R=>P(R,E.coord),position:{left:`${(E.coord.x-g)*d*.5+m}px`,bottom:`${(E.coord.y-_)*c+v}px`}},T(E.coord))):null]})}const _I={messages:[]},Py=({playerName:t,playerIndex:e})=>{const[n,r]=$.useState(_I),[i,s]=$.useState(""),o=$.useRef(null);$.useEffect(()=>{a()},[n]);const l=()=>{if(i.trim()!==""){const d={player:t,playerIndex:e,content:i.trim()};r(c=>({messages:[...c.messages,d]})),s("")}},a=()=>{o.current&&(o.current.scrollTop=o.current.scrollHeight)},u=d=>{d.key==="Enter"&&l()};return w.jsxs("div",{className:"chat-component",children:[w.jsx("div",{className:"message-container",ref:o,children:n.messages.map((d,c)=>w.jsxs("div",{className:"message",children:[w.jsx("span",{className:`player ${ky[d.playerIndex]}`,children:d.player+": "}),w.jsx("span",{className:"content",children:d.content})]},c))}),w.jsx("div",{className:"input-container",children:w.jsx("input",{type:"text",value:i,onChange:d=>s(d.target.value),onKeyPress:u,placeholder:"Type your message..."})})]})};function vI(t){return new Promise(e=>setTimeout(e,t))}function wI(){const[t,e]=$.useState(!1);async function n(r){await navigator.clipboard.writeText(r),e(!0),await vI(2e3),e(!1)}return{copied:t,copyToClipboard:n}}const CI="_Copy_xykcp_1",EI={Copy:CI};function Dy(t){const{copied:e,copyToClipboard:n}=wI();return w.jsx("div",{className:EI.Copy,style:{cursor:e?"not-allowed":"pointer",fontSize:e?"1rem":"2rem"},onClick:()=>!e&&n("https://adamchawansky.github.io/triominoes/?id="+t.toCopy),children:e?"copied to clipboard!":": "+t.toCopy})}function SI(t){const[e,n]=$.useState(t.initialGameData),[r,i]=$.useState(),[s,o]=$.useState(!1);$.useEffect(()=>{async function m(){await Sy(t.initialGameData,v=>n(v))}m()},[]);const l=e.players.findIndex(m=>m.playerID===t.localPlayerID),a=l!==-1?e.players[l].playerName:"",u=e.gameHistory;function d(m){Ko({...e,gameHistory:m})}const c=Si(u);function f(){const m=e.players.map(x=>x.playerName),v=cm(e.numPlayers,m);d(v),o(!0)}function g(){const m=dm(e.gameHistory);d(m)}function y(){const m={startingDeck:e.gameHistory.startingDeck,actions:e.gameHistory.actions[e.gameHistory.actions.length-1].actionType==="init"?e.gameHistory.actions:e.gameHistory.actions.slice(0,-1)};d(m)}function _(){const m=fm(e.gameHistory);d(m),m.actions[m.actions.length-1].actionType==="end"&&o(!1)}function S(){const m=hm(e.gameHistory);d(m),o(!1)}function p(m){const v={startingDeck:e.gameHistory.startingDeck,actions:e.gameHistory.actions.concat(m)};d(v)}if($.useEffect(()=>{if(s&&c.playerNames[c.activePlayer].startsWith("Computer")){const v=setTimeout(()=>{_()},1e3);return()=>clearTimeout(v)}},[s,u.actions]),c.gameBoard.size===-1)return w.jsx("div",{children:w.jsx("button",{onClick:f,children:"START GAME"})});function h(m){return m.tilesDrawnThisTurn<Bu&&m.drawPile.length>0?"DRAW":"PASS"}return w.jsxs("main",{children:[w.jsxs("div",{className:"left-container",children:[w.jsx(Dy,{toCopy:e.gameID}),w.jsxs("div",{className:"buttons-container",children:[w.jsx("button",{className:"button",onClick:f,children:"RESTART GAME"}),w.jsx("button",{className:"button",onClick:g,children:"RESET GAME"}),w.jsx("button",{className:"button",onClick:y,children:"UNDO"}),w.jsx("button",{className:"button",onClick:_,children:h(c)}),w.jsx("button",{className:"button",onClick:S,children:"SIMULATE!"})]}),w.jsx(Ry,{gameState:c,tileInHand:r,setTileInHand:i,pushAction:p}),w.jsx("div",{className:"bottom-container",children:w.jsx(Ty,{playerIndex:l,gameState:c,tileInHand:r,setTileInHand:i})})]}),w.jsxs("div",{className:"right-container",children:[w.jsx(Ny,{gameState:c}),w.jsx(xy,{gameState:c}),w.jsx(Py,{playerName:a,playerIndex:l})]})]})}const II={gameID:"id"};function TI(t){const[e,n]=$.useState(t.initialGameData),[r,i]=$.useState();$.useEffect(()=>{async function S(){await Sy(t.initialGameData,p=>n(p))}S()},[]);const s=e.players.findIndex(S=>S.playerID===t.localPlayerID),o=s!==-1?e.players[s].playerName:"",l=e.gameHistory;function a(S){Ko({...e,gameHistory:S})}const u=Si(l);function d(){const S=e.players.map(h=>h.playerName),p=cm(e.numPlayers,S);a(p)}function c(){const S=dm(e.gameHistory);a(S)}function f(){const S={startingDeck:e.gameHistory.startingDeck,actions:e.gameHistory.actions[e.gameHistory.actions.length-1].actionType==="init"?e.gameHistory.actions:e.gameHistory.actions.slice(0,-1)};a(S)}function g(){const S=fm(e.gameHistory);a(S)}function y(){const S=hm(e.gameHistory);a(S)}function _(S){const p={startingDeck:e.gameHistory.startingDeck,actions:e.gameHistory.actions.concat(S)};a(p)}return w.jsxs("main",{children:[w.jsxs("div",{className:"left-container",children:[w.jsx(Dy,{toCopy:e.gameID}),w.jsxs("div",{className:"buttons-container",children:[w.jsx("button",{className:"button",onClick:d,children:"RESTART GAME"}),w.jsx("button",{className:"button",onClick:c,children:"RESET GAME"}),w.jsx("button",{className:"button",onClick:f,children:"UNDO"}),w.jsx("button",{className:"button",onClick:g,children:"STEP"}),w.jsx("button",{className:"button",onClick:y,children:"SIMULATE!"})]}),w.jsx(Ry,{gameState:u,tileInHand:r,setTileInHand:i,pushAction:_}),w.jsx("div",{className:"bottom-container",children:w.jsx(Ty,{playerIndex:s,gameState:u,tileInHand:r,setTileInHand:i})})]}),w.jsxs("div",{className:"right-container",children:[w.jsx(Ny,{gameState:u}),w.jsx(xy,{gameState:u}),w.jsx(Py,{playerName:o,playerIndex:s})]})]})}window.fbapi={saveGameData:Ko,getGameData:Ey};function xI(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZ";let e="";for(let n=0;n<6;n++){const r=Math.floor(Math.random()*t.length);e+=t[r]}return e}const fs=new Date().getTime().toString();function kI(){let e=new URLSearchParams(window.location.search).get(II.gameID);const[n,r]=$.useState(),[i,s]=$.useState(""),[o,l]=$.useState(e||""),[a,u]=$.useState("landing"),[d,c]=$.useState(null),f=()=>{u("newGame")},g=()=>{u("joinGame")};e&&(u("joinGame"),l(e));const y=async()=>{if(n&&!isNaN(n)&&i.trim()!==""){const S=xI();l(S),c({gameID:S,numPlayers:n,gameHistory:{startingDeck:[],actions:[{actionType:"add-player",playerName:i}]},players:[{playerID:fs,playerName:i}]}),u("enterRoom")}},_=async()=>{if(o!==""&&i.trim()!==""){const S=await Ey(o);if(S){const p={...S,gameHistory:{startingDeck:[...S.gameHistory.startingDeck],actions:[...S.gameHistory.actions,{actionType:"add-player",playerName:i}]},players:[...S.players,{playerID:fs,playerName:i}]};await Ko(p),c(p),u("enterRoom")}else console.log("Invalid Game ID")}};return a==="landing"?w.jsxs("div",{className:"loading-screen",children:[w.jsx("h1",{children:"Let's play Triominoes!"}),w.jsx("button",{className:"button",onClick:f,children:"Create New Game"}),w.jsx("button",{className:"button",onClick:g,children:"Join a Game"})]}):a==="newGame"?w.jsxs("div",{className:"loading-screen",children:[w.jsx("h2",{children:"Create New Game"}),w.jsxs("label",{children:["Number of Players:",w.jsxs("select",{className:"input-field",value:n,onChange:S=>r(Number(S.target.value)),children:[w.jsx("option",{value:"",children:"Select number of players"}),[...Array(6)].map((S,p)=>w.jsx("option",{value:p+1,children:p+1},p+1))]})]}),w.jsx("br",{}),w.jsxs("label",{children:["Player Name:",w.jsx("input",{className:"input-field",type:"text",value:i,onChange:S=>s(S.target.value),placeholder:"Enter your name"})]}),w.jsx("br",{}),w.jsx("button",{className:"button",onClick:y,children:"Create Room"})]}):a==="joinGame"?w.jsxs("div",{className:"loading-screen",children:[w.jsx("h2",{children:"Join a Game"}),w.jsxs("label",{children:["Game ID:",w.jsx("input",{className:"input-field",type:"text",value:o,onChange:S=>l(S.target.value)})]}),w.jsx("br",{}),w.jsxs("label",{children:["Player Name:",w.jsx("input",{className:"input-field",type:"text",value:i,onChange:S=>s(S.target.value),placeholder:"Enter your name"})]}),w.jsx("br",{}),w.jsx("button",{className:"button",onClick:_,children:"Join Game"})]}):a==="enterRoom"&&d?i==="admin"?w.jsx(TI,{initialGameData:d,localPlayerID:fs}):w.jsx(SI,{initialGameData:d,localPlayerID:fs}):(console.log("Invalid Game Status"),null)}zl.createRoot(document.getElementById("root")).render(w.jsx(Yy.StrictMode,{children:w.jsx(kI,{})}));
